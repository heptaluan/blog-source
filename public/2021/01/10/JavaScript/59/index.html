<!DOCTYPE html>
<html lang="zh">
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
<title>在 React 当中使用 TypeScript - heptaluan&#39;s blog</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



    <meta name="description" content="本文的主要目的是梳理一下在 React 当中使用 TypeScript，也就是 React 和 TypeScript 的结合使用，主要参考的是 React+TypeScript Cheatsheets，在原文基础之上有所调整，主要是方便自己理解，想要了解更为详细的内容可以参考原文 前半部分会梳理一下在 React 当中经常用到的一些 TypeScript 类型定义，后半部分会梳理一些在实际应用过程">
<meta name="keywords" content="JavaScript">
<meta property="og:type" content="article">
<meta property="og:title" content="在 React 当中使用 TypeScript">
<meta property="og:url" content="http://yoursite.com/2021/01/10/JavaScript/59/index.html">
<meta property="og:site_name" content="heptaluan&#39;s blog">
<meta property="og:description" content="本文的主要目的是梳理一下在 React 当中使用 TypeScript，也就是 React 和 TypeScript 的结合使用，主要参考的是 React+TypeScript Cheatsheets，在原文基础之上有所调整，主要是方便自己理解，想要了解更为详细的内容可以参考原文 前半部分会梳理一下在 React 当中经常用到的一些 TypeScript 类型定义，后半部分会梳理一些在实际应用过程">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://gitee.com/heptaluan/backups/raw/master/cdn/cover/59.webp">
<meta property="og:updated_time" content="2021-03-09T08:29:33.721Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="在 React 当中使用 TypeScript">
<meta name="twitter:description" content="本文的主要目的是梳理一下在 React 当中使用 TypeScript，也就是 React 和 TypeScript 的结合使用，主要参考的是 React+TypeScript Cheatsheets，在原文基础之上有所调整，主要是方便自己理解，想要了解更为详细的内容可以参考原文 前半部分会梳理一下在 React 当中经常用到的一些 TypeScript 类型定义，后半部分会梳理一些在实际应用过程">
<meta name="twitter:image" content="https://gitee.com/heptaluan/backups/raw/master/cdn/cover/59.webp">







<link rel="icon" href="https://gitee.com/heptaluan/backups/raw/master/cdn/favicon.ico">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.5.0/styles/atom-one-light.css">


    
    
    
    <style>body>.footer,body>.navbar,body>.section{opacity:0}</style>
    

    
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">
    

    
    

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">


    
    
    
    

<link rel="stylesheet" href="/css/back-to-top.css">


    
    

    
    
    
    

    
    
<link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>

    
    
    

    
    
    


<link rel="stylesheet" href="/css/style.css">
</head>
<body class="is-2-column">
    <!-- fork me on github -->
<a title="Fork me on GitHub" id="forkMe" style="position: fixed;top: 0;right: 0;z-index: 31" href="https://github.com/heptaluan" target="_blank">
    <svg style="color: #fff;fill: #a0a1a7;height: 80px;width: 80px;" viewbox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg>
</a>

<nav class="navbar navbar-main">
    <div class="container">
        <!-- <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/logo.svg" alt="在 React 当中使用 TypeScript" height="28">
            
            </a>
        </div> -->

        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item" href="/">Home</a>
                
                <a class="navbar-item" href="/archives">Archives</a>
                
                <a class="navbar-item" href="/categories">Categories</a>
                
                <a class="navbar-item" href="https://heptaluan.github.io/demos/">Demos</a>
                
            </div>
            
            <div class="navbar-end">
                
                
                <a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;">
                    <i class="fas fa-list-ul"></i>
                </a>
                
                
                <a class="navbar-item search" title="搜索" href="javascript:;">
                    <i class="fa fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-8-tablet is-8-desktop is-9-widescreen has-order-2 column-main"><div class="card">
    
    <div class="card-image">
        <span class="image is-7by1">
            <img class="thumbnail" src="https://gitee.com/heptaluan/backups/raw/master/cdn/cover/59.webp" alt="在 React 当中使用 TypeScript">
        </span>
    </div>
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <div class="level-item has-text-grey">2021-01-10</div>
                <!-- <time class="level-item has-text-grey" datetime="2021-01-09T16:00:00.000Z">2021-01-10</time> -->
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/JavaScript/">JavaScript</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    26 分钟 读完 (大约 3970 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                在 React 当中使用 TypeScript
            
        </h1>
        <div class="content">
            <p>本文的主要目的是梳理一下在 <code>React</code> 当中使用 <code>TypeScript</code>，也就是 <code>React</code> 和 <code>TypeScript</code> 的结合使用，主要参考的是 <a href="https://github.com/typescript-cheatsheets/react" target="_blank" rel="noopener">React+TypeScript Cheatsheets</a>，在原文基础之上有所调整，主要是方便自己理解，想要了解更为详细的内容可以参考原文</p>
<p>前半部分会梳理一下在 <code>React</code> 当中经常用到的一些 <code>TypeScript</code> 类型定义，后半部分会梳理一些在实际应用过程当中遇到的问题</p>
<a id="more"></a>


<h2 id="组件-Props"><a href="#组件-Props" class="headerlink" title="组件 Props"></a>组件 Props</h2><p>我们先从几种定义 <code>Props</code> 经常用到的类型开始看起</p>
<h4 id="基础类型"><a href="#基础类型" class="headerlink" title="基础类型"></a>基础类型</h4><figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">type</span> BasicProps = &#123;</span><br><span class="line">  message: <span class="hljs-built_in">string</span></span><br><span class="line">  count: <span class="hljs-built_in">number</span></span><br><span class="line">  disabled: <span class="hljs-built_in">boolean</span></span><br><span class="line">  names: <span class="hljs-built_in">string</span>[]                <span class="hljs-comment">// 数组类型</span></span><br><span class="line">  status: <span class="hljs-string">'waiting'</span> | <span class="hljs-string">'success'</span>  <span class="hljs-comment">// 用『联合类型』限制为下面两种『字符串字面量』类型 </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="对象类型"><a href="#对象类型" class="headerlink" title="对象类型"></a>对象类型</h4><figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">type</span> ObjectOrArrayProps = &#123;</span><br><span class="line">  obj: object                    <span class="hljs-comment">// ❌ 不推荐，除非不太需要用到具体的属性</span></span><br><span class="line">  obj2: &#123;&#125;                       <span class="hljs-comment">// ❌ 同上</span></span><br><span class="line">  obj3: &#123;                        <span class="hljs-comment">// ✅ 拥有具体属性的对象类型</span></span><br><span class="line">    id: <span class="hljs-built_in">string</span></span><br><span class="line">    title: <span class="hljs-built_in">string</span></span><br><span class="line">  &#125;</span><br><span class="line">  objArr: &#123;                      <span class="hljs-comment">// ✅ 比较常用的对象数组</span></span><br><span class="line">    id: <span class="hljs-built_in">string</span></span><br><span class="line">    title: <span class="hljs-built_in">string</span></span><br><span class="line">  &#125;[]</span><br><span class="line">  dict1: &#123;                       <span class="hljs-comment">// ✅ key 可以为任意 string，值限制为 MyType 类型</span></span><br><span class="line">    [key: <span class="hljs-built_in">string</span>]: MyType</span><br><span class="line">  &#125;</span><br><span class="line">  dict2: Record&lt;<span class="hljs-built_in">string</span>, MyType&gt;  <span class="hljs-comment">// ✅ 基本上和 dict1 相同，使用了 TypeScript 内置的 Record 类型</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="函数类型"><a href="#函数类型" class="headerlink" title="函数类型"></a>函数类型</h4><figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">type</span> FunctionProps = &#123;</span><br><span class="line">  onSomething: <span class="hljs-built_in">Function</span>                                      <span class="hljs-comment">// ❌ 因为不能设定参数以及返回值类型</span></span><br><span class="line">  onClick: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">void</span>                                        <span class="hljs-comment">// ✅ 对于没有参数的函数比较常用</span></span><br><span class="line">  onChange: <span class="hljs-function">(<span class="hljs-params">id: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>                             <span class="hljs-comment">// ✅ 带函数的参数</span></span><br><span class="line">  onClick(event: React.MouseEvent&lt;HTMLButtonElement&gt;): <span class="hljs-built_in">void</span>  <span class="hljs-comment">// ✅ 参数为 React 的按钮事件</span></span><br><span class="line">  optional?: OptionalType                                    <span class="hljs-comment">// ✅ 可选参数类型</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="React-相关类型"><a href="#React-相关类型" class="headerlink" title="React 相关类型"></a>React 相关类型</h4><figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">declare</span> <span class="hljs-keyword">interface</span> AppProps &#123;</span><br><span class="line">  children1: JSX.Element;                                    <span class="hljs-comment">// ❌ 因为没有考虑数组</span></span><br><span class="line">  children2: JSX.Element | JSX.Element[];                    <span class="hljs-comment">// ❌ 因为没有考虑字符串 children</span></span><br><span class="line">  children4: React.ReactChild[];                             <span class="hljs-comment">// 勉强可用，但是没考虑 null</span></span><br><span class="line">  children: React.ReactNode;                                 <span class="hljs-comment">// ✅ 包含所有 children 情况</span></span><br><span class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-title">Children</span>: (<span class="hljs-params">name: <span class="hljs-built_in">string</span></span>) =&gt; <span class="hljs-title">React</span>.<span class="hljs-title">ReactNode</span></span>;       <span class="hljs-comment">// ✅ 返回 React 节点的函数</span></span><br><span class="line">  style?: React.CSSProperties;                               <span class="hljs-comment">// ✅ 在内联 style 时使用</span></span><br><span class="line">  props: React.ComponentProps&lt;<span class="hljs-string">'button'</span>&gt;;                     <span class="hljs-comment">// ✅ 原生 button 标签自带的所有 props 类型，也可以在泛型的位置传入组件 提取组件的 Props 类型</span></span><br><span class="line">  onClickButton：React.ComponentProps&lt;<span class="hljs-string">'button'</span>&gt;[<span class="hljs-string">'onClick'</span>];  <span class="hljs-comment">// ✅ 在上一步的基础之上提取出原生的 onClick 函数类型，此时函数的第一个参数会自动推断为 React 的点击事件类型</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="函数式组件"><a href="#函数式组件" class="headerlink" title="函数式组件"></a>函数式组件</h4><p>比较常见方式</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">interface</span> AppProps = &#123; message: <span class="hljs-built_in">string</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">const</span> App = <span class="hljs-function">(<span class="hljs-params">&#123; message &#125;: AppProps</span>) =&gt;</span> &lt;div&gt;&#123;message&#125;&lt;<span class="hljs-regexp">/div&gt;</span></span><br></pre></td></tr></table></figure>

<p>另外还有一种包含 <code>children</code> 的函数式组件，我们可以直接使用内置类型 <code>React.FC</code>，这样不光会包含我们定义的 <code>AppProps</code> 还会自动加上一个 <code>children</code> 类型，以及其他组件上会出现的类型</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// 等同于</span></span><br><span class="line">AppProps &amp; &#123;</span><br><span class="line">  children: React.ReactNode</span><br><span class="line">  propTypes?: WeakValidationMap&lt;P&gt;</span><br><span class="line">  contextTypes?: ValidationMap&lt;<span class="hljs-built_in">any</span>&gt;</span><br><span class="line">  defaultProps?: Partial&lt;P&gt;</span><br><span class="line">  displayName?: <span class="hljs-built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// 使用</span></span><br><span class="line"><span class="hljs-keyword">interface</span> AppProps = &#123; message: <span class="hljs-built_in">string</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">const</span> App: React.FC&lt;AppProps&gt; = <span class="hljs-function">(<span class="hljs-params">&#123; message, children &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="hljs-keyword">return</span> (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      &#123;children&#125;</span><br><span class="line">      &lt;div&gt;&#123;message&#125;&lt;<span class="hljs-regexp">/div&gt;</span></span><br><span class="line"><span class="hljs-regexp">    &lt;/</span>&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>不过针对于简单的函数式组件，还是建议使用下面的第二种方式</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">interface</span> Greeting &#123;</span><br><span class="line">  name: <span class="hljs-built_in">string</span></span><br><span class="line">  age: <span class="hljs-built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">const</span> Hello: React.FC&lt;Greeting&gt; = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> &lt;h1&gt;Hello &#123;props.name&#125;&lt;<span class="hljs-regexp">/h1&gt;</span></span><br><span class="line"><span class="hljs-regexp"></span></span><br><span class="line"><span class="hljs-regexp">/</span><span class="hljs-regexp">/ 推荐使用第二种</span></span><br><span class="line"><span class="hljs-regexp">const Hello2 = (props: Greeting) =&gt; &lt;h1&gt;Hello &#123;props.name&#125;&lt;/</span>h1&gt;</span><br></pre></td></tr></table></figure>

<h2 id="Hooks"><a href="#Hooks" class="headerlink" title="Hooks"></a>Hooks</h2><p><code>@types/react</code> 包在 <code>16.8</code> 以上的版本开始对 <code>Hooks</code> 的支持</p>
<h4 id="useState"><a href="#useState" class="headerlink" title="useState"></a>useState</h4><p>这里分为两种情况，如果我们的默认值已经可以说明类型，那么不用手动声明类型，交给 <code>TypeScript</code> 自动推断即可</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">const</span> [val, toggle] = React.useState(<span class="hljs-literal">false</span>)</span><br><span class="line"></span><br><span class="line">toggle(<span class="hljs-literal">false</span>)</span><br><span class="line">toggle(<span class="hljs-literal">true</span>)</span><br></pre></td></tr></table></figure>

<p>但是如果初始值是 <code>null</code> 或 <code>undefined</code>，那就需要通过泛型手动传入我们所期望的类型</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">const</span> [user, setUser] = React.useState&lt;IUser | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>)</span><br><span class="line"></span><br><span class="line">setUser(newUser)</span><br></pre></td></tr></table></figure>

<p>这样也可以保证在我们直接访问 <code>user</code> 上的属性时，提示你它有可能是 <code>null</code>，可以通过 <code>optional-chaining</code> 语法（<code>TypeScript 3.7</code> 以上支持）来避免这个错误</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// ✅</span></span><br><span class="line"><span class="hljs-keyword">const</span> name = user?.name</span><br></pre></td></tr></table></figure>

<h4 id="useReducer"><a href="#useReducer" class="headerlink" title="useReducer"></a>useReducer</h4><p>通常会使用 <a href="https://www.typescriptlang.org/docs/handbook/typescript-in-5-minutes-func.html#discriminated-unions" target="_blank" rel="noopener">Discriminated Unions</a> 来标注 <code>action</code> 的类型</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">const</span> initialState = &#123; count: <span class="hljs-number">0</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">type</span> ACTIONTYPE =</span><br><span class="line">  | &#123; <span class="hljs-keyword">type</span>: <span class="hljs-string">'increment'</span>; payload: <span class="hljs-built_in">number</span> &#125;</span><br><span class="line">  | &#123; <span class="hljs-keyword">type</span>: <span class="hljs-string">'decrement'</span>; payload: <span class="hljs-built_in">string</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reducer</span>(<span class="hljs-params">state: <span class="hljs-keyword">typeof</span> initialState, action: ACTIONTYPE</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="hljs-keyword">case</span> <span class="hljs-string">'increment'</span>:</span><br><span class="line">      <span class="hljs-keyword">return</span> &#123; count: state.count + action.payload &#125;</span><br><span class="line">    <span class="hljs-keyword">case</span> <span class="hljs-string">'decrement'</span>:</span><br><span class="line">      <span class="hljs-keyword">return</span> &#123; count: state.count - <span class="hljs-built_in">Number</span>(action.payload) &#125;</span><br><span class="line">    <span class="hljs-keyword">default</span>:</span><br><span class="line">      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Counter</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">const</span> [state, dispatch] = React.useReducer(reducer, initialState)</span><br><span class="line">  <span class="hljs-keyword">return</span> (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      Count: &#123;state.count&#125;</span><br><span class="line">      &lt;button onClick=&#123;<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> dispatch(&#123; <span class="hljs-keyword">type</span>: <span class="hljs-string">'decrement'</span>, payload: <span class="hljs-string">'5'</span> &#125;)&#125;&gt;</span><br><span class="line">        -</span><br><span class="line">      &lt;<span class="hljs-regexp">/button&gt;</span></span><br><span class="line"><span class="hljs-regexp">      &lt;button onClick=&#123;() =&gt; dispatch(&#123; type: 'increment', payload: 5 &#125;)&#125;&gt;</span></span><br><span class="line"><span class="hljs-regexp">        +</span></span><br><span class="line"><span class="hljs-regexp">      &lt;/</span>button&gt;</span><br><span class="line">    &lt;<span class="hljs-regexp">/&gt;</span></span><br><span class="line"><span class="hljs-regexp">  )</span></span><br><span class="line"><span class="hljs-regexp">&#125;</span></span><br></pre></td></tr></table></figure>

<p><a href="https://www.typescriptlang.org/docs/handbook/typescript-in-5-minutes-func.html#discriminated-unions" target="_blank" rel="noopener">Discriminated Unions</a> 一般是一个联合类型，其中每一个类型都需要通过类似 <code>type</code> 这种特定的字段来区分，当你传入特定的 <code>type</code> 时，剩下的类型 <code>payload</code> 就会自动匹配推断，类似于下面这样</p>
<ul>
<li>当我们写入的 <code>type</code> 匹配到 <code>decrement</code> 的时候，<code>TypeScript</code> 会自动推断出相应的 <code>payload</code> 应该是 <code>string</code> 类型</li>
<li>当我们写入的 <code>type</code> 匹配到 <code>increment</code> 的时候，则 <code>payload</code> 应该是 <code>number</code> 类型</li>
</ul>
<p>这样一来，在我们使用 <code>dispatch</code> 的时候，输入对应的 <code>type</code>，编辑器就会自动提示我们剩余的参数类型</p>
<h4 id="useEffect"><a href="#useEffect" class="headerlink" title="useEffect"></a>useEffect</h4><p><code>useEffect</code> 有些特殊，因为 <code>useEffect</code> 传入的函数，它的返回值要么是一个方法（清理函数），要么就是 <code>undefined</code>，其他情况都会报错，比较常见的一个情况是我们的 <code>useEffect</code> 需要执行一个 <code>async</code> 函数，比如</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// Type 'Promise&lt;void&gt;' provides no match for the signature '(): void | undefined'</span></span><br><span class="line">useEffect(<span class="hljs-keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> getUser()</span><br><span class="line">  setUser(user)</span><br><span class="line">&#125;, [])</span><br></pre></td></tr></table></figure>

<p>上面的写法在编辑器当中会有报错提示，因为我们虽然没有在 <code>async</code> 函数里显式的返回值，但是我们都知道 <code>async</code> 函数默认会返回一个 <code>Promise</code>，这就导致了 <code>TypeScript</code> 的报错，所以我们来稍微调整一下上面的示例</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">useEffect(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="hljs-keyword">const</span> getUser = <span class="hljs-keyword">async</span> () =&gt; &#123;</span><br><span class="line">    <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> getUser()</span><br><span class="line">    setUser(user)</span><br><span class="line">  &#125;</span><br><span class="line">  getUser()</span><br><span class="line">&#125;, [])</span><br></pre></td></tr></table></figure>

<p>或者也可以采用下面这种自执行函数的方式，不过可读性不太好，不推荐</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">useEffect(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;</span><br><span class="line">  (<span class="hljs-keyword">async</span> () =&gt; &#123;</span><br><span class="line">    <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> getUser()</span><br><span class="line">    setUser(user)</span><br><span class="line">  &#125;)()</span><br><span class="line">&#125;, [])</span><br></pre></td></tr></table></figure>

<h4 id="useRef"><a href="#useRef" class="headerlink" title="useRef"></a>useRef</h4><p>这个 <code>Hook</code> 在很多时候是没有初始值的，这样可以声明返回对象中 <code>current</code> 属性的类型</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">const</span> ref = useRef&lt;HTMLElement&gt;(<span class="hljs-literal">null</span>)</span><br></pre></td></tr></table></figure>

<p>以一个按钮场景为例</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">TextInputWithFocusButton</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">const</span> inputEl = React.useRef&lt;HTMLInputElement&gt;(<span class="hljs-literal">null</span>)</span><br><span class="line">  <span class="hljs-keyword">const</span> onButtonClick = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="hljs-keyword">if</span> (inputEl &amp;&amp; inputEl.current) &#123;</span><br><span class="line">      inputEl.current.focus()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="hljs-keyword">return</span> (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      &lt;input ref=&#123;inputEl&#125; <span class="hljs-keyword">type</span>=<span class="hljs-string">"text"</span> /&gt;</span><br><span class="line">      &lt;button onClick=&#123;onButtonClick&#125;&gt;Focus the input&lt;<span class="hljs-regexp">/button&gt;</span></span><br><span class="line"><span class="hljs-regexp">    &lt;/</span>&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当 <code>onButtonClick</code> 事件触发时，可以肯定 <code>inputEl</code> 也是有值的，因为组件是同级别渲染的，但是还是依然要做冗余的非空判断，针对于这种情况可以使用『非空断言』的方式</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">const</span> ref = useRef&lt;HTMLElement&gt;(<span class="hljs-literal">null</span>!)</span><br></pre></td></tr></table></figure>

<p><code>null!</code> 这种语法称为非空断言，跟在一个值后面表示我们断定它是有值的，所以在我们使用 <code>inputEl.current.focus()</code> 的时候，<code>TypeScript</code> 不会给出报错，不过需要注意的是，但是这种语法比较危险，建议『尽量少的去使用它』</p>
<p>一种更为好的解决方式就是使用『可选链』，如下</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">if</span> (inputEl &amp;&amp; inputEl.current) &#123;</span><br><span class="line">  inputEl.current?.focus()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在绝大部分情况下，『可选链』的方式是个更为安全的选择，除非这个值真的不可能为空（比如在使用之前就赋值了）</p>
<h4 id="useImperativeHandle"><a href="#useImperativeHandle" class="headerlink" title="useImperativeHandle"></a>useImperativeHandle</h4><p>在此之前，我们先来简单的了解一下 <code>forwardRef</code> 这个 <code>API</code>，因为函数式组件默认不可以加 <code>ref</code>，所以它不像类组件那样有自己的实例，这个 <code>API</code> 一般是函数式组件用来接收父组件传来的 <code>ref</code>，所以需要标注好实例类型，也就是父组件通过 <code>ref</code> 可以拿到什么样类型的值</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">type</span> Props = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> Ref = HTMLButtonElement</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> FancyButton = React.forwardRef&lt;Ref, Props&gt;<span class="hljs-function">(<span class="hljs-params">(<span class="hljs-params">props, ref</span>) =&gt; (<span class="hljs-params"></span></span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">  &lt;button ref=&#123;ref&#125; className="MyClassName"&gt;</span></span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">    &#123;props.children&#125;</span></span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">  &lt;/button&gt;</span></span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"></span>)</span>)</span></span><br></pre></td></tr></table></figure>

<p>由于这个例子里直接把 <code>ref</code> 转发给 <code>button</code> 了，所以直接把类型标注为 <code>HTMLButtonElement</code> 即可，这样一来，父组件向下面这样调用，就可以拿到正确类型</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> App = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="hljs-keyword">const</span> ref = useRef&lt;HTMLButtonElement&gt;()</span><br><span class="line">  <span class="hljs-keyword">return</span> (</span><br><span class="line">    &lt;FancyButton ref=&#123;ref&#125; /&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>下面在回到 <code>useImperativeHandle</code> 上，<code>useImperativeHandle</code> 的作用是可以让我们在使用 <code>ref</code> 时自定义暴露给父组件的实例值，通常来说这在开发一些通用组件的情况下比较适用，但是在和 <code>TypeScript</code> 结合使用的时候就会遇到不小的问题，比如我们有一个通用的列表组件，它的样子可能会是下面这样的</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">type</span> ListRef&lt;ItemType&gt; = &#123;</span><br><span class="line">  scrollToItem: <span class="hljs-function">(<span class="hljs-params">item: ItemType</span>) =&gt;</span> <span class="hljs-built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">type</span> ListProps&lt;ItemType&gt; = &#123;</span><br><span class="line">  items: ItemType[]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">const</span> List = forwardRef(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">List</span>&lt;<span class="hljs-title">ItemType</span>&gt;(<span class="hljs-params">props: ListProps&lt;ItemType&gt;</span>) </span>&#123;</span><br><span class="line">  useImperativeHandle&lt;ListRef&lt;ItemType&gt;, ListRef&lt;ItemType&gt;&gt;<span class="hljs-function">(<span class="hljs-params">ref, (<span class="hljs-params"></span>) =&gt; (<span class="hljs-params">&#123;</span></span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">    scrollToItem: (<span class="hljs-params">item: ItemType</span>) =&gt; <span class="hljs-literal">undefined</span></span></span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">  &#125;</span>)</span>)</span></span><br><span class="line"><span class="hljs-function">  <span class="hljs-params">return</span> <span class="hljs-params">null</span></span></span><br><span class="line"><span class="hljs-function">&#125;) <span class="hljs-params">as</span> &lt;<span class="hljs-params">ItemType</span>&gt;(<span class="hljs-params"></span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params">  p: ListProps&lt;ItemType&gt; &amp; &#123; ref: Ref&lt;ListRef&lt;ItemType&gt;&gt; &#125;</span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params"></span>) =&gt;</span> ReactElement&lt;<span class="hljs-built_in">any</span>&gt; | <span class="hljs-literal">null</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">let</span> ref = useRef&lt;ListRef&lt;<span class="hljs-built_in">number</span>&gt;&gt;(<span class="hljs-literal">null</span>)</span><br><span class="line"></span><br><span class="line">&lt;List items=&#123;[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]&#125; ref=&#123;ref&#125; /&gt;</span><br></pre></td></tr></table></figure>

<p>不幸的是 <code>TypeScript</code> 在执行高阶函数编程时无法保留自由类型参数，这确实是最好的方法，因为 <code>forwardRef</code> 原则上返回类型只是一个 <a href="https://github.com/DefinitelyTyped/DefinitelyTyped/blob/a09aa0ec0935eef4460361ad832c97a8eb92f536/types/react/index.d.ts#L753" target="_blank" rel="noopener">普通函数</a>，针对于这种情况，我们更为推荐使用一个自定义的 <code>innerRef</code> 来代替原生的 <code>ref</code></p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">type</span> ListProps = &#123;</span><br><span class="line">  innerRef?: React.Ref&lt;&#123; scrollToTop(): <span class="hljs-built_in">void</span> &#125;&gt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">List</span>(<span class="hljs-params">props: ListProps</span>) </span>&#123;</span><br><span class="line">  useImperativeHandle(props.innerRef, <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> (&#123;</span><br><span class="line">    scrollToTop() &#123; &#125;</span><br><span class="line">  &#125;))</span><br><span class="line">  <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>结合我们之前提到的 <code>useRef</code>，使用是这样的</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Use</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">const</span> listRef = useRef&lt;&#123; scrollToTop(): <span class="hljs-built_in">void</span> &#125;&gt;(<span class="hljs-literal">null</span>!)</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;</span><br><span class="line">    listRef.current.scrollToTop()</span><br><span class="line">  &#125;, [])</span><br><span class="line"></span><br><span class="line">  <span class="hljs-keyword">return</span> (</span><br><span class="line">    &lt;List innerRef=&#123;listRef&#125; /&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>看上去是不是清晰许多，但是在这里我们也只是简单的提及一二，因为平时遇到的实在是有限（除非专门开发一些通用的组件库等），关于 <code>React.forwardRef</code> 更为复杂的用法和示例可以参考下面几个链接</p>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/262712552" target="_blank" rel="noopener">React 实现 forwardRef 的 TypeScript 泛型匿名函数组件</a></li>
<li><a href="https://stackoverflow.com/questions/58469229/react-with-typescript-generics-while-using-react-forwardref/58473012#58473012" target="_blank" rel="noopener">Generics while using React.forwardRef</a></li>
<li><a href="https://github.com/vuejs/vue-next/commit/c6b7afcc23faefd8c504c3c5705ecb5b0f4be0fd#diff-2751769c8b46d7bef1f06b254c0257f1" target="_blank" rel="noopener">Vue3 当中的 ref 相关源码</a></li>
</ul>
<h4 id="自定义-Hook"><a href="#自定义-Hook" class="headerlink" title="自定义 Hook"></a>自定义 Hook</h4><p>如果我们想仿照 <code>useState</code> 的形式，返回一个数组给用户使用，一定要记得在适当的时候使用 <code>as const</code> 来标记这个返回值是个常量，告诉 <code>TypeScript</code> 数组里的值不会删除，改变顺序等，否则返回的每一项都会被 <code>TypeScript</code> 推断成是『所有类型可能性的联合类型』，这会影响正常使用</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">useLoading</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">const</span> [isLoading, setState] = React.useState(<span class="hljs-literal">false</span>)</span><br><span class="line">  <span class="hljs-keyword">const</span> load = <span class="hljs-function">(<span class="hljs-params">aPromise: <span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">any</span>&gt;</span>) =&gt;</span> &#123;</span><br><span class="line">    setState(<span class="hljs-literal">true</span>)</span><br><span class="line">    <span class="hljs-keyword">return</span> aPromise.finally(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> setState(<span class="hljs-literal">false</span>))</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="hljs-keyword">return</span> [isLoading, load] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如上，只有我们添加了 <code>as const</code> 才会推断出 <code>[boolean, typeof load]</code>，否则会是 <code>(boolean | typeof load)[]</code></p>
<h2 id="React-TypeScript"><a href="#React-TypeScript" class="headerlink" title="React + TypeScript"></a>React + TypeScript</h2><p>下面我们再来看一些在实际当中结合使用 <code>React</code> 和 <code>TypeScript</code> 过程当中会遇到的一些问题</p>
<h4 id="模块导入相关问题"><a href="#模块导入相关问题" class="headerlink" title="模块导入相关问题"></a>模块导入相关问题</h4><p>通常我们在使用 <code>import</code> 引入非 <code>JavaScript</code> 模块的时候，<code>TypeScript</code> 会提示我们找不到相关模块，而此时使用 <code>require</code> 却是可以的，如下</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">import</span> styles <span class="hljs-keyword">from</span> <span class="hljs-string">'./login.less'</span></span><br><span class="line"><span class="hljs-keyword">import</span> logo <span class="hljs-keyword">from</span> <span class="hljs-string">'@assets/images/logo.svg'</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">const</span> logo2 = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@assets/images/logo.svg'</span>)</span><br><span class="line"></span><br><span class="line"><span class="hljs-built_in">console</span>.log(logo2)</span><br></pre></td></tr></table></figure>

<p>针对于这种情况，我们需要给非 <code>JavaScript</code> 模块添加申明</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">/* style */</span></span><br><span class="line"><span class="hljs-keyword">declare</span> <span class="hljs-keyword">module</span> '*.css'</span><br><span class="line">declare <span class="hljs-keyword">module</span> '*.less'</span><br><span class="line">declare <span class="hljs-keyword">module</span> '*.scss'</span><br><span class="line"></span><br><span class="line">/* 图片 */</span><br><span class="line">declare <span class="hljs-keyword">module</span> '*.svg'</span><br><span class="line">declare <span class="hljs-keyword">module</span> '*.png'</span><br><span class="line">declare <span class="hljs-keyword">module</span> '*.jpg'</span><br><span class="line">declare <span class="hljs-keyword">module</span> '*.jpeg'</span><br><span class="line">declare <span class="hljs-keyword">module</span> '*.gif'</span><br><span class="line">declare <span class="hljs-keyword">module</span> '*.bmp'</span><br></pre></td></tr></table></figure>

<p>另外我们可能见到过 <code>import * as React from &#39;react&#39;</code> 这样的引入方式，那么它与 <code>import React from &#39;react&#39;</code> 有什么区别呢？简单来说有两点</p>
<ul>
<li>第一种写法是将所有用 <code>export</code> 导出的成员赋值给 <code>React</code>，导入后用 <code>React.xx</code> 来进行访问</li>
<li>第二种写法仅是将默认导出（<code>export default</code>）的内容赋值给 <code>React</code></li>
</ul>
<p>我们也可以通过配置 <code>tsconfig.json</code> 来解决 <code>import * as xx from &#39;xx&#39;</code> 这样的引入方式，如下</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="hljs-comment">// 允许默认导入没有设置默认导出（export default xxx）的模块可以以 import xx from 'xx' 的形式来引入模块</span></span><br><span class="line">  <span class="hljs-string">"allowSyntheticDefaultImports"</span>: <span class="hljs-literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>而配置前后的对比如下</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// 配置前</span></span><br><span class="line"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span></span><br><span class="line"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> ReactDOM <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dom'</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// 配置后</span></span><br><span class="line"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span></span><br><span class="line"><span class="hljs-keyword">import</span> ReactDOM <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dom'</span></span><br></pre></td></tr></table></figure>

<h4 id="antd-的按需加载"><a href="#antd-的按需加载" class="headerlink" title="antd 的按需加载"></a>antd 的按需加载</h4><p>方案有很多种，我们这里采用的是 <code>ts-loader</code> 转译 <code>TypeScript</code> 的方案，更多方案可以参考 <a href="https://juejin.cn/post/6844904052094926855" target="_blank" rel="noopener">Webpack 转译 Typescript 现有方案</a> 这篇文章</p>
<ul>
<li><code>.babelrc</code></li>
</ul>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="hljs-string">"presets"</span>: [</span><br><span class="line">    <span class="hljs-string">"@babel/preset-react"</span>,</span><br><span class="line">    <span class="hljs-string">"@babel/preset-env"</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="hljs-string">"plugins"</span>: [</span><br><span class="line">    [</span><br><span class="line">      <span class="hljs-string">"import"</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="hljs-string">"libraryName"</span>: <span class="hljs-string">"antd"</span>,</span><br><span class="line">        <span class="hljs-string">"libraryDirectory"</span>: <span class="hljs-string">"es"</span>,</span><br><span class="line">        <span class="hljs-string">"style"</span>: <span class="hljs-string">"css"</span></span><br><span class="line">        <span class="hljs-comment">/* `style: true` 会加载 less 文件*/</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>tsconfig.json</code></li>
</ul>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="hljs-string">"compilerOptions"</span>: &#123;</span><br><span class="line">    <span class="hljs-string">"target"</span>: <span class="hljs-string">"es5"</span>,</span><br><span class="line">    <span class="hljs-string">"jsx"</span>: <span class="hljs-string">"preserve"</span>, <span class="hljs-comment">// 保留 jsx</span></span><br><span class="line">    <span class="hljs-comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>webpack.config.js</code></li>
</ul>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: <span class="hljs-regexp">/\.tsx?$/</span>,</span><br><span class="line">  use: [</span><br><span class="line">    <span class="hljs-string">'babel-loader'</span>,</span><br><span class="line">    <span class="hljs-string">'ts-loader'</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="使用-React-createRef"><a href="#使用-React-createRef" class="headerlink" title="使用 React.createRef()"></a>使用 React.createRef()</h4><p>定义如下</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// 源码</span></span><br><span class="line"><span class="hljs-keyword">interface</span> RefObject&lt;T&gt; &#123;</span><br><span class="line">  readonly current: T | <span class="hljs-literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">const</span> ref1: React.RefObject&lt;HTMLDivElement&gt; = React.createRef()</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">const</span> inputRef = React.createRef&lt;Comp&gt;()</span><br><span class="line"><span class="hljs-keyword">class</span> EditScene <span class="hljs-keyword">extends</span> React.Component&lt;Props&gt; &#123;</span><br><span class="line">  inputRef: React.RefObject&lt;Comp&gt;</span><br><span class="line">  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">props</span>) &#123;</span><br><span class="line">    <span class="hljs-keyword">super</span>(props)</span><br><span class="line">    <span class="hljs-keyword">this</span>.inputRef = React.createRef&lt;Comp&gt;()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="connect-装饰器相关问题"><a href="#connect-装饰器相关问题" class="headerlink" title="@connect 装饰器相关问题"></a>@connect 装饰器相关问题</h4><p>在 <code>TypeScript 3.0</code> 版本之前，我们在使用 <code>React</code> 配合 <code>Redux</code> 一类 <code>HOC</code> 库的时候，经常会用到诸如 <code>connect(TodoList)</code>，<code>withRouter(TodoList)</code> 之类的封装，而这些函数其实都可以用装饰器的方式来调用，如下</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> TodoListProps <span class="hljs-keyword">extends</span> RouteComponentProps&lt;&#123;&#125;&gt; &#123;</span><br><span class="line">  todos: Todo[]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-meta">@withRouter</span></span><br><span class="line"><span class="hljs-meta">@connect</span>(mapStateToProps)</span><br><span class="line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> TodoList <span class="hljs-keyword">extends</span> PureComponent&lt;TodoListProps, &#123;&#125;&gt; &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>其中的 <code>@connect</code> 装饰器在平常正常使用的过程中是没有问题的，但是一旦和 <code>TypeScript</code> 结合使用的时候就会报错，这是因为我们在使用装饰器的过程当中会自动注入一些 <code>props</code> 给组件，这一部分属性不需要外部传入，因此是可选的，但是在 <code>strictNullChecks</code> 属性开启的时候（它的作用是不允许把 <code>null</code>、<code>undefined</code> 赋值给其他类型变量）就会出现属性冲突，因为 <code>TypeScript</code> 不允许装饰器修改被装饰的对象的类型，因此在 <code>props</code> 定义中为 <code>required</code> 的属性依然为 <code>required</code></p>
<p>比如对于上面的示例，在实例化 <code>TodoList</code> 这个组件的时候，必需要传入所有的 <code>TodoListProps</code> 所定义的属性，否则会提示我们有错误存在</p>
<p>而在 <code>TypeScript 3.0</code> 以后，我们就可以声明 <code>defaultProps</code> 属性用来表明某些属性对外部组件而言是可选的（具体可见 <a href="https://github.com/Microsoft/TypeScript/wiki/What%27s-new-in-TypeScript#support-for-defaultprops-in-jsx" target="_blank" rel="noopener">Support for defaultProps in JSX</a>），如下</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">@withRouter</span></span><br><span class="line"><span class="hljs-meta">@connect</span>(<span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> (&#123; todos: state.todos &#125;)</span><br><span class="line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> TodoList <span class="hljs-keyword">extends</span> PureComponent&lt;TodoListProps, &#123;&#125;&gt; &#123;</span><br><span class="line">  <span class="hljs-keyword">static</span> defaultProps: TodoListProps</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里的 <code>static defaultProps: TodoListProps</code> 表明所有的 <code>TodoList</code> 的 <code>props TodoListProps</code> 对外部组件都是可选的，这就意味着外部组件可以什么属性都不用传也不会有错误，同时对于内部而言所有的属性都是 <code>NotNullable</code></p>
<p>综上，通常情况下我们的一个组件会有一部分属性由装饰器注入，而另一部分则需要外部实例化时传入，因此可以将一个组件的 <code>props</code> 接口声明成两层结构，第一层为由装饰器注入的部分，第二层则为完整的属性接口，然后将 <code>defaultProps</code> 设置成为第一层接口即可，比如</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> TodoListInnerProps <span class="hljs-keyword">extends</span> RouteComponentProps&lt;&#123;&#125;&gt; &#123;</span><br><span class="line">  todos: Todo[]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> TodoListProps <span class="hljs-keyword">extends</span> TodoListInnerProps &#123;</span><br><span class="line">  className?: <span class="hljs-built_in">string</span></span><br><span class="line">  onLoad?(): <span class="hljs-built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-meta">@withRouter</span></span><br><span class="line"><span class="hljs-meta">@connect</span>(<span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> (&#123; todos: state.todos &#125;)</span><br><span class="line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> TodoList <span class="hljs-keyword">extends</span> PureComponent&lt;TodoListProps, &#123;&#125;&gt; &#123;</span><br><span class="line">  <span class="hljs-keyword">static</span> defaultProps: TodoListInnerProps</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>最后我们再来简单的总结一下其中需要注意的地方</p>
<ol>
<li>首先 <code>TypeScript</code> 要要 <code>3.0.1</code> 版本以上</li>
<li>其次 <code>@types/react</code> 需要是最新版</li>
<li>最后 <code>withRouter</code>，<code>connect</code> 等函数的 <code>@types</code> 中的签名需要手动修改一下</li>
</ol>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">import</span> &#123; ComponentClass &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span></span><br><span class="line"><span class="hljs-keyword">import</span> &#123;</span><br><span class="line">  connect <span class="hljs-keyword">as</span> nativeConnect,</span><br><span class="line">  MapDispatchToPropsParam,</span><br><span class="line">  MapStateToPropsParam</span><br><span class="line">&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'react-redux'</span></span><br><span class="line"><span class="hljs-keyword">import</span> &#123; withRouter <span class="hljs-keyword">as</span> nativeWithRouter &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router'</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> ComponentDecorator&lt;P = <span class="hljs-built_in">any</span>&gt; = &lt;T <span class="hljs-keyword">extends</span> ComponentClass&lt;P&gt;&gt;<span class="hljs-function">(<span class="hljs-params">WrappedComponent: T</span>) =&gt;</span> T</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> connect: &lt;P, S = Todo&gt;(</span><br><span class="line">  mapState: MapStateToPropsParam&lt;Partial&lt;P&gt;, P, S&gt;,</span><br><span class="line">  mapDispatch?: MapDispatchToPropsParam&lt;Partial&lt;P&gt;, P&gt;</span><br><span class="line">) =&gt; ComponentDecorator = nativeConnect <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> withRouter: ComponentDecorator = nativeWithRouter <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span></span><br></pre></td></tr></table></figure>

<h4 id="HOC-的类型定义"><a href="#HOC-的类型定义" class="headerlink" title="HOC 的类型定义"></a>HOC 的类型定义</h4><figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">import</span> React, &#123; Component &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span></span><br><span class="line"><span class="hljs-keyword">import</span> HelloClass <span class="hljs-keyword">from</span> <span class="hljs-string">'./HelloClass'</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">interface</span> Loading &#123;</span><br><span class="line">  loading: <span class="hljs-built_in">boolean</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// HOC 可以接收一个类组件，也可以接收一个函数组件，所以参数的类型是 React.ComponentType</span></span><br><span class="line"><span class="hljs-comment">// 源码当中的定义为 type ComponentType&lt;P = &#123;&#125;&gt; = ComponentClass&lt;P&gt; | FunctionComponent&lt;P&gt;</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">HelloHOC</span>&lt;<span class="hljs-title">P</span>&gt;(<span class="hljs-params">WrappedComponent: React.ComponentType&lt;P&gt;</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">return</span> <span class="hljs-keyword">class</span> <span class="hljs-keyword">extends</span> Component&lt;P &amp; Loading&gt; &#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">      <span class="hljs-keyword">const</span> &#123; loading, ...props &#125; = <span class="hljs-keyword">this</span>.props</span><br><span class="line">      <span class="hljs-keyword">return</span> loading ? &lt;div&gt;Loading...&lt;<span class="hljs-regexp">/div&gt; : &lt;WrappedComponent &#123;...props as P&#125; /</span>&gt;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> HelloHOC(HelloClass)</span><br></pre></td></tr></table></figure>

<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a href="https://github.com/DefinitelyTyped/DefinitelyTyped/blob/a09aa0ec0935eef4460361ad832c97a8eb92f536/types/react/index.d.ts#L753" target="_blank" rel="noopener">forwardRef</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/262712552" target="_blank" rel="noopener">React 实现 forwardRef 的 TypeScript 泛型匿名函数组件</a></li>
<li><a href="https://stackoverflow.com/questions/58469229/react-with-typescript-generics-while-using-react-forwardref/58473012#58473012" target="_blank" rel="noopener">Generics while using React.forwardRef</a></li>
<li><a href="https://github.com/vuejs/vue-next/commit/c6b7afcc23faefd8c504c3c5705ecb5b0f4be0fd#diff-2751769c8b46d7bef1f06b254c0257f1" target="_blank" rel="noopener">Vue3 当中的 ref 相关源码</a></li>
</ul>

        </div>
        
        <div class="level is-size-7 is-uppercase">
            <div class="level-start">
                <div class="level-item">
                    <span class="is-size-6 has-text-grey has-mr-7">#</span>
                    <a class="has-link-grey -link" href="/tags/JavaScript/">JavaScript</a>
                </div>
            </div>
        </div>
        
        
        
    </div>
</div>





<div class="card card-transparent">
    <div class="level post-navigation is-flex-wrap is-mobile">
        
        <div class="level-start">
            <a class="level level-item has-link-grey  article-nav-prev" href="/2021/03/07/Vue/06/">
                <i class="level-item fa fa-chevron-left"></i>
                <span class="level-item">Vite 的工程化流程</span>
            </a>
        </div>
        
        
        <div class="level-end">
            <a class="level level-item has-link-grey  article-nav-next" href="/2021/01/09/JavaScript/58/">
                <span class="level-item">深入 TypeScript 当中的泛型</span>
                <i class="level-item fa fa-chevron-right"></i>
            </a>
        </div>
        
    </div>
</div>



<div class="card">
    <div class="card-content">
        <h3 class="title is-5 has-text-weight-normal">评论</h3>
        
<div id="comment-container"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.4.1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1.4.1/dist/gitalk.min.js"></script>
<script>
    var gitalk = new Gitalk({
        clientID: '584b59de0d23cd48fbdd',
        clientSecret: '5554c9aab0a640015867806f438bd2e10f297e5a',
        id: 'ccc4fc974bc9b746b70c42f65c7e4cb9',
        repo: 'gitalk',
        owner: 'heptaluan',
        admin: "heptaluan"
    })
    gitalk.render('comment-container')
</script>

    </div>
</div>
</div>
                




<div class="column is-4-tablet is-4-desktop is-3-widescreen  has-order-1 column-left ">
    
        
<div class="card widget">
    <div class="card-content">
        <nav class="level">
            <div class="level-item has-text-centered">
                <div>
                    
                        <figure class="avatar image is-128x128 has-mb-6">
                            <img class="is-rounded" src="https://gitee.com/heptaluan/backups/raw/master/cdn/avatar.png" alt="heptaluan">
                        </figure>
                    
                    
                    <p class="is-size-4 is-block">
                        heptaluan
                    </p>
                    
                    
                    <p class="is-size-6 is-block">
                        Torches@Aimer
                    </p>
                    
                    
                    <p class="is-size-6 is-flex is-flex-center has-text-grey">
                        <i class="fas fa-map-marker-alt has-mr-7"></i>
                        <span>WuHan China</span>
                    </p>
                    
                </div>
            </div>
        </nav>
        <!-- <nav class="level is-mobile">
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        文章
                    </p>
                    <p class="title has-text-weight-normal">
                        151
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        分类
                    </p>
                    <p class="title has-text-weight-normal">
                        8
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        标签
                    </p>
                    <p class="title has-text-weight-normal">
                        8
                    </p>
                </div>
            </div>
        </nav> -->
        <!-- <div class="level">
            <a class="level-item button is-link is-rounded" href="https://github.com/ppoffice" target="_blank">
                关注我</a>
        </div> -->
        
        
    </div>
</div>
    
        
<div class="card widget" id="toc">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                目录
            </h3>
            <ul class="menu-list"><li>
        <a class="is-flex" href="#组件-Props">
        <span class="has-mr-6">1</span>
        <span>组件 Props</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#基础类型">
        <span class="has-mr-6">1.1</span>
        <span>基础类型</span>
        </a></li><li>
        <a class="is-flex" href="#对象类型">
        <span class="has-mr-6">1.2</span>
        <span>对象类型</span>
        </a></li><li>
        <a class="is-flex" href="#函数类型">
        <span class="has-mr-6">1.3</span>
        <span>函数类型</span>
        </a></li><li>
        <a class="is-flex" href="#React-相关类型">
        <span class="has-mr-6">1.4</span>
        <span>React 相关类型</span>
        </a></li><li>
        <a class="is-flex" href="#函数式组件">
        <span class="has-mr-6">1.5</span>
        <span>函数式组件</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#Hooks">
        <span class="has-mr-6">2</span>
        <span>Hooks</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#useState">
        <span class="has-mr-6">2.1</span>
        <span>useState</span>
        </a></li><li>
        <a class="is-flex" href="#useReducer">
        <span class="has-mr-6">2.2</span>
        <span>useReducer</span>
        </a></li><li>
        <a class="is-flex" href="#useEffect">
        <span class="has-mr-6">2.3</span>
        <span>useEffect</span>
        </a></li><li>
        <a class="is-flex" href="#useRef">
        <span class="has-mr-6">2.4</span>
        <span>useRef</span>
        </a></li><li>
        <a class="is-flex" href="#useImperativeHandle">
        <span class="has-mr-6">2.5</span>
        <span>useImperativeHandle</span>
        </a></li><li>
        <a class="is-flex" href="#自定义-Hook">
        <span class="has-mr-6">2.6</span>
        <span>自定义 Hook</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#React-TypeScript">
        <span class="has-mr-6">3</span>
        <span>React + TypeScript</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#模块导入相关问题">
        <span class="has-mr-6">3.1</span>
        <span>模块导入相关问题</span>
        </a></li><li>
        <a class="is-flex" href="#antd-的按需加载">
        <span class="has-mr-6">3.2</span>
        <span>antd 的按需加载</span>
        </a></li><li>
        <a class="is-flex" href="#使用-React-createRef">
        <span class="has-mr-6">3.3</span>
        <span>使用 React.createRef()</span>
        </a></li><li>
        <a class="is-flex" href="#connect-装饰器相关问题">
        <span class="has-mr-6">3.4</span>
        <span>@connect 装饰器相关问题</span>
        </a></li><li>
        <a class="is-flex" href="#HOC-的类型定义">
        <span class="has-mr-6">3.5</span>
        <span>HOC 的类型定义</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#参考">
        <span class="has-mr-6">4</span>
        <span>参考</span>
        </a></li></ul>
        </div>
    </div>
</div>

    
        


    
        
<div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                分类
            </h3>
            <ul class="menu-list">
            <li>
        <a class="level is-marginless" href="/categories/Angular/">
            <span class="level-start">
                <span class="level-item">Angular</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">15</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/CSS/">
            <span class="level-start">
                <span class="level-item">CSS</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">14</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Essay/">
            <span class="level-start">
                <span class="level-item">Essay</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">29</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/HTTP/">
            <span class="level-start">
                <span class="level-item">HTTP</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">11</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/JavaScript/">
            <span class="level-start">
                <span class="level-item">JavaScript</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">45</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Node-js/">
            <span class="level-start">
                <span class="level-item">Node.js</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">14</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/React/">
            <span class="level-start">
                <span class="level-item">React</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">18</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Vue/">
            <span class="level-start">
                <span class="level-item">Vue</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">5</span>
            </span>
        </a></li>
            </ul>
        </div>
    </div>
</div>
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            标签云
        </h3>
        <a href="/tags/Angular/" style="font-size: 15px;">Angular</a> <a href="/tags/CSS/" style="font-size: 13.33px;">CSS</a> <a href="/tags/Essay/" style="font-size: 18.33px;">Essay</a> <a href="/tags/HTTP/" style="font-size: 11.67px;">HTTP</a> <a href="/tags/JavaScript/" style="font-size: 20px;">JavaScript</a> <a href="/tags/Node-js/" style="font-size: 13.33px;">Node.js</a> <a href="/tags/React/" style="font-size: 16.67px;">React</a> <a href="/tags/Vue/" style="font-size: 10px;">Vue</a>
    </div>
</div>

    
    
        <div class="column-right-shadow  ">
        
            
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            <a href="/tips" class="tips">
                最新文章
            </a>
        </h3>
        
        <article class="media">
            
            <a href="/2021/03/07/Vue/06/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="https://gitee.com/heptaluan/backups/raw/master/cdn/cover/06.webp" alt="Vite 的工程化流程">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2021-03-06T16:00:00.000Z">2021-03-07</time></div>
                    <a href="/2021/03/07/Vue/06/" class="has-link-black-ter is-size-6">Vite 的工程化流程</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Vue/">Vue</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2021/01/10/JavaScript/59/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="https://gitee.com/heptaluan/backups/raw/master/cdn/cover/59.webp" alt="在 React 当中使用 TypeScript">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2021-01-09T16:00:00.000Z">2021-01-10</time></div>
                    <a href="/2021/01/10/JavaScript/59/" class="has-link-black-ter is-size-6">在 React 当中使用 TypeScript</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/JavaScript/">JavaScript</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2021/01/09/JavaScript/58/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="https://gitee.com/heptaluan/backups/raw/master/cdn/cover/58.webp" alt="深入 TypeScript 当中的泛型">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2021-01-08T16:00:00.000Z">2021-01-09</time></div>
                    <a href="/2021/01/09/JavaScript/58/" class="has-link-black-ter is-size-6">深入 TypeScript 当中的泛型</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/JavaScript/">JavaScript</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2021/01/01/JavaScript/57/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="https://gitee.com/heptaluan/backups/raw/master/cdn/cover/57.webp" alt="深入 TypeScript">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-12-31T16:00:00.000Z">2021-01-01</time></div>
                    <a href="/2021/01/01/JavaScript/57/" class="has-link-black-ter is-size-6">深入 TypeScript</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/JavaScript/">JavaScript</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2020/12/26/JavaScript/56/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="https://gitee.com/heptaluan/backups/raw/master/cdn/cover/56.webp" alt="重温 TypeScript">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-12-25T16:00:00.000Z">2020-12-26</time></div>
                    <a href="/2020/12/26/JavaScript/56/" class="has-link-black-ter is-size-6">重温 TypeScript</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/JavaScript/">JavaScript</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            归档
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2021/03/">
                <span class="level-start">
                    <span class="level-item">三月 2021</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2021/01/">
                <span class="level-start">
                    <span class="level-item">一月 2021</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/10/">
                <span class="level-start">
                    <span class="level-item">十月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/09/">
                <span class="level-start">
                    <span class="level-item">九月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/08/">
                <span class="level-start">
                    <span class="level-item">八月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/07/">
                <span class="level-start">
                    <span class="level-item">七月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/06/">
                <span class="level-start">
                    <span class="level-item">六月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/05/">
                <span class="level-start">
                    <span class="level-item">五月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/04/">
                <span class="level-start">
                    <span class="level-item">四月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/03/">
                <span class="level-start">
                    <span class="level-item">三月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/02/">
                <span class="level-start">
                    <span class="level-item">二月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/01/">
                <span class="level-start">
                    <span class="level-item">一月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/10/">
                <span class="level-start">
                    <span class="level-item">十月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/09/">
                <span class="level-start">
                    <span class="level-item">九月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/08/">
                <span class="level-start">
                    <span class="level-item">八月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/07/">
                <span class="level-start">
                    <span class="level-item">七月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/06/">
                <span class="level-start">
                    <span class="level-item">六月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/05/">
                <span class="level-start">
                    <span class="level-item">五月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/04/">
                <span class="level-start">
                    <span class="level-item">四月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/03/">
                <span class="level-start">
                    <span class="level-item">三月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/02/">
                <span class="level-start">
                    <span class="level-item">二月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/01/">
                <span class="level-start">
                    <span class="level-item">一月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/10/">
                <span class="level-start">
                    <span class="level-item">十月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/09/">
                <span class="level-start">
                    <span class="level-item">九月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/08/">
                <span class="level-start">
                    <span class="level-item">八月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/07/">
                <span class="level-start">
                    <span class="level-item">七月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/06/">
                <span class="level-start">
                    <span class="level-item">六月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/05/">
                <span class="level-start">
                    <span class="level-item">五月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/04/">
                <span class="level-start">
                    <span class="level-item">四月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/03/">
                <span class="level-start">
                    <span class="level-item">三月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/02/">
                <span class="level-start">
                    <span class="level-item">二月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/01/">
                <span class="level-start">
                    <span class="level-item">一月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/10/">
                <span class="level-start">
                    <span class="level-item">十月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/09/">
                <span class="level-start">
                    <span class="level-item">九月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/08/">
                <span class="level-start">
                    <span class="level-item">八月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/07/">
                <span class="level-start">
                    <span class="level-item">七月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/06/">
                <span class="level-start">
                    <span class="level-item">六月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/05/">
                <span class="level-start">
                    <span class="level-item">五月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/04/">
                <span class="level-start">
                    <span class="level-item">四月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/03/">
                <span class="level-start">
                    <span class="level-item">三月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/01/">
                <span class="level-start">
                    <span class="level-item">一月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                标签
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Angular/">
                        <span class="tag">Angular</span>
                        <span class="tag is-grey">15</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/CSS/">
                        <span class="tag">CSS</span>
                        <span class="tag is-grey">14</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Essay/">
                        <span class="tag">Essay</span>
                        <span class="tag is-grey">29</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/HTTP/">
                        <span class="tag">HTTP</span>
                        <span class="tag is-grey">11</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/JavaScript/">
                        <span class="tag">JavaScript</span>
                        <span class="tag is-grey">45</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Node-js/">
                        <span class="tag">Node.js</span>
                        <span class="tag is-grey">14</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/React/">
                        <span class="tag">React</span>
                        <span class="tag is-grey">18</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Vue/">
                        <span class="tag">Vue</span>
                        <span class="tag is-grey">5</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
        
        </div>
    
</div>

                
            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <!-- <a class="footer-logo is-block has-mb-6" href="/">
                
                    <img src="/images/logo.svg" alt="在 React 当中使用 TypeScript" height="28">
                
                </a> -->
                <p class="is-size-7">
                &copy; 2016 - 2021
                Made with ✿  heptaluan&nbsp;
                
                </p>
            </div>
            <!-- <div class="level-end">
            
            </div> -->
        </div>
    </div>
</footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("zh-CN");</script>


    
    
    
    <script src="/js/animation.js"></script>
    

    
    
    
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
    <script src="/js/gallery.js" defer></script>
    

    
    

<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>


    
    
<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>

    
    

<a id="back-to-top" title="回到顶端" href="javascript:;">
    <i class="fa fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>


    
    

    
    
    
    

    
    
    
    
    
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>
    <script src="/js/clipboard.js" defer></script>
    

    
    
    


<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="想要查找什么...">
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: '文章',
                PAGES: '页面',
                CATEGORIES: '分类',
                TAGS: '标签',
                UNTITLED: '(无标题)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
</body>
</html>