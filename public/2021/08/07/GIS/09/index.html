<!DOCTYPE html>
<html lang="zh">
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
<title>glTF 与 3D Tiles - heptaluan&#39;s blog</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



    <meta name="description" content="到目前为止，我们已经介绍了如何利用 Cesium 加载影像数据、地形高程数据、矢量数据，以及空间可视化方面的几何数据（Entity），另外在三维数据方面，Cesium 还支持模型文件 glTF，以及三维瓦片数据 3D Tiles，下面我们就先从 glTF 开始看起">
<meta name="keywords" content="GIS">
<meta property="og:type" content="article">
<meta property="og:title" content="glTF 与 3D Tiles">
<meta property="og:url" content="http://yoursite.com/2021/08/07/GIS/09/index.html">
<meta property="og:site_name" content="heptaluan&#39;s blog">
<meta property="og:description" content="到目前为止，我们已经介绍了如何利用 Cesium 加载影像数据、地形高程数据、矢量数据，以及空间可视化方面的几何数据（Entity），另外在三维数据方面，Cesium 还支持模型文件 glTF，以及三维瓦片数据 3D Tiles，下面我们就先从 glTF 开始看起">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://gitee.com/heptaluan/backups/raw/master/cdn/cover/09.webp">
<meta property="og:updated_time" content="2021-08-18T10:07:03.904Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="glTF 与 3D Tiles">
<meta name="twitter:description" content="到目前为止，我们已经介绍了如何利用 Cesium 加载影像数据、地形高程数据、矢量数据，以及空间可视化方面的几何数据（Entity），另外在三维数据方面，Cesium 还支持模型文件 glTF，以及三维瓦片数据 3D Tiles，下面我们就先从 glTF 开始看起">
<meta name="twitter:image" content="https://gitee.com/heptaluan/backups/raw/master/cdn/cover/09.webp">







<link rel="icon" href="https://gitee.com/heptaluan/backups/raw/master/cdn/favicon.ico">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.5.0/styles/atom-one-light.css">


    
    
    
    <style>body>.footer,body>.navbar,body>.section{opacity:0}</style>
    

    
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">
    

    
    

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">


    
    
    
    

<link rel="stylesheet" href="/css/back-to-top.css">


    
    

    
    
    
    

    
    
<link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>

    
    
    

    
    
    


<link rel="stylesheet" href="/css/style.css">
</head>
<body class="is-2-column">
    <!-- fork me on github -->
<a title="Fork me on GitHub" id="forkMe" style="position: fixed;top: 0;right: 0;z-index: 31" href="https://github.com/heptaluan" target="_blank">
    <svg style="color: #fff;fill: #a0a1a7;height: 80px;width: 80px;" viewbox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg>
</a>

<nav class="navbar navbar-main">
    <div class="container">
        <!-- <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/logo.svg" alt="glTF 与 3D Tiles" height="28">
            
            </a>
        </div> -->

        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item" href="/">Home</a>
                
                <a class="navbar-item" href="/archives">Archives</a>
                
                <a class="navbar-item" href="/categories">Categories</a>
                
                <a class="navbar-item" href="https://heptaluan.github.io/demos/">Demos</a>
                
            </div>
            
            <div class="navbar-end">
                
                
                <a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;">
                    <i class="fas fa-list-ul"></i>
                </a>
                
                
                <a class="navbar-item search" title="搜索" href="javascript:;">
                    <i class="fa fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-8-tablet is-8-desktop is-9-widescreen has-order-2 column-main"><div class="card">
    
    <div class="card-image">
        <span class="image is-7by1">
            <img class="thumbnail" src="https://gitee.com/heptaluan/backups/raw/master/cdn/cover/09.webp" alt="glTF 与 3D Tiles">
        </span>
    </div>
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <div class="level-item has-text-grey">2021-08-07</div>
                <!-- <time class="level-item has-text-grey" datetime="2021-08-06T16:00:00.000Z">2021-08-07</time> -->
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/GIS/">GIS</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    39 分钟 读完 (大约 5780 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                glTF 与 3D Tiles
            
        </h1>
        <div class="content">
            <p>到目前为止，我们已经介绍了如何利用 <code>Cesium</code> 加载影像数据、地形高程数据、矢量数据，以及空间可视化方面的几何数据（<code>Entity</code>），另外在三维数据方面，<code>Cesium</code> 还支持模型文件 <code>glTF</code>，以及三维瓦片数据 <code>3D Tiles</code>，下面我们就先从 <code>glTF</code> 开始看起</p>
<a id="more"></a>

<h2 id="什么是-glTF"><a href="#什么是-glTF" class="headerlink" title="什么是 glTF"></a>什么是 glTF</h2><p><code>glTF</code> 全称是 <code>Graphics Language Transmission Format</code>（图形语言传输格式），是一种针对 <code>GL</code>（<code>WebGL</code>，<code>OpenGL ES</code> 以及 <code>OpenGL</code>）接口的运行时资产传递格式，由澳大利亚的 <code>Khronons</code> 集团进行维护，并于 <code>2017</code> 年在 <code>GitHub</code> 上公布了 <a href="https://github.com/KhronosGroup/glTF" target="_blank" rel="noopener">glTF 2.0</a> 的规范，这里我们也是针对于 <code>2.0</code> 版本进行介绍的</p>
<p><code>glTF</code> 通过提供高效、可扩展、可互操作的格式来传输和加载三维内容，填补了 <code>3D</code> 建模工具与现代图形应用程序之间的空白，它已成为了 <code>Web</code> 上的 <code>3D</code> 对象标准（<code>Web</code> 导出的通用标准），可以说 <code>glTF</code> 是 <code>3D</code> 模型的 <code>JPEG</code> 格式，几乎每个 <code>3D Web</code> 框架都支持 <code>glTF</code>，随着 <code>glTF</code> 的不断发展，<code>glTF</code> 形成了自己庞大的生态系统，同时收到了各行业的大力支持</p>
<p><code>glTF</code> 的生态系统如下图所示</p>
<p><img src="https://gitee.com/heptaluan/backups/raw/master/cdn/gis/09-01.png" alt></p>
<p><code>glTF</code> 行业支持如下图所示</p>
<p><img src="https://gitee.com/heptaluan/backups/raw/master/cdn/gis/09-02.png" alt></p>
<p>同时 <code>Cesium</code> 官方 <code>GitHub</code> 中也提供了 <code>obj</code> 转 <code>glTF</code> 的源码库，可以见 <a href="https://github.com/CesiumGS/obj2gltf" target="_blank" rel="noopener">obj2gltf</a>，目前 <code>glTF 3D</code> 模型格式有两种</p>
<ul>
<li><code>*.gltf</code> - 基于 <code>JSON</code> 的文本文件，可使用文本编辑器编辑，通常会引用外部文件，例如纹理贴图、二进制网格数据等</li>
<li><code>*.glb</code> - 是二进制格式，通常文件较小且自包含所有资源，但不容易编辑</li>
</ul>
<p>要获取 <code>glb</code> 文件，可以直接从 <code>3D</code> 建模程序中导出它们，也可以使用工具将 <code>gltf</code> 转换为 <code>glb</code>，在线转换工具推荐 <a href="https://sbtron.github.io/makeglb/" target="_blank" rel="noopener">MakeGLB</a>，当然如果使用的是 <code>VS Code</code> 编辑器，建议安装 <code>glTF Tools</code> 这个扩展工具，它能够非常方便的查看 <code>glTF</code> 的数据结构、<code>glTF</code> 和 <code>glb</code> 互转等</p>
<h2 id="glTF-场景描述结构"><a href="#glTF-场景描述结构" class="headerlink" title="glTF 场景描述结构"></a>glTF 场景描述结构</h2><p><code>glTF</code> 的核心是一个 <code>JSON</code> 文件，另外还支持外部数据，具体而言，一个 <code>glTF</code> 模型可包括以下三部分内容</p>
<ul>
<li><code>JSON</code> 格式的文件（<code>.gltf</code>），其中包含完整的场景描述，并通过场景结点引用网格进行定义，主要包括<ul>
<li>节点层次结构、材质（定义了 <code>3D</code> 对象的外观）</li>
<li>相机（定义义了渲染程序的视锥体设置 ）</li>
<li><code>mesh</code>（网格）</li>
<li>动画（定义了 <code>3D</code> 对象的变换操作，比如选择、平移操作）</li>
<li>蒙皮（定义了 <code>3D</code> 对象如何进行骨骼变换）</li>
</ul>
</li>
<li><code>.bin</code> 包含几何和动画数据以及其他基于缓冲区的数据的二进制文件</li>
<li>图像文件（<code>.jpg</code>，<code>.png</code>）的纹理</li>
</ul>
<p>如下图所示</p>
<p><img src="https://gitee.com/heptaluan/backups/raw/master/cdn/gis/09-03.png" alt></p>
<p>以其他格式定义的文件（例如图像文件）可以存储在通过 <code>URI</code> 引用的外部文件中，并排存储在 <code>GLB</code> 容器中，或使用数据 <code>URI</code> 直接嵌入到 <code>JSON</code> 中，一个有效的 <code>glTF</code> 模型必须指定其版本</p>
<h2 id="glTF-的-JSON-结构"><a href="#glTF-的-JSON-结构" class="headerlink" title="glTF 的 JSON 结构"></a>glTF 的 JSON 结构</h2><p>通常而言，场景对象是以数组的形式存储在 <code>JSON</code> 文件中，我们可以使用数组中各个对象的索引来访问它们，就像下面这样</p>
<figure class="highlight js hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-string">'meshes'</span>: [</span><br><span class="line">  &#123; ... &#125;</span><br><span class="line">  &#123; ... &#125;</span><br><span class="line">  ...</span><br><span class="line">],</span><br></pre></td></tr></table></figure>

<p>这些索引还用于定义对象之间的关系，上面的示例定义了多个网格对象，并且一个节点可以使用网格索引引用上面定义的其中一个网格对象</p>
<figure class="highlight js hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-string">'nodes'</span>: [</span><br><span class="line">  &#123; <span class="hljs-string">'mesh'</span>: <span class="hljs-number">0</span>, ... &#125;,</span><br><span class="line">  &#123; <span class="hljs-string">'mesh'</span>: <span class="hljs-number">5</span>, ... &#125;,</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>下图概述了 <code>glTF</code> 的 <code>JSON</code> 部分的顶级元素</p>
<p><img src="https://gitee.com/heptaluan/backups/raw/master/cdn/gis/09-04.png" alt></p>
<ul>
<li><code>scene</code> - <code>glTF</code> 格式的场景结构描述条目，它通过引用 <code>node</code> 来定义场景图</li>
<li><code>node</code> - 场景图层次中的一个节点，它可以包含一个变换（比如旋转或平移），并且可以引用其他（子）节点 ，此外它可以引用网格和相机，以及描述网格变换的蒙皮</li>
<li><code>camera</code> - 定义了用于渲染场景的视锥体配置</li>
<li><code>mesh</code> - 描述了出现在场景中几何对象实际的几何数据，它是指 <code>accessor</code> 用于访问实际几何数据 <code>material</code> 的对象，并且是指在渲染对象时定义其外观的</li>
<li><code>skin</code> - 定义了用于蒙皮的参数，参数的值通过一个 <code>accessor</code> 对象获得</li>
<li><code>animation</code> - 描述了一些结点如何随时间进行变换（比如旋转或平移）</li>
<li><code>accessor</code> - 一个访问任意数据的抽象数据源，被 <code>mesh</code>、<code>skin</code> 和 <code>animation</code> 元素使用来提供几何数据、蒙皮参数和基于时间的动画值，它通过引用一个 <code>bufferView</code> 对象，来引用实际的二进制数据</li>
<li><code>material</code> - 包含了定义 <code>3D</code> 对象外观的参数，它通常引用了用于 <code>3D</code> 对象渲染的 <code>texture</code> 对象</li>
<li><code>texture</code> - 定义了一个 <code>sampler</code> 对象和一个 <code>image</code> 对象，<code>sampler</code> 对象定义了 <code>image</code> 对象在 <code>3D</code> 对象上的张贴方式</li>
</ul>
<p>更多详情可以查阅 <a href="https://github.com/KhronosGroup/glTF/tree/master/specification/2.0/" target="_blank" rel="noopener">glTF 2.0 规范</a> 和 <a href="https://github.com/KhronosGroup/glTF-Tutorials/tree/master/gltfTutorial" target="_blank" rel="noopener">glTF 官方教程</a>，我们来对照示例进行了解，比如下面这个就是一个最小巧的 <code>glTF</code> 格式文件的内容，它描述了一个简单的三角形</p>
<figure class="highlight js hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="hljs-string">"scenes"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="hljs-string">"nodes"</span>: [<span class="hljs-number">0</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="hljs-string">"nodes"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="hljs-string">"mesh"</span>: <span class="hljs-number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="hljs-string">"meshes"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="hljs-string">"primitives"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="hljs-string">"attributes"</span>: &#123;</span><br><span class="line">            <span class="hljs-string">"POSITION"</span>: <span class="hljs-number">1</span></span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="hljs-string">"indices"</span>: <span class="hljs-number">0</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="hljs-string">"buffers"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="hljs-string">"uri"</span>: <span class="hljs-string">"data:application/octet-stream;base64,AAABAAIAAAAAAAAAAAAAAAAAAAAAAIA/AAAAAAAAAAAAAAAAAACAPwAAAAA="</span>,</span><br><span class="line">      <span class="hljs-string">"byteLength"</span>: <span class="hljs-number">44</span></span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="hljs-string">"bufferViews"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="hljs-string">"buffer"</span>: <span class="hljs-number">0</span>,</span><br><span class="line">      <span class="hljs-string">"byteOffset"</span>: <span class="hljs-number">0</span>,</span><br><span class="line">      <span class="hljs-string">"byteLength"</span>: <span class="hljs-number">6</span>,</span><br><span class="line">      <span class="hljs-string">"target"</span>: <span class="hljs-number">34963</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="hljs-string">"buffer"</span>: <span class="hljs-number">0</span>,</span><br><span class="line">      <span class="hljs-string">"byteOffset"</span>: <span class="hljs-number">8</span>,</span><br><span class="line">      <span class="hljs-string">"byteLength"</span>: <span class="hljs-number">36</span>,</span><br><span class="line">      <span class="hljs-string">"target"</span>: <span class="hljs-number">34962</span></span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="hljs-string">"accessors"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="hljs-string">"bufferView"</span>: <span class="hljs-number">0</span>,</span><br><span class="line">      <span class="hljs-string">"byteOffset"</span>: <span class="hljs-number">0</span>,</span><br><span class="line">      <span class="hljs-string">"componentType"</span>: <span class="hljs-number">5123</span>,</span><br><span class="line">      <span class="hljs-string">"count"</span>: <span class="hljs-number">3</span>,</span><br><span class="line">      <span class="hljs-string">"type"</span>: <span class="hljs-string">"SCALAR"</span>,</span><br><span class="line">      <span class="hljs-string">"max"</span>: [<span class="hljs-number">2</span>],</span><br><span class="line">      <span class="hljs-string">"min"</span>: [<span class="hljs-number">0</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="hljs-string">"bufferView"</span>: <span class="hljs-number">1</span>,</span><br><span class="line">      <span class="hljs-string">"byteOffset"</span>: <span class="hljs-number">0</span>,</span><br><span class="line">      <span class="hljs-string">"componentType"</span>: <span class="hljs-number">5126</span>,</span><br><span class="line">      <span class="hljs-string">"count"</span>: <span class="hljs-number">3</span>,</span><br><span class="line">      <span class="hljs-string">"type"</span>: <span class="hljs-string">"VEC3"</span>,</span><br><span class="line">      <span class="hljs-string">"max"</span>: [<span class="hljs-number">1.0</span>, <span class="hljs-number">1.0</span>, <span class="hljs-number">0.0</span>],</span><br><span class="line">      <span class="hljs-string">"min"</span>: [<span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="hljs-string">"asset"</span>: &#123;</span><br><span class="line">    <span class="hljs-string">"version"</span>: <span class="hljs-string">"2.0"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>效果是下面这样的</p>
<p><img src="https://gitee.com/heptaluan/backups/raw/master/cdn/gis/09-05.png" alt></p>
<h2 id="Cesium-加载-glTF-模型"><a href="#Cesium-加载-glTF-模型" class="headerlink" title="Cesium 加载 glTF 模型"></a>Cesium 加载 glTF 模型</h2><p><code>Cesium</code> 提供了两种方式加载 <code>glTF</code> 模型，分别是通过 <code>Entity API</code> 和 <code>Primitive API</code> 两个 <code>API</code> 实现的，核心代码如下</p>
<figure class="highlight js hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">var</span> position = Cesium.Cartesian3.fromDegrees(<span class="hljs-number">-120.05</span>, <span class="hljs-number">44</span>, <span class="hljs-number">0</span>)</span><br><span class="line"><span class="hljs-keyword">var</span> heading = Cesium.Math.toRadians(<span class="hljs-number">45</span>)</span><br><span class="line"><span class="hljs-keyword">var</span> pitch = <span class="hljs-number">0</span></span><br><span class="line"><span class="hljs-keyword">var</span> roll = <span class="hljs-number">0</span></span><br><span class="line"><span class="hljs-keyword">var</span> hpr = <span class="hljs-keyword">new</span> Cesium.HeadingPitchRoll(heading, pitch, roll)</span><br><span class="line"><span class="hljs-keyword">var</span> orientation = Cesium.Transforms.headingPitchRollQuaternion(position, hpr)</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">var</span> model_entity = viewer.entities.add(&#123;</span><br><span class="line">  name: <span class="hljs-string">'gltf模型'</span>,</span><br><span class="line">  position: position,</span><br><span class="line">  orientation: orientation,               <span class="hljs-comment">// 默认情况下，模型是直立的并面向东，可以通过 Quaternion 为 Entity.orientation 属性指定值来控制模型的方向，控制模型的航向，俯仰和横滚</span></span><br><span class="line">  model: &#123;</span><br><span class="line">    show: <span class="hljs-literal">true</span>,</span><br><span class="line">    uri: <span class="hljs-string">'./data/models/DracoCompressed/CesiumMilkTruck.gltf'</span>,</span><br><span class="line">    scale: <span class="hljs-number">1.0</span>,                           <span class="hljs-comment">// 缩放比例</span></span><br><span class="line">    minimumPixelSize: <span class="hljs-number">128</span>,                <span class="hljs-comment">// 最小像素大小</span></span><br><span class="line">    maximumScale: <span class="hljs-number">20000</span>,                  <span class="hljs-comment">// 模型的最大比例尺大小，minimumPixelSize 的上限</span></span><br><span class="line">    incrementallyLoadTextures: <span class="hljs-literal">true</span>,      <span class="hljs-comment">// 加载模型后纹理是否可以继续流入</span></span><br><span class="line">    runAnimations: <span class="hljs-literal">true</span>,                  <span class="hljs-comment">// 是否应启动模型中指定的glTF动画</span></span><br><span class="line">    clampAnimations: <span class="hljs-literal">true</span>,                <span class="hljs-comment">// 指定 glTF 动画是否应在没有关键帧的持续时间内保持最后一个姿势</span></span><br><span class="line">    shadows: Cesium.ShadowMode.ENABLED,   <span class="hljs-comment">// 指定模型是否投射或接收来自光源的阴影</span></span><br><span class="line">    heightReference: Cesium.HeightReference.NONE,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// viewer.trackedEntity = entity          // 相机保持在实体上</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">var</span> origin = Cesium.Cartesian3.fromDegrees(<span class="hljs-number">-120</span>, <span class="hljs-number">44.0</span>, <span class="hljs-number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// 创建一个本地的东北向上坐标系，其原点为经度 -120 度，纬度 44.0 度</span></span><br><span class="line"><span class="hljs-comment">// 可以随时更改模型的 modelMatrix 属性以移动或旋转模型</span></span><br><span class="line"><span class="hljs-keyword">var</span> modelMatrix = Cesium.Transforms.eastNorthUpToFixedFrame(origin)</span><br><span class="line"><span class="hljs-keyword">var</span> model = viewer.scene.primitives.add(</span><br><span class="line">  Cesium.Model.fromGltf(&#123;</span><br><span class="line">    url: <span class="hljs-string">'./data/models/DracoCompressed/CesiumMilkTruck.gltf'</span>,</span><br><span class="line">    modelMatrix: modelMatrix,</span><br><span class="line">    minimumPixelSize: <span class="hljs-number">128</span>,</span><br><span class="line">    maximumScale: <span class="hljs-number">20000</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">model.readyPromise.then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">model</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// Play all animations when the model is ready to render</span></span><br><span class="line">  model.activeAnimations.addAll()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>效果如下所示</p>
<p><img src="https://gitee.com/heptaluan/backups/raw/master/cdn/gis/09-06.png" alt></p>
<p>这里我们简单提及一下 <code>modelMatrix</code> 这个属性，该属性类型是 <code>Matrix4</code>，即 <code>4x4</code> 转换矩阵，用于将模型坐标转换为世界坐标，也就是为模型创建一个局部坐标系，正如示例中的代码那样，为模型创建了一个本地的东北向上坐标系，其原点为经度 <code>-120</code> 度，纬度 <code>44.0</code> 度，在 <code>Cesium</code> 调试器面板中勾选显示参考框架，能够很清晰的看到该模型对应的 <code>x</code>、<code>y</code>、<code>z</code> 轴以及原点</p>
<p><img src="https://gitee.com/heptaluan/backups/raw/master/cdn/gis/09-07.png" alt></p>
<h2 id="3D-Tiles"><a href="#3D-Tiles" class="headerlink" title="3D Tiles"></a>3D Tiles</h2><p><code>3D Tiles</code> 是目前 <code>Cesium</code> 在加载海量三维模型数据方面必须采用的一种数据格式，其实简单来说，<code>3D Tiles</code> 就是在 <code>glTF</code> 的基础上，加入了分层 <code>LOD</code> 的概念（可以把 <code>3D Tiles</code> 简单地理解为带有 <code>LOD</code> 的 <code>glTF</code>），专门为流式传输和渲染海量 <code>3D</code> 地理空间数据而设计的，例如倾斜摄影、<code>3D</code> 建筑、<code>BIM/CAD</code>、实例化要素集和点云</p>
<p>它定义了一种数据分层结构和一组切片格式，用于渲染数据内容，<code>3D Tiles</code> 没有为数据的可视化定义明确的规则，客户可以按照自己合适的方式来可视化 <code>3D</code> 空间数据，同时 <code>3D Tiles</code> 也是 <code>OGC</code> 标准规范成员之一，可用于在台式机、<code>Web</code> 端和移动应用程序中实现与海量异构 <code>3D</code> 地理空间数据的共享、可视化、融合以及交互功能，下图的动画则是加入了 <code>LOD</code> 的效果</p>
<p><img src="https://gitee.com/heptaluan/backups/raw/master/cdn/gis/09-08.webp" alt></p>
<p>在 <code>3D Tiles</code> 中，一个瓦片集（<code>Tileset</code>）是由一组瓦片（<code>Tile</code>）按照空间数据结构（树状结构）组织而成的，它至少包含一个用于描述瓦片集的 <code>JSON</code> 文件（包含瓦片集的元数据和瓦片对象），其中每一个瓦片对象可以引用下面的其中一种格式，用于渲染瓦片内容</p>
<table>
<thead>
<tr>
<th>格式</th>
<th>用途</th>
</tr>
</thead>
<tbody><tr>
<td>批处理 <code>3D</code> 模型（<code>Batched 3D Model(b3dm)</code>）</td>
<td>异构 <code>3D</code> 模型，例如带纹理的地形和表面，<code>3D</code> 建筑外部和内部，大型模型</td>
</tr>
<tr>
<td>实例化 <code>3D</code> 模型（<code>Instanced 3D Model(i3dm)</code>）</td>
<td><code>3D</code> 模型实例，例如树木，风车，螺栓</td>
</tr>
<tr>
<td>点云（<code>Point Cloud(pnts)</code>）</td>
<td>大量的点</td>
</tr>
<tr>
<td>复合（<code>Composite(cmpt)</code>）</td>
<td>以上不同格式的切片组合到一个切片中</td>
</tr>
</tbody></table>
<blockquote>
<p>瓦片的内容（瓦片格式的一个单独实例）是一个二进制 <code>blob</code>，具有特定于格式的组件，包括要素表（<code>Feature Table</code>）和批处理表（<code>Batch Table</code>）</p>
<p>瓦片内容参考多种要素集特征，例如表示建筑物或树木的 <code>3D</code> 模型或点云中的点，每个要素的位置和外观属性都存储在瓦片要素表中，其他应用于特定程序的属性则存储在批处理表中，客户端可选择在运行时选择要素，并检索其属性以进行可视化或分析</p>
</blockquote>
<p>上面表格中的 <code>b3dm</code> 和 <code>i3dm</code> 格式是基于 <code>glTF</code> 构建的，它们的瓦片内容在二进制体中嵌入了 <code>glTF</code> 资源，包含模型的几何和纹理信息，而 <code>pnts</code> 格式却没有嵌入 <code>glTF</code> 资源</p>
<p>瓦片中的树状组织结合了层次细节模型（<code>Hierarchical Level of Detail</code>，简称 <code>HLOD</code>）的概念，以便最佳地渲染空间数据，在树状结构中，每个瓦片都有一个边界范围框属性，该边界范围框在空间中能够完全包围该瓦片和孩子节点的数据，下图为一种 <code>3D Tiles</code> 边界范围框所形成的层次体系示例</p>
<p><img src="https://gitee.com/heptaluan/backups/raw/master/cdn/gis/09-09.png" alt></p>
<blockquote>
<p>瓦片集可以使用类似于 <code>2D</code> 空间的栅格和矢量瓦片方案（例如 <code>Web</code> 地图切片服务 <code>WMTS</code> 或 <code>XYZ</code> 方案），其在若干细节级别（或缩放级别）处提供预定义的瓦片，但是由于瓦片集的内容通常是不一致的，或者可能很难仅在二维上组织，因此树可以是具有空间一致性的任何空间数据结构，包括 <code>k-d</code> 树，四叉树，八叉树和网格</p>
</blockquote>
<p><code>3D Tiles</code> 的样式是可选的，可以将其应用于 <code>Tileset</code>，样式是由可计算的表达式所定义，用于修改每个要素的显示方式，这里我们暂时就介绍到这里，更多关于 <code>3D Tiles</code> 的信息可查看 <a href="https://github.com/CesiumGS/3d-tiles" target="_blank" rel="noopener">3d-tiles</a> 和 <a href="http://docs.opengeospatial.org/cs/18-053r2/18-053r2.html" target="_blank" rel="noopener">OGC 规范</a> 了解更多</p>
<p>下面我们主要来简单介绍一下最为核心的两个概念，即 <code>Tiles</code> 和 <code>Tileset</code>，我们先从一个简单的 <code>3D Tiles</code> 数据示例说起，下面代码为一个 <code>3D Tiles</code> 的主瓦片集 <code>JSON</code> 文件（<code>tileset.json</code>）的一部分，也是调用 <code>3D Tiles</code> 数据的入口文件，为了尽可能少占篇幅，<code>children</code> 部分已省略，详细文件可见官方当中的 <a href="https://github.com/CesiumGS/3d-tiles/blob/master/examples/tileset.json" target="_blank" rel="noopener">tileset.json</a></p>
<figure class="highlight json hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="hljs-attr">"asset"</span>: &#123;</span><br><span class="line">    <span class="hljs-attr">"version"</span>: <span class="hljs-string">"1.0"</span>,</span><br><span class="line">    <span class="hljs-attr">"tilesetVersion"</span>: <span class="hljs-string">"e575c6f1-a45b-420a-b172-6449fa6e0a59"</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="hljs-attr">"properties"</span>: &#123;</span><br><span class="line">    <span class="hljs-attr">"Height"</span>: &#123;</span><br><span class="line">      <span class="hljs-attr">"minimum"</span>: <span class="hljs-number">1</span>,</span><br><span class="line">      <span class="hljs-attr">"maximum"</span>: <span class="hljs-number">241.6</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="hljs-attr">"geometricError"</span>: <span class="hljs-number">494.50961650991815</span>,</span><br><span class="line">  <span class="hljs-attr">"root"</span>: &#123;</span><br><span class="line">    <span class="hljs-attr">"boundingVolume"</span>: &#123;</span><br><span class="line">      <span class="hljs-attr">"region"</span>: [</span><br><span class="line">        <span class="hljs-number">-0.0005682966577418737</span>,</span><br><span class="line">        <span class="hljs-number">0.8987233516605286</span>,</span><br><span class="line">        <span class="hljs-number">0.00011646582098558159</span>,</span><br><span class="line">        <span class="hljs-number">0.8990603398325034</span>,</span><br><span class="line">        <span class="hljs-number">0</span>,</span><br><span class="line">        <span class="hljs-number">241.6</span></span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="hljs-attr">"geometricError"</span>: <span class="hljs-number">268.37878244706053</span>,</span><br><span class="line">    <span class="hljs-attr">"refine"</span>: <span class="hljs-string">"ADD"</span>,</span><br><span class="line">    <span class="hljs-attr">"content"</span>: &#123;</span><br><span class="line">      <span class="hljs-attr">"uri"</span>: <span class="hljs-string">"0/0/0.b3dm"</span>,</span><br><span class="line">      <span class="hljs-attr">"boundingVolume"</span>: &#123;</span><br><span class="line">        <span class="hljs-attr">"region"</span>: [</span><br><span class="line">          <span class="hljs-number">-0.0004001690908972599</span>,</span><br><span class="line">          <span class="hljs-number">0.8988700116775743</span>,</span><br><span class="line">          <span class="hljs-number">0.00010096729722787196</span>,</span><br><span class="line">          <span class="hljs-number">0.8989625664878067</span>,</span><br><span class="line">          <span class="hljs-number">0</span>,</span><br><span class="line">          <span class="hljs-number">241.6</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="hljs-attr">"children"</span>: []</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面代码中 <code>root</code> 下面的内容，就是一个 <code>Tile</code>，即一个瓦片</p>
<h2 id="瓦片（Tiles）"><a href="#瓦片（Tiles）" class="headerlink" title="瓦片（Tiles）"></a>瓦片（Tiles）</h2><p>瓦片包含用于确定是否渲染瓦片的元数据、对渲染内容的引用以及任何子瓦片的数组，切片实际上也是一个 <code>JSON</code> 对象，它由以下属性组成</p>
<p><img src="https://gitee.com/heptaluan/backups/raw/master/cdn/gis/09-10.png" alt></p>
<ul>
<li><code>boundingVolumes</code>（边界范围框）</li>
</ul>
<p>定义了瓦片的最小边界范围，用于确定在运行时渲染哪个瓦片，有 <code>region</code>、<code>box</code>、<code>sphere</code> 三种形式</p>
<ul>
<li><code>geometricError</code>（几何误差）</li>
</ul>
<p>是一个非负数，以米为单位定义了不同瓦片层级的几何误差，通过几何误差来计算以像素为单位的屏幕误差（<code>SSE</code>），从而确定不同缩放级别下应该调用哪个层级的瓦片，简单来说 <code>Tile</code> 的几何误差是用来确定瓦片切换层级的，即控制 <code>LOD</code> 的</p>
<ul>
<li><code>refine</code>（细化方式）</li>
</ul>
<p>确定瓦片从低级别（<code>LOD</code>）切换为高级别（<code>LOD</code>）的呈现过程，简单来说就是瓦片是如何切换的，其中包括替换（<code>REPLACE</code>）和添加（<code>ADD</code>）两种方式，替换就是直接把父级的瓦片替换掉，添加则是在父级瓦片的基础增加细节部分，下图说明了具体的切换方式</p>
<p><img src="https://gitee.com/heptaluan/backups/raw/master/cdn/gis/09-11.png" alt></p>
<p><img src="https://gitee.com/heptaluan/backups/raw/master/cdn/gis/09-12.png" alt></p>
<p>理论上来说，<code>ADD</code> 方式是一种非常好的方式，是一种增量的 <code>LOD</code> 策略，能够减少数据的传输，这里强调一下，<code>refine</code> 属性在根节点的 <code>Tile</code> 中是必须定义的，子节点中是可选的，如果子节点没有定义，则继承父节点的该属性</p>
<ul>
<li><code>content</code>（内容）</li>
</ul>
<p><code>content</code> 属性指定了瓦片实际渲染的内容，<code>content.uri</code> 属性可以是一个指定二进制块（<code>b3dm</code>、<code>i3dm</code>、<code>pnts</code>、<code>cmpt</code>）的位置，也可以是指向另一个外部的 <code>tileset.json</code></p>
<p><code>content.boundingVolume</code> 属性定义了类似 <code>Tile</code> 属性 <code>boundingVolume</code> 的边界范围框，但是 <code>content.boundingVolume</code> 是一个紧密贴合的边界范围框，仅包含切片的内容，该属性可以用来做视锥体裁剪，只渲染视图范围内的内容，如果该属性没定义，系统也会自动计算</p>
<p>下图是关于 <code>Tile.boundingVolumes</code> 和 <code>content.boundingVolumes</code> 的比较，其中红色是 <code>Tile的boundingVolumes</code>，包围了 <code>Tileset</code> 的整个区域，而蓝色则是 <code>content的boundingVolumes</code>，仅包围切片中的渲染模型</p>
<p><img src="https://gitee.com/heptaluan/backups/raw/master/cdn/gis/09-13.png" alt></p>
<ul>
<li><code>children</code>（孩子节点）</li>
</ul>
<p>这个很容易理解，因为 <code>3D Tiles</code> 是分级别的，所以每个 <code>Tile</code> 还会有子 <code>Tile</code>、子子 <code>Tile</code> 等，分的越多，层级划分的越精细，和下面将要介绍到的 <code>Tileset</code> 瓦片集的 <code>root.children</code> 是同一个概念</p>
<ul>
<li><code>viewerRequestVolume</code>（可选，观察者请求体）</li>
</ul>
<p>定义了一个边界范围，使用与 <code>boundingVolumes</code> 相同的模式，只有当观察者处于其定义的范围内时，<code>Tile</code> 才显示，从而精细控制了个别瓦片的显示与否，如下图所示，只有相机拉近到某一个距离时，才显示屋内的球</p>
<p><img src="https://gitee.com/heptaluan/backups/raw/master/cdn/gis/09-14.webp" alt></p>
<ul>
<li><code>transform</code>（可选，位置变换矩阵）</li>
</ul>
<p>定义了一个 <code>4x4</code> 的变换矩阵，通过此属性 <code>Tile</code> 的坐标就可以是自己的局部坐标系内的坐标，最后通过自己的 <code>transform</code> 矩阵变换到父节点的坐标系中，它会对 <code>Tile</code> 的 <code>content</code>、<code>boudingVolume</code>、<code>viewerRequestVolume</code> 进行转换，详情可查看 <code>3D Tiles</code> 的 <a href="https://github.com/CesiumGS/3d-tiles/tree/main/specification" target="_blank" rel="noopener">规范文档</a></p>
<h2 id="瓦片集（Tileset）"><a href="#瓦片集（Tileset）" class="headerlink" title="瓦片集（Tileset）"></a>瓦片集（Tileset）</h2><p>通常，一个 <code>3D Tiles</code> 数据会使用一个主 <code>tileset JSON</code> 文件作为定义 <code>tileset</code> 的入口点，一般是以 <code>tileset.json</code> 文件命名（当然该文件名称是可以修改的），从上面示例代码可以看出，<code>tileset JSON</code> 有四个顶级属性 <code>asset</code>、<code>properties</code>、<code>geometricError</code> 和 <code>root</code></p>
<ul>
<li><code>asset</code></li>
</ul>
<p><code>asset</code> 包含整个 <code>tileSet</code> 的元数据对象，<code>asset.Version</code> 属性，用于定义 <code>3D Tiles</code> 版本，该版本指定 <code>tileset</code> 的 <code>JSON</code> 模式和基本的 <code>tileset</code> 格式，<code>tileVersion</code> 属性可选，用于定义特定的应用程序的 <code>tileset</code></p>
<ul>
<li><code>properties</code></li>
</ul>
<p><code>properties</code> 是一个对象，包含 <code>tileset</code> 中每个 <code>feature</code> 属性的对象，上面的例子是一个建筑物的 <code>3D Tiles</code>，因此每个瓦片都含有三维建筑物模型，每个三维建筑物模型都有高度属性，所以上面的例子中就定义了 <code>Height</code> 属性，属性中每个对象的名称与每个要素属性的名称相对应（如例子中的 <code>Height</code> 对应高度），并且包含该属性的最大值和最小值，这些值用于创建样式的颜色渐变非常有用</p>
<ul>
<li><code>geometricError</code></li>
</ul>
<p><code>geometricError</code> 是一个非负数，是通过这个几何误差的值来计算屏幕误差，确定 <code>Tileset</code> 是否渲染，如果在渲染的过程中，当前屏幕误差大于这里定义的屏幕误差，这个 <code>Tileset</code> 就不渲染，即根据屏幕误差来控制 <code>Tileset</code> 中的 <code>root</code> 是否渲染</p>
<ul>
<li><code>root</code></li>
</ul>
<p><code>root</code> 是一个 <code>JSON</code> 对象，定义了最根级的 <code>Tile</code>，它存储的是真正的 <code>Tile</code>，也就是说 <code>root</code> 的数据组织方式与 <code>Tile</code> 的数据组织方式是一样的</p>
<p>不过需要注意的是，<code>root.geometricError</code> 与 <code>tileset</code> 的顶级 <code>geometricError</code> 不同，<code>tileSet</code> 的 <code>geometricError</code> 是根据屏幕误差来控制 <code>tileSet</code> 中的 <code>root</code> 是否渲染，而 <code>root</code>（<code>tile</code>）中的 <code>geometricError</code> 则是用来控制 <code>tile</code> 中的 <code>children</code> 是否渲染</p>
<p><code>root.children</code> 是一个定义子 <code>Tile</code> 的对象数组，每个 <code>Tile</code> 还会有其 <code>children</code>，这样就形成了一种递归定义的树状结构，每个子 <code>Tile</code> 的内容完全由其父 <code>Tile</code> 的 <code>boundingVolume</code> 包围，并且通常是其 <code>geometricError</code> 小于其父 <code>Tile</code> 的 <code>geometricError</code>，因为越接近叶子节点，模型越精细，与原模型的几何误差就越小，对于叶子节点的 <code>Tile</code>，其数组的长度为零，或者是未定义 <code>children</code></p>
<p>当然，为了创建树状结构，<code>tile</code> 的 <code>content.uri</code> 也可以指向外部的 <code>tileset</code>（另一个 <code>tileset</code> 的 <code>JSON</code> 文件），这样做的一个好处就是，不同的 <code>tileset</code> 可以分开存储，例如我国的每个城市可单独存储成一个 <code>tileset</code>，然后再定义一个包含所有 <code>tileset</code> 的全局 <code>tileset</code></p>
<p><img src="https://gitee.com/heptaluan/backups/raw/master/cdn/gis/09-15.png" alt></p>
<h2 id="Cesium-加载-3D-Tiles"><a href="#Cesium-加载-3D-Tiles" class="headerlink" title="Cesium 加载 3D Tiles"></a>Cesium 加载 3D Tiles</h2><p><code>Cesium</code> 虽然也支持两种方式（<code>Entity</code> 和 <code>Primitive</code>）加载 <code>3D Tiles</code> 数据，但因为多数情况下 <code>3D Tiles</code> 数据都是成片区的数据，数据量比较大，所以为了保证性能，建议使用 <code>Primitive</code> 方式</p>
<h4 id="Cesium-中-3D-Tiles-相关类"><a href="#Cesium-中-3D-Tiles-相关类" class="headerlink" title="Cesium 中 3D Tiles 相关类"></a>Cesium 中 3D Tiles 相关类</h4><p>我们可以在 <code>Cesium API</code> 的 <a href="http://cesium.xin/cesium/cn/Documentation1.62/" target="_blank" rel="noopener">官方文档</a> 中可以找到如下与 <code>3Dtile</code> 相关的 API</p>
<p><img src="https://gitee.com/heptaluan/backups/raw/master/cdn/gis/09-16.png" alt></p>
<p>这里我们主要介绍几个平常会经常使用到的，也就是图中红框所标注的部分</p>
<ul>
<li><code>Cesium3Dtileset</code> - 用于流式传输大量的异构 <code>3D</code> 地理空间数据集</li>
<li><code>Cesium3DTileStyle</code> - 瓦片集样式</li>
<li><code>Cesium3DTile</code> - 数据集中的一个瓦片</li>
<li><code>Cesium3DTileContent</code> - 瓦片内容</li>
<li><code>Cesium3DTileFeature</code> - 瓦片集要素，用于访问 <code>Tile</code> 中批量表中的属性数据<ul>
<li>可通过 <code>scene.pick</code> 方法来获取一个 <code>BATCH</code>，即三维要素</li>
<li>可使用 <code>Cesium3DTileFeature.getPropertyNames()</code> 方法可以获取批量表中所有属性名</li>
<li>可使用 <code>Cesium3DTileFeature.getProperty(string Name)</code> 方法可以获取对应属性名的属性值</li>
</ul>
</li>
</ul>
<h4 id="加载-3D-Tiles"><a href="#加载-3D-Tiles" class="headerlink" title="加载 3D Tiles"></a>加载 3D Tiles</h4><figure class="highlight js hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">var</span> viewer = <span class="hljs-keyword">new</span> Cesium.Viewer(<span class="hljs-string">'cesiumContainer'</span>)</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// 添加3D Tiles</span></span><br><span class="line"><span class="hljs-keyword">var</span> tileset = viewer.scene.primitives.add(</span><br><span class="line">  <span class="hljs-keyword">new</span> Cesium.Cesium3DTileset(&#123;</span><br><span class="line">    url: <span class="hljs-string">'./data/Cesium3DTiles/Tilesets/Tileset/tileset.json'</span>,</span><br><span class="line">    <span class="hljs-comment">// maximumScreenSpaceError: 2,        // 最大的屏幕空间误差</span></span><br><span class="line">    <span class="hljs-comment">// maximumNumberOfLoadedTiles: 1000,  // 最大加载瓦片个数</span></span><br><span class="line">  &#125;)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h4 id="设置样式"><a href="#设置样式" class="headerlink" title="设置样式"></a>设置样式</h4><figure class="highlight js hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">var</span> properties = tileset.properties</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">if</span> (Cesium.defined(properties) &amp;&amp; Cesium.defined(properties.Height)) &#123;</span><br><span class="line">  tileset.style = <span class="hljs-keyword">new</span> Cesium.Cesium3DTileStyle(&#123;</span><br><span class="line">    color: &#123;</span><br><span class="line">      conditions: [</span><br><span class="line">        [<span class="hljs-string">'$&#123;Height&#125; &gt;= 83'</span>, <span class="hljs-string">"color('purple', 0.5)"</span>],</span><br><span class="line">        [<span class="hljs-string">'$&#123;Height&#125; &gt;= 80'</span>, <span class="hljs-string">"color('red')"</span>],</span><br><span class="line">        [<span class="hljs-string">'$&#123;Height&#125; &gt;= 70'</span>, <span class="hljs-string">"color('orange')"</span>],</span><br><span class="line">        [<span class="hljs-string">'$&#123;Height&#125; &gt;= 12'</span>, <span class="hljs-string">"color('yellow')"</span>],</span><br><span class="line">        [<span class="hljs-string">'$&#123;Height&#125; &gt;= 7'</span>, <span class="hljs-string">"color('lime')"</span>],</span><br><span class="line">        [<span class="hljs-string">'$&#123;Height&#125; &gt;= 1'</span>, <span class="hljs-string">"color('cyan')"</span>],</span><br><span class="line">        [<span class="hljs-string">'true'</span>, <span class="hljs-string">"color('blue')"</span>],</span><br><span class="line">      ],</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="位置调整"><a href="#位置调整" class="headerlink" title="位置调整"></a>位置调整</h4><figure class="highlight js hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">var</span> cartographic = Cesium.Cartographic.fromCartesian(tileset.boundingSphere.center)</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">var</span> surface = Cesium.Cartesian3.fromRadians(cartographic.longitude, cartographic.latitude, <span class="hljs-number">0.0</span>)</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">var</span> offset = Cesium.Cartesian3.fromRadians(cartographic.longitude, cartographic.latitude, height)</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">var</span> translation = Cesium.Cartesian3.subtract(offset, surface, <span class="hljs-keyword">new</span> Cesium.Cartesian3())</span><br><span class="line"></span><br><span class="line">tileset.modelMatrix = Cesium.Matrix4.fromTranslation(translation)</span><br></pre></td></tr></table></figure>

<h4 id="拾取要素"><a href="#拾取要素" class="headerlink" title="拾取要素"></a>拾取要素</h4><figure class="highlight js hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">var</span> handler = <span class="hljs-keyword">new</span> Cesium.ScreenSpaceEventHandler(viewer.canvas)</span><br><span class="line"></span><br><span class="line">handler.setInputAction(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">movement</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">var</span> feature = viewer.scene.pick(movement.position)</span><br><span class="line">  <span class="hljs-keyword">if</span> (Cesium.defined(feature) &amp;&amp; feature <span class="hljs-keyword">instanceof</span> Cesium.Cesium3DTileFeature) &#123;</span><br><span class="line">    <span class="hljs-keyword">var</span> propertyNames = feature.getPropertyNames()</span><br><span class="line">    <span class="hljs-keyword">var</span> length = propertyNames.length</span><br><span class="line">    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; length; ++i) &#123;</span><br><span class="line">      <span class="hljs-keyword">var</span> propertyName = propertyNames[i]</span><br><span class="line">      <span class="hljs-built_in">console</span>.log(propertyName + <span class="hljs-string">': '</span> + feature.getProperty(propertyName))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, Cesium.ScreenSpaceEventType.LEFT_CLICK)</span><br></pre></td></tr></table></figure>

<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>至此，我们介绍了 <code>Cesium</code> 是如何加载各种数据的，从基础的影像数据、地形图数据，到矢量数据、空间可视化实体数据，以及三维方面的模型数据和瓦片数据，并简单介绍了各种类型数据的基本概念和特点</p>
<p>可以说，到目前为止，一个三维系统所需要展示的各种数据基本上已经完成了，剩下的就是如何对数据进行操作了，比如符号渲染、单击获取属性、控制显隐以及其他与实际业务的结合等功能，而这部分内容我们也会在接下来的章节中逐一来进行介绍</p>

        </div>
        
        <div class="level is-size-7 is-uppercase">
            <div class="level-start">
                <div class="level-item">
                    <span class="is-size-6 has-text-grey has-mr-7">#</span>
                    <a class="has-link-grey -link" href="/tags/GIS/">GIS</a>
                </div>
            </div>
        </div>
        
        
        
    </div>
</div>





<div class="card card-transparent">
    <div class="level post-navigation is-flex-wrap is-mobile">
        
        <div class="level-start">
            <a class="level level-item has-link-grey  article-nav-prev" href="/2021/08/08/GIS/10/">
                <i class="level-item fa fa-chevron-left"></i>
                <span class="level-item">Cesium 中的事件与量测工具</span>
            </a>
        </div>
        
        
        <div class="level-end">
            <a class="level level-item has-link-grey  article-nav-next" href="/2021/08/01/GIS/08/">
                <span class="level-item">空间数据可视化</span>
                <i class="level-item fa fa-chevron-right"></i>
            </a>
        </div>
        
    </div>
</div>



<div class="card">
    <div class="card-content">
        <h3 class="title is-5 has-text-weight-normal">评论</h3>
        
<div id="comment-container"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.4.1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1.4.1/dist/gitalk.min.js"></script>
<script>
    var gitalk = new Gitalk({
        clientID: '584b59de0d23cd48fbdd',
        clientSecret: '5554c9aab0a640015867806f438bd2e10f297e5a',
        id: '18893391e13a8e15590ba4147ff1b658',
        repo: 'gitalk',
        owner: 'heptaluan',
        admin: "heptaluan"
    })
    gitalk.render('comment-container')
</script>

    </div>
</div>
</div>
                




<div class="column is-4-tablet is-4-desktop is-3-widescreen  has-order-1 column-left ">
    
        
<div class="card widget">
    <div class="card-content">
        <nav class="level">
            <div class="level-item has-text-centered">
                <div>
                    
                        <figure class="avatar image is-128x128 has-mb-6">
                            <img class="is-rounded" src="https://gitee.com/heptaluan/backups/raw/master/cdn/avatar.png" alt="heptaluan">
                        </figure>
                    
                    
                    <p class="is-size-4 is-block">
                        heptaluan
                    </p>
                    
                    
                    <p class="is-size-6 is-block">
                        Torches@Aimer
                    </p>
                    
                    
                    <p class="is-size-6 is-flex is-flex-center has-text-grey">
                        <i class="fas fa-map-marker-alt has-mr-7"></i>
                        <span>WuHan China</span>
                    </p>
                    
                </div>
            </div>
        </nav>
        <!-- <nav class="level is-mobile">
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        文章
                    </p>
                    <p class="title has-text-weight-normal">
                        164
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        分类
                    </p>
                    <p class="title has-text-weight-normal">
                        9
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        标签
                    </p>
                    <p class="title has-text-weight-normal">
                        9
                    </p>
                </div>
            </div>
        </nav> -->
        <!-- <div class="level">
            <a class="level-item button is-link is-rounded" href="https://github.com/ppoffice" target="_blank">
                关注我</a>
        </div> -->
        
        
    </div>
</div>
    
        
<div class="card widget" id="toc">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                目录
            </h3>
            <ul class="menu-list"><li>
        <a class="is-flex" href="#什么是-glTF">
        <span class="has-mr-6">1</span>
        <span>什么是 glTF</span>
        </a></li><li>
        <a class="is-flex" href="#glTF-场景描述结构">
        <span class="has-mr-6">2</span>
        <span>glTF 场景描述结构</span>
        </a></li><li>
        <a class="is-flex" href="#glTF-的-JSON-结构">
        <span class="has-mr-6">3</span>
        <span>glTF 的 JSON 结构</span>
        </a></li><li>
        <a class="is-flex" href="#Cesium-加载-glTF-模型">
        <span class="has-mr-6">4</span>
        <span>Cesium 加载 glTF 模型</span>
        </a></li><li>
        <a class="is-flex" href="#3D-Tiles">
        <span class="has-mr-6">5</span>
        <span>3D Tiles</span>
        </a></li><li>
        <a class="is-flex" href="#瓦片（Tiles）">
        <span class="has-mr-6">6</span>
        <span>瓦片（Tiles）</span>
        </a></li><li>
        <a class="is-flex" href="#瓦片集（Tileset）">
        <span class="has-mr-6">7</span>
        <span>瓦片集（Tileset）</span>
        </a></li><li>
        <a class="is-flex" href="#Cesium-加载-3D-Tiles">
        <span class="has-mr-6">8</span>
        <span>Cesium 加载 3D Tiles</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#Cesium-中-3D-Tiles-相关类">
        <span class="has-mr-6">8.1</span>
        <span>Cesium 中 3D Tiles 相关类</span>
        </a></li><li>
        <a class="is-flex" href="#加载-3D-Tiles">
        <span class="has-mr-6">8.2</span>
        <span>加载 3D Tiles</span>
        </a></li><li>
        <a class="is-flex" href="#设置样式">
        <span class="has-mr-6">8.3</span>
        <span>设置样式</span>
        </a></li><li>
        <a class="is-flex" href="#位置调整">
        <span class="has-mr-6">8.4</span>
        <span>位置调整</span>
        </a></li><li>
        <a class="is-flex" href="#拾取要素">
        <span class="has-mr-6">8.5</span>
        <span>拾取要素</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#小结">
        <span class="has-mr-6">9</span>
        <span>小结</span>
        </a></li></ul>
        </div>
    </div>
</div>

    
        


    
        
<div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                分类
            </h3>
            <ul class="menu-list">
            <li>
        <a class="level is-marginless" href="/categories/Angular/">
            <span class="level-start">
                <span class="level-item">Angular</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">15</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/CSS/">
            <span class="level-start">
                <span class="level-item">CSS</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">14</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Essay/">
            <span class="level-start">
                <span class="level-item">Essay</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">29</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/GIS/">
            <span class="level-start">
                <span class="level-item">GIS</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">11</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/HTTP/">
            <span class="level-start">
                <span class="level-item">HTTP</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">11</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/JavaScript/">
            <span class="level-start">
                <span class="level-item">JavaScript</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">45</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Node-js/">
            <span class="level-start">
                <span class="level-item">Node.js</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">14</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/React/">
            <span class="level-start">
                <span class="level-item">React</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">20</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Vue/">
            <span class="level-start">
                <span class="level-item">Vue</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">5</span>
            </span>
        </a></li>
            </ul>
        </div>
    </div>
</div>
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            标签云
        </h3>
        <a href="/tags/Angular/" style="font-size: 15px;">Angular</a> <a href="/tags/CSS/" style="font-size: 13.33px;">CSS</a> <a href="/tags/Essay/" style="font-size: 18.33px;">Essay</a> <a href="/tags/GIS/" style="font-size: 11.67px;">GIS</a> <a href="/tags/HTTP/" style="font-size: 11.67px;">HTTP</a> <a href="/tags/JavaScript/" style="font-size: 20px;">JavaScript</a> <a href="/tags/Node-js/" style="font-size: 13.33px;">Node.js</a> <a href="/tags/React/" style="font-size: 16.67px;">React</a> <a href="/tags/Vue/" style="font-size: 10px;">Vue</a>
    </div>
</div>

    
    
        <div class="column-right-shadow  ">
        
            
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            <a href="/tips" class="tips">
                最新文章
            </a>
        </h3>
        
        <article class="media">
            
            <a href="/2021/08/22/GIS/11/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="https://gitee.com/heptaluan/backups/raw/master/cdn/cover/11.webp" alt="Cesium 中一些常用方法汇总">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2021-08-21T16:00:00.000Z">2021-08-22</time></div>
                    <a href="/2021/08/22/GIS/11/" class="has-link-black-ter is-size-6">Cesium 中一些常用方法汇总</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/GIS/">GIS</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2021/08/08/GIS/10/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="https://gitee.com/heptaluan/backups/raw/master/cdn/cover/10.webp" alt="Cesium 中的事件与量测工具">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2021-08-07T16:00:00.000Z">2021-08-08</time></div>
                    <a href="/2021/08/08/GIS/10/" class="has-link-black-ter is-size-6">Cesium 中的事件与量测工具</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/GIS/">GIS</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2021/08/07/GIS/09/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="https://gitee.com/heptaluan/backups/raw/master/cdn/cover/09.webp" alt="glTF 与 3D Tiles">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2021-08-06T16:00:00.000Z">2021-08-07</time></div>
                    <a href="/2021/08/07/GIS/09/" class="has-link-black-ter is-size-6">glTF 与 3D Tiles</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/GIS/">GIS</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2021/08/01/GIS/08/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="https://gitee.com/heptaluan/backups/raw/master/cdn/cover/08.webp" alt="空间数据可视化">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2021-07-31T16:00:00.000Z">2021-08-01</time></div>
                    <a href="/2021/08/01/GIS/08/" class="has-link-black-ter is-size-6">空间数据可视化</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/GIS/">GIS</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2021/07/30/GIS/07/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="https://gitee.com/heptaluan/backups/raw/master/cdn/cover/07.webp" alt="坐标系及坐标变换">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2021-07-29T16:00:00.000Z">2021-07-30</time></div>
                    <a href="/2021/07/30/GIS/07/" class="has-link-black-ter is-size-6">坐标系及坐标变换</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/GIS/">GIS</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            归档
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2021/08/">
                <span class="level-start">
                    <span class="level-item">八月 2021</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2021/07/">
                <span class="level-start">
                    <span class="level-item">七月 2021</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2021/06/">
                <span class="level-start">
                    <span class="level-item">六月 2021</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2021/04/">
                <span class="level-start">
                    <span class="level-item">四月 2021</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2021/03/">
                <span class="level-start">
                    <span class="level-item">三月 2021</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2021/01/">
                <span class="level-start">
                    <span class="level-item">一月 2021</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/10/">
                <span class="level-start">
                    <span class="level-item">十月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/09/">
                <span class="level-start">
                    <span class="level-item">九月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/08/">
                <span class="level-start">
                    <span class="level-item">八月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/07/">
                <span class="level-start">
                    <span class="level-item">七月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/06/">
                <span class="level-start">
                    <span class="level-item">六月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/05/">
                <span class="level-start">
                    <span class="level-item">五月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/04/">
                <span class="level-start">
                    <span class="level-item">四月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/03/">
                <span class="level-start">
                    <span class="level-item">三月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/02/">
                <span class="level-start">
                    <span class="level-item">二月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/01/">
                <span class="level-start">
                    <span class="level-item">一月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/10/">
                <span class="level-start">
                    <span class="level-item">十月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/09/">
                <span class="level-start">
                    <span class="level-item">九月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/08/">
                <span class="level-start">
                    <span class="level-item">八月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/07/">
                <span class="level-start">
                    <span class="level-item">七月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/06/">
                <span class="level-start">
                    <span class="level-item">六月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/05/">
                <span class="level-start">
                    <span class="level-item">五月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/04/">
                <span class="level-start">
                    <span class="level-item">四月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/03/">
                <span class="level-start">
                    <span class="level-item">三月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/02/">
                <span class="level-start">
                    <span class="level-item">二月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/01/">
                <span class="level-start">
                    <span class="level-item">一月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/10/">
                <span class="level-start">
                    <span class="level-item">十月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/09/">
                <span class="level-start">
                    <span class="level-item">九月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/08/">
                <span class="level-start">
                    <span class="level-item">八月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/07/">
                <span class="level-start">
                    <span class="level-item">七月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/06/">
                <span class="level-start">
                    <span class="level-item">六月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/05/">
                <span class="level-start">
                    <span class="level-item">五月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/04/">
                <span class="level-start">
                    <span class="level-item">四月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/03/">
                <span class="level-start">
                    <span class="level-item">三月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/02/">
                <span class="level-start">
                    <span class="level-item">二月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/01/">
                <span class="level-start">
                    <span class="level-item">一月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/10/">
                <span class="level-start">
                    <span class="level-item">十月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/09/">
                <span class="level-start">
                    <span class="level-item">九月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/08/">
                <span class="level-start">
                    <span class="level-item">八月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/07/">
                <span class="level-start">
                    <span class="level-item">七月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/06/">
                <span class="level-start">
                    <span class="level-item">六月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/05/">
                <span class="level-start">
                    <span class="level-item">五月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/04/">
                <span class="level-start">
                    <span class="level-item">四月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/03/">
                <span class="level-start">
                    <span class="level-item">三月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/01/">
                <span class="level-start">
                    <span class="level-item">一月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                标签
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Angular/">
                        <span class="tag">Angular</span>
                        <span class="tag is-grey">15</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/CSS/">
                        <span class="tag">CSS</span>
                        <span class="tag is-grey">14</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Essay/">
                        <span class="tag">Essay</span>
                        <span class="tag is-grey">29</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/GIS/">
                        <span class="tag">GIS</span>
                        <span class="tag is-grey">11</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/HTTP/">
                        <span class="tag">HTTP</span>
                        <span class="tag is-grey">11</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/JavaScript/">
                        <span class="tag">JavaScript</span>
                        <span class="tag is-grey">45</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Node-js/">
                        <span class="tag">Node.js</span>
                        <span class="tag is-grey">14</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/React/">
                        <span class="tag">React</span>
                        <span class="tag is-grey">20</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Vue/">
                        <span class="tag">Vue</span>
                        <span class="tag is-grey">5</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
        
        </div>
    
</div>

                
            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <!-- <a class="footer-logo is-block has-mb-6" href="/">
                
                    <img src="/images/logo.svg" alt="glTF 与 3D Tiles" height="28">
                
                </a> -->
                <p class="is-size-7">
                &copy; 2016 - 2021
                Made with ✿  heptaluan&nbsp;
                
                </p>
            </div>
            <!-- <div class="level-end">
            
            </div> -->
        </div>
    </div>
</footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("zh-CN");</script>


    
    
    
    <script src="/js/animation.js"></script>
    

    
    
    
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
    <script src="/js/gallery.js" defer></script>
    

    
    

<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>


    
    
<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>

    
    

<a id="back-to-top" title="回到顶端" href="javascript:;">
    <i class="fa fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>


    
    

    
    
    
    

    
    
    
    
    
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>
    <script src="/js/clipboard.js" defer></script>
    

    
    
    


<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="想要查找什么...">
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: '文章',
                PAGES: '页面',
                CATEGORIES: '分类',
                TAGS: '标签',
                UNTITLED: '(无标题)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
</body>
</html>