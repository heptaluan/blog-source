<!DOCTYPE html>
<html lang="zh">
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
<title>重温 TypeScript - heptaluan&#39;s blog</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



    <meta name="description" content="虽然之前一直项目当中使用 Angular 来进行业务开发，但是总感觉对于 TypeScript 这一块的内容还是只停留在比较浅的使用层面，而最近又开始涉及到 React 相关内容，发现 React + TypeScript 算是业界标配了，所以就打算抽些时间深入的学习一下 TypeScript，在这里记录记录，也算是查漏补缺吧">
<meta name="keywords" content="JavaScript">
<meta property="og:type" content="article">
<meta property="og:title" content="重温 TypeScript">
<meta property="og:url" content="http://yoursite.com/2020/12/26/JavaScript/56/index.html">
<meta property="og:site_name" content="heptaluan&#39;s blog">
<meta property="og:description" content="虽然之前一直项目当中使用 Angular 来进行业务开发，但是总感觉对于 TypeScript 这一块的内容还是只停留在比较浅的使用层面，而最近又开始涉及到 React 相关内容，发现 React + TypeScript 算是业界标配了，所以就打算抽些时间深入的学习一下 TypeScript，在这里记录记录，也算是查漏补缺吧">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://gitee.com/heptaluan/backups/raw/master/cdn/cover/56.webp">
<meta property="og:updated_time" content="2021-03-09T08:29:33.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="重温 TypeScript">
<meta name="twitter:description" content="虽然之前一直项目当中使用 Angular 来进行业务开发，但是总感觉对于 TypeScript 这一块的内容还是只停留在比较浅的使用层面，而最近又开始涉及到 React 相关内容，发现 React + TypeScript 算是业界标配了，所以就打算抽些时间深入的学习一下 TypeScript，在这里记录记录，也算是查漏补缺吧">
<meta name="twitter:image" content="https://gitee.com/heptaluan/backups/raw/master/cdn/cover/56.webp">







<link rel="icon" href="https://gitee.com/heptaluan/backups/raw/master/cdn/favicon.ico">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.5.0/styles/atom-one-light.css">


    
    
    
    <style>body>.footer,body>.navbar,body>.section{opacity:0}</style>
    

    
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">
    

    
    

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">


    
    
    
    

<link rel="stylesheet" href="/css/back-to-top.css">


    
    

    
    
    
    

    
    
<link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>

    
    
    

    
    
    


<link rel="stylesheet" href="/css/style.css">
</head>
<body class="is-2-column">
    <!-- fork me on github -->
<a title="Fork me on GitHub" id="forkMe" style="position: fixed;top: 0;right: 0;z-index: 31" href="https://github.com/heptaluan" target="_blank">
    <svg style="color: #fff;fill: #a0a1a7;height: 80px;width: 80px;" viewbox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg>
</a>

<nav class="navbar navbar-main">
    <div class="container">
        <!-- <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/logo.svg" alt="重温 TypeScript" height="28">
            
            </a>
        </div> -->

        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item" href="/">Home</a>
                
                <a class="navbar-item" href="/archives">Archives</a>
                
                <a class="navbar-item" href="/categories">Categories</a>
                
                <a class="navbar-item" href="https://heptaluan.github.io/demos/">Demos</a>
                
            </div>
            
            <div class="navbar-end">
                
                
                <a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;">
                    <i class="fas fa-list-ul"></i>
                </a>
                
                
                <a class="navbar-item search" title="搜索" href="javascript:;">
                    <i class="fa fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-8-tablet is-8-desktop is-9-widescreen has-order-2 column-main"><div class="card">
    
    <div class="card-image">
        <span class="image is-7by1">
            <img class="thumbnail" src="https://gitee.com/heptaluan/backups/raw/master/cdn/cover/56.webp" alt="重温 TypeScript">
        </span>
    </div>
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <div class="level-item has-text-grey">2020-12-26</div>
                <!-- <time class="level-item has-text-grey" datetime="2020-12-25T16:00:00.000Z">2020-12-26</time> -->
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/JavaScript/">JavaScript</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    1 小时 读完 (大约 11443 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                重温 TypeScript
            
        </h1>
        <div class="content">
            <p>虽然之前一直项目当中使用 <code>Angular</code> 来进行业务开发，但是总感觉对于 <code>TypeScript</code> 这一块的内容还是只停留在比较浅的使用层面，而最近又开始涉及到 <code>React</code> 相关内容，发现 <code>React + TypeScript</code> 算是业界标配了，所以就打算抽些时间深入的学习一下 <code>TypeScript</code>，在这里记录记录，也算是查漏补缺吧</p>
<a id="more"></a>

<p>针对于相关内容会分为两篇文章来进行梳理，本文当中主要梳理一些基础内容，也算是回顾一下 <code>TypeScript</code> 的基本用法，而在下一章 <a href="https://heptaluan.github.io/2021/01/01/JavaScript/57/" target="_blank" rel="noopener">深入 TypeScript</a> 当中我们则会来看一些 <code>TypeScript</code> 当中的进阶内容</p>
<p>本文当中涉及到的内容可能比较零散，因为便于自己回顾，一些比较熟络的知识点可能会一笔带过，对于想了解整体流程的同学可以参考 <a href="https://www.tslang.cn/docs/home.html" target="_blank" rel="noopener">官方文档</a> 来了解更多</p>
<h2 id="什么是-TypeScript"><a href="#什么是-TypeScript" class="headerlink" title="什么是 TypeScript"></a>什么是 TypeScript</h2><p><code>TypeScript</code> 是 <code>JavaScript</code> 的一个超集，主要提供了『类型系统』和对 <code>ES6</code> 的支持，它与 <code>JavaScript</code> 的基本区别有以下这些</p>
<table>
<thead>
<tr>
<th>TypeScript</th>
<th>JavaScript</th>
</tr>
</thead>
<tbody><tr>
<td><code>JavaScript</code> 的超集用于解决大型项目的代码复杂性</td>
<td>一种脚本语言，用于创建动态网页</td>
</tr>
<tr>
<td>可以在编译期间发现并纠正错误</td>
<td>作为一种解释型语言，只能在运行时发现错误</td>
</tr>
<tr>
<td>强类型，支持静态和动态类型</td>
<td>弱类型，没有静态类型选项</td>
</tr>
<tr>
<td>最终被编译成 <code>JavaScript</code> 代码，使浏览器可以理解</td>
<td>可以直接在浏览器中使用</td>
</tr>
<tr>
<td>支持模块、泛型和接口</td>
<td>不支持模块，泛型或接口</td>
</tr>
<tr>
<td>社区的支持仍在增长，而且还不是很大</td>
<td>大量的社区支持以及大量文档和解决问题的支持</td>
</tr>
</tbody></table>
<p>而函数之间的区别则有以下这些</p>
<table>
<thead>
<tr>
<th>TypeScript</th>
<th>JavaScript</th>
</tr>
</thead>
<tbody><tr>
<td>含有类型</td>
<td>无类型</td>
</tr>
<tr>
<td>箭头函数</td>
<td>箭头函数（<code>ES2015</code>）</td>
</tr>
<tr>
<td>函数类型</td>
<td>无函数类型</td>
</tr>
<tr>
<td>必填和可选参数</td>
<td>所有参数都是可选的</td>
</tr>
<tr>
<td>默认参数</td>
<td>默认参数</td>
</tr>
<tr>
<td>剩余参数</td>
<td>剩余参数</td>
</tr>
<tr>
<td>函数重载</td>
<td>无函数重载</td>
</tr>
</tbody></table>
<p>当然任何事物都是有两面性的，通常来说 <code>TypeScript</code> 的一些弊端在于</p>
<ul>
<li>有一定的学习成本，需要理解接口（<code>Interfaces</code>）、泛型（<code>Generics</code>）、类（<code>Classes</code>）、枚举类型（<code>Enums</code>）等概念</li>
<li>短期可能会增加一些开发成本，毕竟要多写一些类型的定义，不过对于一个需要长期维护的项目，<code>TypeScript</code> 能够减少其维护成本</li>
<li>集成到构建流程需要一些工作量</li>
<li>可能和一些库结合的不是很完美</li>
</ul>
<p>另外，除了 <code>TypeScript</code> 还有一个 <a href="https://flow.org/" target="_blank" rel="noopener">Flow</a> 可供选择，<code>Flow</code> 是 <code>Facebook</code> 出品的 <code>JavaScript</code> 静态类型检查工具，它与 <code>Typescript</code> 不同的是，它可以部分引入，不需要完全重构整个项目，所以对于一个已有一定规模的项目来说，迁移成本更小，也更加可行，所以还是根据团队和项目的情况判断是否需要使用 <code>TypeScript</code></p>
<p>另外我们再来简单的了解一下 <code>TypeScript</code> 的工作流程，这有助于我们更好的理解 <code>TypeScript</code>，其实简单来说，典型的 <code>TypeScript</code> 工作流程是下面这样的</p>
<p><img src="https://gitee.com/heptaluan/backups/raw/master/cdn/js/56-01.png" alt></p>
<p>在上图当中包含了三个 <code>TypeScript</code> 文件，而这些文件将被 <code>TypeScript</code> 编译器，根据配置的编译选项编译成对应三个不同的 <code>.js</code> 文件，对于大多数使用 <code>TypeScript</code> 开发的 <code>Web</code> 项目来说，我们还会对编译生成的文件进行打包处理，然后在进行部署</p>
<p>下面我们就来看看 <code>TypeScript</code> 当中的常用类型和一些基本概念，主要包括</p>
<ul>
<li>基础类型</li>
<li>内置对象</li>
<li>联合类型</li>
<li>对象的类型（接口）</li>
<li>数组的类型</li>
<li>函数的类型</li>
</ul>
<blockquote>
<p>另外需要注意一点，如果本文当中未特殊指明示例是错误示范的话，则默认是编译通过</p>
</blockquote>
<h2 id="TypeScript-基础类型"><a href="#TypeScript-基础类型" class="headerlink" title="TypeScript 基础类型"></a>TypeScript 基础类型</h2><p>我们先来看看 <code>TypeScript</code> 当中的一些基础类型，也是我们在平常经常见到的一些类型</p>
<h4 id="布尔值"><a href="#布尔值" class="headerlink" title="布尔值"></a>布尔值</h4><p>在 <code>TypeScript</code> 中，使用 <code>boolean</code> 定义布尔值类型（注意区分大小写）</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">let</span> x: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span></span><br></pre></td></tr></table></figure>

<p>但是需要注意的是，如果使用的是构造函数 <code>Boolean</code> 创造的对象则不是布尔值</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// ❌</span></span><br><span class="line"><span class="hljs-keyword">let</span> x: <span class="hljs-built_in">boolean</span> = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Boolean</span>(<span class="hljs-literal">true</span>)</span><br></pre></td></tr></table></figure>

<p>事实上 <code>new Boolean()</code> 返回的是一个 <code>Boolean</code> 对象</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// ✅</span></span><br><span class="line"><span class="hljs-keyword">let</span> x: <span class="hljs-built_in">Boolean</span> = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Boolean</span>(<span class="hljs-literal">true</span>)</span><br></pre></td></tr></table></figure>

<p>在 <code>TypeScript</code> 中，<code>boolean</code> 是 <code>JavaScript</code> 中的基本类型，而 <code>Boolean</code> 是 <code>JavaScript</code> 中的构造函数，其他基本类型（除了 <code>null</code> 和 <code>undefined</code>）也是一样的</p>
<h4 id="数值"><a href="#数值" class="headerlink" title="数值"></a>数值</h4><p>使用 <code>number</code> 可以来定义数值类型，并且二进制与八进制等均可以使用</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">let</span> x: <span class="hljs-built_in">number</span> = <span class="hljs-number">6</span></span><br><span class="line"><span class="hljs-keyword">let</span> x: <span class="hljs-built_in">number</span> = <span class="hljs-number">0xf00d</span></span><br><span class="line"><span class="hljs-keyword">let</span> x: <span class="hljs-built_in">number</span> = <span class="hljs-number">0b1010</span>   <span class="hljs-comment">// ES6 中的二进制表示法</span></span><br><span class="line"><span class="hljs-keyword">let</span> x: <span class="hljs-built_in">number</span> = <span class="hljs-number">0o744</span>    <span class="hljs-comment">// ES6 中的八进制表示法</span></span><br><span class="line"><span class="hljs-keyword">let</span> x: <span class="hljs-built_in">number</span> = <span class="hljs-literal">NaN</span></span><br><span class="line"><span class="hljs-keyword">let</span> x: <span class="hljs-built_in">number</span> = <span class="hljs-literal">Infinity</span></span><br></pre></td></tr></table></figure>

<h4 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h4><p>使用 <code>string</code> 来定义字符串类型</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">let</span> x: <span class="hljs-built_in">string</span> = <span class="hljs-string">'zhangsan'</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// 模板字符串</span></span><br><span class="line"><span class="hljs-keyword">let</span> y: <span class="hljs-built_in">string</span> = <span class="hljs-string">`hello <span class="hljs-subst">$&#123;x&#125;</span>`</span></span><br></pre></td></tr></table></figure>

<p>可以发现，对于 <code>ES6</code> 当中的模板字符串同样适用</p>
<h4 id="任意值"><a href="#任意值" class="headerlink" title="任意值"></a>任意值</h4><p>任意值（<code>Any</code>）用来表示允许赋值为任意类型，与原始数据类型进行比对的话，如果是一个普通类型，在赋值过程中改变类型是不被允许的</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// ❌</span></span><br><span class="line"><span class="hljs-keyword">let</span> x: <span class="hljs-built_in">string</span> = <span class="hljs-string">'zhangsan'</span></span><br><span class="line">x = <span class="hljs-number">7</span></span><br></pre></td></tr></table></figure>

<p>但如果是 <code>any</code> 类型，则允许被赋值为任意类型</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// ✅</span></span><br><span class="line"><span class="hljs-keyword">let</span> x: <span class="hljs-built_in">any</span> = <span class="hljs-string">'lisi'</span></span><br><span class="line">x = <span class="hljs-number">7</span></span><br></pre></td></tr></table></figure>

<p>同时，在任意值上访问任何属性都是允许的</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">let</span> x: <span class="hljs-built_in">any</span> = <span class="hljs-string">'zhangsan'</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-built_in">console</span>.log(x.name)</span><br><span class="line"><span class="hljs-built_in">console</span>.log(x.name.firstName)</span><br></pre></td></tr></table></figure>

<p>也允许调用任何方法</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">let</span> x: <span class="hljs-built_in">any</span> = <span class="hljs-string">'lisi'</span></span><br><span class="line"></span><br><span class="line">x.setName(<span class="hljs-string">'wangwu'</span>)</span><br><span class="line">x.setName(<span class="hljs-string">'zhaoliu'</span>).sayHello()</span><br><span class="line">x.name.setFirstName(<span class="hljs-string">'zhangsan'</span>)</span><br></pre></td></tr></table></figure>

<p>可以认为，『声明一个变量为任意值之后，对它的任何操作，返回的内容的类型都是任意值』，但是如果变量在声明的时候，未指定其类型，那么它会被识别为任意值类型，比如下面示例当中的 <code>x</code> 等价于 <code>x: any</code></p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">let</span> x</span><br><span class="line"></span><br><span class="line">x = <span class="hljs-string">'zhangsan'</span></span><br><span class="line">x = <span class="hljs-number">7</span></span><br><span class="line"></span><br><span class="line">x.setName(<span class="hljs-string">'lisi'</span>)</span><br></pre></td></tr></table></figure>

<p>虽然 any 使用起来很方便，但是可想而知，如果我们大量使用 <code>any</code> 类型，就无法使用 <code>TypeScript</code> 所提供的大量的保护机制，为了解决 <code>any</code> 带来的问题，<code>TypeScript 3.0</code> 引入了 <code>unknown</code> 类型</p>
<h4 id="Unknown"><a href="#Unknown" class="headerlink" title="Unknown"></a>Unknown</h4><p>就像所有类型都可以赋值给 <code>any</code>，所有类型也都可以赋值给 <code>unknown</code>，这使得 <code>unknown</code> 成为 <code>TypeScript</code> 类型系统的另一种顶级类型（另一种是 <code>any</code>），下面我们来看一下 <code>unknown</code> 类型的使用示例</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">let</span> value: unknown</span><br><span class="line"></span><br><span class="line">value = <span class="hljs-literal">true</span>             <span class="hljs-comment">// ✅</span></span><br><span class="line">value = <span class="hljs-number">42</span>               <span class="hljs-comment">// ✅</span></span><br><span class="line">value = <span class="hljs-string">'hello world'</span>    <span class="hljs-comment">// ✅</span></span><br><span class="line">value = []               <span class="hljs-comment">// ✅</span></span><br><span class="line">value = &#123;&#125;               <span class="hljs-comment">// ✅</span></span><br><span class="line">value = <span class="hljs-built_in">Math</span>.random      <span class="hljs-comment">// ✅</span></span><br><span class="line">value = <span class="hljs-literal">null</span>             <span class="hljs-comment">// ✅</span></span><br><span class="line">value = <span class="hljs-literal">undefined</span>        <span class="hljs-comment">// ✅</span></span><br><span class="line">value = <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>()  <span class="hljs-comment">// ✅</span></span><br><span class="line">value = Symbol(<span class="hljs-string">'type'</span>)   <span class="hljs-comment">// ✅</span></span><br></pre></td></tr></table></figure>

<p>可以发现，我们对 <code>value</code> 变量的所有赋值都被认为是类型正确的，下面我们再来看看将类型为 <code>unknown</code> 的值赋值给其他类型的变量时会发生什么</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">let</span> value: unknown</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">let</span> value1: unknown = value   <span class="hljs-comment">// ✅</span></span><br><span class="line"><span class="hljs-keyword">let</span> value2: <span class="hljs-built_in">any</span> = value       <span class="hljs-comment">// ✅</span></span><br><span class="line"><span class="hljs-keyword">let</span> value3: <span class="hljs-built_in">boolean</span> = value   <span class="hljs-comment">// ❌</span></span><br><span class="line"><span class="hljs-keyword">let</span> value4: <span class="hljs-built_in">number</span> = value    <span class="hljs-comment">// ❌</span></span><br><span class="line"><span class="hljs-keyword">let</span> value5: <span class="hljs-built_in">string</span> = value    <span class="hljs-comment">// ❌</span></span><br><span class="line"><span class="hljs-keyword">let</span> value6: object = value    <span class="hljs-comment">// ❌</span></span><br><span class="line"><span class="hljs-keyword">let</span> value7: <span class="hljs-built_in">any</span>[] = value     <span class="hljs-comment">// ❌</span></span><br><span class="line"><span class="hljs-keyword">let</span> value8: <span class="hljs-built_in">Function</span> = value  <span class="hljs-comment">// ❌</span></span><br></pre></td></tr></table></figure>

<p>通过上面的示例可以发现，<code>unknown</code> 类型只能被赋值给 <code>any</code> 类型和 <code>unknown</code> 类型本身，其实也能理解，那就是只有能够保存任意类型值的容器才能保存 <code>unknown</code> 类型的值，毕竟我们不知道变量 <code>value</code> 中存储了什么类型的值</p>
<p>我们下面再来看看对类型为 <code>unknown</code> 的值执行操作时会发生什么</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">let</span> value: unknown</span><br><span class="line"></span><br><span class="line">value.foo.bar <span class="hljs-comment">// ❌</span></span><br><span class="line">value.trim()  <span class="hljs-comment">// ❌</span></span><br><span class="line">value()       <span class="hljs-comment">// ❌</span></span><br><span class="line"><span class="hljs-keyword">new</span> value()   <span class="hljs-comment">// ❌</span></span><br><span class="line">value[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>]   <span class="hljs-comment">// ❌</span></span><br></pre></td></tr></table></figure>

<p>将 <code>value</code> 变量类型设置为 <code>unknown</code> 后，这些操作都不再被认为是类型正确的，通过将 <code>any</code> 类型改变为 <code>unknown</code> 类型，我们已将允许所有更改的默认设置，更改为禁止任何更改</p>
<h4 id="空值"><a href="#空值" class="headerlink" title="空值"></a>空值</h4><p>某种程度上来说，<code>void</code> 类型像是与 <code>any</code> 类型相反，它表示没有任何类型，当一个函数没有返回值时，你通常会见到其返回值类型是 <code>void</code></p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">alertName</span>(<span class="hljs-params"></span>): <span class="hljs-title">void</span> </span>&#123;</span><br><span class="line">  alert(<span class="hljs-string">'zhangsan'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>声明一个 <code>void</code> 类型的变量没有什么用，因为你只能将它赋值为 <code>undefined</code> 和 <code>null</code>，但是需要注意，在非严格模式下，变量的值可以为 <code>undefined</code> 或 <code>null</code>，而严格模式下，变量的值只能为  <code>undefined</code>，所以使用场景较多的还是针对于没有返回值的函数</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">let</span> x: <span class="hljs-built_in">void</span> = <span class="hljs-literal">undefined</span></span><br></pre></td></tr></table></figure>

<p>但是这里有一个需要注意的地方，即当定义的函数返回值为空值 <code>void</code> 的时候，虽然在该函数内部写 <code>return</code> 时编译会报错，但是依然可以编译成功</p>
<h4 id="Null-和-Undefined"><a href="#Null-和-Undefined" class="headerlink" title="Null 和 Undefined"></a>Null 和 Undefined</h4><p>在 <code>TypeScript</code> 中，可以使用 <code>null</code> 和 <code>undefined</code> 来定义这两个原始数据类型</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">let</span> u: <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span></span><br><span class="line"><span class="hljs-keyword">let</span> n: <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span></span><br></pre></td></tr></table></figure>

<p>与 <code>void</code> 的区别是，<code>undefined</code> 和 <code>null</code> 是所有类型的子类型，也就是说 <code>undefined</code> 类型的变量，可以赋值给 <code>number</code> 或 <code>string</code> 类型的变量</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// ✅</span></span><br><span class="line"><span class="hljs-keyword">let</span> x: <span class="hljs-literal">undefined</span></span><br><span class="line"><span class="hljs-keyword">let</span> n: <span class="hljs-built_in">number</span> = x</span><br><span class="line"><span class="hljs-keyword">let</span> s: <span class="hljs-built_in">string</span> = x</span><br></pre></td></tr></table></figure>

<p>而 <code>void</code> 类型的变量不能赋值给 <code>number</code> 或 <code>string</code> 类型的变量</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// ❌</span></span><br><span class="line"><span class="hljs-keyword">let</span> x: <span class="hljs-built_in">void</span></span><br><span class="line"><span class="hljs-keyword">let</span> n: <span class="hljs-built_in">number</span> = x</span><br><span class="line"><span class="hljs-keyword">let</span> s: <span class="hljs-built_in">string</span> = x</span><br></pre></td></tr></table></figure>

<p>但是默认情况下像上面那样操作，编译器会提示错误，这是因为 <code>tsconfig.json</code> 里面有一个配置项是默认开启的</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// tsconfig.json </span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="hljs-comment">/* Strict Type-Checking Options */</span></span><br><span class="line">  <span class="hljs-string">"strict"</span>: <span class="hljs-literal">true</span>,                           <span class="hljs-comment">/* Enable all strict type-checking options. */</span></span><br><span class="line">  <span class="hljs-comment">// "noImplicitAny": true,                 /* Raise error on expressions and declarations with an implied 'any' type. */</span></span><br><span class="line">  <span class="hljs-comment">// 对 null 类型检查，设置为 false 就不会报错了</span></span><br><span class="line">  <span class="hljs-comment">// "strictNullChecks": true,              /* Enable strict null checks. */</span></span><br><span class="line">  <span class="hljs-comment">// "strictFunctionTypes": true,           /* Enable strict checking of function types. */</span></span><br><span class="line">  <span class="hljs-comment">// "strictBindCallApply": true,           /* Enable strict 'bind', 'call', and 'apply' methods on functions. */</span></span><br><span class="line">  <span class="hljs-comment">// "strictPropertyInitialization": true,  /* Enable strict checking of property initialization in classes. */</span></span><br><span class="line">  <span class="hljs-comment">// "noImplicitThis": true,                /* Raise error on 'this' expressions with an implied 'any' type. */</span></span><br><span class="line">  <span class="hljs-comment">// "alwaysStrict": true,                  /* Parse in strict mode and emit "use strict" for each source file. */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>其中 <code>strictNullChecks</code> 参数用于新的严格空检查模式，在严格空检查模式下，<code>null</code> 和 <code>undefined</code> 值都不属于任何一个类型，它们只能赋值给自己这种类型或者 <code>any</code></p>
<h4 id="object，Object-和"><a href="#object，Object-和" class="headerlink" title="object，Object 和 { }"></a>object，Object 和 { }</h4><p>我们这里主要看看这三者之间的区别，注意区分前两者的大小写</p>
<ul>
<li><code>object</code> 类型</li>
</ul>
<p><code>object</code> 类型是 <code>TypeScript 2.2</code> 引入的新类型，它用于表示非原始类型</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// node_modules/typescript/lib/lib.es5.d.ts</span></span><br><span class="line"><span class="hljs-keyword">interface</span> ObjectConstructor &#123;</span><br><span class="line">  create(o: object | <span class="hljs-literal">null</span>): <span class="hljs-built_in">any</span></span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">const</span> proto = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-built_in">Object</span>.create(proto)     <span class="hljs-comment">// ✅</span></span><br><span class="line"><span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>)      <span class="hljs-comment">// ✅</span></span><br><span class="line"><span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">undefined</span>) <span class="hljs-comment">// ❌ </span></span><br><span class="line"><span class="hljs-built_in">Object</span>.create(<span class="hljs-number">1337</span>)      <span class="hljs-comment">// ❌ </span></span><br><span class="line"><span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">true</span>)      <span class="hljs-comment">// ❌ </span></span><br><span class="line"><span class="hljs-built_in">Object</span>.create(<span class="hljs-string">"oops"</span>)    <span class="hljs-comment">// ❌</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>Object</code> 类型</li>
</ul>
<p><code>Object</code> 类型是所有 <code>Object</code> 类的实例的类型，它由以下两个接口来定义，其中 <code>Object</code> 接口定义了 <code>Object.prototype</code> 原型对象上的属性</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// node_modules/typescript/lib/lib.es5.d.ts</span></span><br><span class="line"><span class="hljs-keyword">interface</span> Object &#123;</span><br><span class="line">  <span class="hljs-keyword">constructor</span>: Function</span><br><span class="line">  toString(<span class="hljs-params"></span>): string</span><br><span class="line">  toLocaleString(<span class="hljs-params"></span>): string</span><br><span class="line">  valueOf(<span class="hljs-params"></span>): Object</span><br><span class="line">  hasOwnProperty(<span class="hljs-params">v: PropertyKey</span>): boolean</span><br><span class="line">  isPrototypeOf(<span class="hljs-params">v: <span class="hljs-built_in">Object</span></span>): boolean</span><br><span class="line">  propertyIsEnumerable(<span class="hljs-params">v: PropertyKey</span>): boolean</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>而 <code>ObjectConstructor</code> 接口定义了 <code>Object</code> 类的属性</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// node_modules/typescript/lib/lib.es5.d.ts</span></span><br><span class="line"><span class="hljs-keyword">interface</span> ObjectConstructor &#123;</span><br><span class="line">  <span class="hljs-comment">/** Invocation via `new` */</span></span><br><span class="line">  <span class="hljs-keyword">new</span>(value?: <span class="hljs-built_in">any</span>): <span class="hljs-built_in">Object</span></span><br><span class="line">  <span class="hljs-comment">/** Invocation via function calls */</span></span><br><span class="line">  (value?: <span class="hljs-built_in">any</span>): <span class="hljs-built_in">any</span></span><br><span class="line">  readonly prototype: <span class="hljs-built_in">Object</span></span><br><span class="line">  getPrototypeOf(o: <span class="hljs-built_in">any</span>): <span class="hljs-built_in">any</span></span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">declare</span> <span class="hljs-keyword">var</span> <span class="hljs-built_in">Object</span>: ObjectConstructor</span><br></pre></td></tr></table></figure>

<p>这里需要注意的是，<code>Object</code> 类的所有实例都继承了 <code>Object</code> 接口中的所有属性</p>
<ul>
<li><code>{ }</code> 类型</li>
</ul>
<p><code>{ }</code> 类型描述了一个没有成员的对象，当你试图访问这样一个对象的任意属性时，<code>TypeScript</code> 会产生一个编译时错误</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">const</span> obj = &#123; &#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// ❌ </span></span><br><span class="line">obj.prop = <span class="hljs-string">'zhangsan'</span></span><br></pre></td></tr></table></figure>

<p>但是我们仍然可以使用在 <code>Object</code> 类型上定义的所有属性和方法，这些属性和方法可通过 <code>JavaScript</code> 的原型链隐式地使用</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">const</span> obj = &#123; &#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// ✅</span></span><br><span class="line">obj.toString()</span><br></pre></td></tr></table></figure>

<h4 id="Never"><a href="#Never" class="headerlink" title="Never"></a>Never</h4><p><code>never</code> 类型表示的是那些永不存在的值的类型，例如 <code>never</code> 类型是那些总是会抛出异常或根本就不会有返回值的函数表达式或箭头函数表达式的返回值类型（这个类型一般很少会用到，了解即可）</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// 返回 never 的函数必须存在无法达到的终点</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">error</span>(<span class="hljs-params">message: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">never</span> </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(message)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">infiniteLoop</span>(<span class="hljs-params"></span>): <span class="hljs-title">never</span> </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在 <code>TypeScript</code> 中，可以利用 <code>never</code> 类型的特性来实现全面性检查，具体示例如下</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">type</span> Foo = <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">controlFlowAnalysisWithNever</span>(<span class="hljs-params">foo: Foo</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> foo === <span class="hljs-string">'string'</span>) &#123;</span><br><span class="line">    <span class="hljs-comment">// 这里 foo 被收窄为 string 类型</span></span><br><span class="line">  &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> foo === <span class="hljs-string">'number'</span>) &#123;</span><br><span class="line">    <span class="hljs-comment">// 这里 foo 被收窄为 number 类型</span></span><br><span class="line">  &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="line">    <span class="hljs-comment">// foo 在这里是 never</span></span><br><span class="line">    <span class="hljs-keyword">const</span> check: never = foo</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意在 <code>else</code> 分支里面，我们把收窄为 <code>never</code> 的 <code>foo</code> 赋值给一个显示声明的 <code>never</code> 变量，如果一切逻辑正确，那么这里应该能够编译通过，但是如果我们修改了 <code>Foo</code> 的类型为 <code>type Foo = string | number | boolean</code> 但是忘记了修改 <code>controlFlowAnalysisWithNever</code> 方法中的控制流程</p>
<p>这时候 <code>else</code> 分支的 <code>foo</code> 类型会被收窄为 <code>boolean</code> 类型，导致无法赋值给 <code>never</code> 类型，这时就会产生一个编译错误，通过这个方式，我们可以确保 <code>controlFlowAnalysisWithNever</code> 方法总是穷尽了 <code>Foo</code> 的所有可能类型</p>
<p>通过这个示例，我们可以得出一个结论，即可以使用 <code>never</code> 来避免出现新增了联合类型没有对应的实现，目的就是写出类型绝对安全的代码，但是这里我们也需要注意区分 <code>never</code> 和 <code>void</code> 两者之间的区别</p>
<ul>
<li><code>void</code> 表示没有任何类型（可以被赋值为 <code>null</code> 和 <code>undefined</code>）</li>
<li><code>never</code> 表示一个不包含值的类型，即表示永远不存在的值</li>
<li>拥有 <code>void</code> 返回值类型的函数能正常运行，拥有 <code>never</code> 返回值类型的函数无法正常返回，无法终止，或会抛出异常</li>
</ul>
<h2 id="内置对象"><a href="#内置对象" class="headerlink" title="内置对象"></a>内置对象</h2><p>其实在上面介绍的一些原始数据类型，本质上它们都是 <code>JavaScript</code> 当中的 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects" target="_blank" rel="noopener">内置对象</a>，它们已经在 <code>TypeScript</code> 中定义好了对应的类型，直接进行使用就行，内置对象是指根据标准在全局作用域（<code>Global</code>）上存在的对象，这里的标准是指 <code>ECMAScript</code> 和其他环境（比如 <code>DOM</code>）的标准</p>
<p><code>ECMAScript</code> 标准提供的内置对象有 <code>Boolean</code>、<code>Error</code>、<code>Date</code>、<code>RegExp</code> 等，我们可以在 <code>TypeScript</code> 中将变量定义为这些类型</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">let</span> b: <span class="hljs-built_in">Boolean</span> = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Boolean</span>(<span class="hljs-number">1</span>)</span><br><span class="line"><span class="hljs-keyword">let</span> e: <span class="hljs-built_in">Error</span> = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Err'</span>)</span><br><span class="line"><span class="hljs-keyword">let</span> d: <span class="hljs-built_in">Date</span> = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>()</span><br><span class="line"><span class="hljs-keyword">let</span> r: <span class="hljs-built_in">RegExp</span> = <span class="hljs-regexp">/[a-z]/</span></span><br></pre></td></tr></table></figure>

<p>而常见的 <code>DOM</code> 和 <code>BOM</code> 提供的内置对象有 <code>Document</code>、<code>HTMLElement</code>、<code>Event</code>、<code>NodeList</code> 等，我们在开发过程当中也会经常用到这些类型</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">let</span> body: HTMLElement = <span class="hljs-built_in">document</span>.body</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">let</span> allDiv: NodeList = <span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">'div'</span>)</span><br><span class="line"></span><br><span class="line"><span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e: MouseEvent</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>而对于内置对象的定义文件，则在 <a href="https://github.com/Microsoft/TypeScript/tree/master/src/lib" target="_blank" rel="noopener">TypeScript 核心库</a> 的定义文件中，其中定义了所有浏览器环境需要用到的类型，并且是预置在 <code>TypeScript</code> 中的，当我们在使用一些常用的方法的时候，<code>TypeScript</code> 实际上已经帮我们做了很多类型判断的工作了，比如</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// ✅</span></span><br><span class="line"><span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">10</span>, <span class="hljs-number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// ❌</span></span><br><span class="line"><span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">10</span>, <span class="hljs-string">'2'</span>)</span><br></pre></td></tr></table></figure>

<p>在上面的例子中，<code>Math.pow()</code> 必须接受两个 <code>number</code> 类型的参数，它的类型定义如下</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">interface</span> Math &#123;</span><br><span class="line">  <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">   * Returns the value of a base expression taken to a specified power.</span></span><br><span class="line"><span class="hljs-comment">   * @param x The base value of the expression.</span></span><br><span class="line"><span class="hljs-comment">   * @param y The exponent value of the expression.</span></span><br><span class="line"><span class="hljs-comment">   */</span></span><br><span class="line">  pow(x: <span class="hljs-built_in">number</span>, y: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>再来看一个 <code>DOM</code> 中的例子</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// ❌</span></span><br><span class="line"><span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-built_in">console</span>.log(e.targetCurrent)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>在上面的例子中，<code>addEventListener</code> 方法是在 <code>TypeScript</code> 核心库中定义的</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">interface</span> Document <span class="hljs-keyword">extends</span> Node, GlobalEventHandlers, NodeSelector, DocumentEvent &#123;</span><br><span class="line">  addEventListener(<span class="hljs-keyword">type</span>: <span class="hljs-built_in">string</span>, listener: <span class="hljs-function">(<span class="hljs-params">ev: MouseEvent</span>) =&gt;</span> <span class="hljs-built_in">any</span>, useCapture?: <span class="hljs-built_in">boolean</span>): <span class="hljs-built_in">void</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>所以 <code>e</code> 被推断成了 <code>MouseEvent</code>，而 <code>MouseEvent</code> 是没有 <code>targetCurrent</code> 属性的，所以报错了</p>
<p>此外我们还需要需要注意一点，那就是 <code>TypeScript</code> 核心库的定义中是不包含 <code>Node.js</code> 部分的，如果想用 <code>TypeScript</code> 写 <code>Node.js</code>，则需要引入第三方声明文件</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install <span class="hljs-meta">@types</span>/node --save-dev</span><br></pre></td></tr></table></figure>

<h2 id="TypeScript-断言"><a href="#TypeScript-断言" class="headerlink" title="TypeScript 断言"></a>TypeScript 断言</h2><p>我们在有时候可能会遇到这种情况，那就是我们会比 <code>TypeScript</code> 更了解某个值的详细信息，通常这会发生在你清楚地知道一个实体具有比它现有类型更确切的类型，在这种情况下我们就可以通过类型断言这种方式可以告诉编译器，我知道自己在干什么，类型断言好比其他语言里的类型转换，但是不进行特殊的数据检查和解构，它没有运行时的影响，只是在编译阶段起作用</p>
<h4 id="类型断言"><a href="#类型断言" class="headerlink" title="类型断言"></a>类型断言</h4><p>类型断言主要有两种形式，即 <code>&lt;&gt;</code> 和 <code>as</code>，我们先来看看 <code>&lt;&gt;</code> 的形式</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">let</span> x: <span class="hljs-built_in">any</span> = <span class="hljs-string">'abc'</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">let</span> l: <span class="hljs-built_in">number</span> = (&lt;<span class="hljs-built_in">string</span>&gt;x).length</span><br></pre></td></tr></table></figure>

<p>等同于</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">let</span> x: <span class="hljs-built_in">any</span> = <span class="hljs-string">'abc'</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">let</span> l: <span class="hljs-built_in">number</span> = (x <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>).length</span><br></pre></td></tr></table></figure>

<p>但是建议尽量使用 <code>as</code> 来替 <code>&lt;&gt;</code> 表示类型断言，因为</p>
<ul>
<li>在 <code>TypeScript</code> 可以使用 <code>&lt;&gt;</code> 来表示类型断言，但是在结合 <code>JSX</code> 的语法时将带来解析上的困难，因此 <code>TypeScript</code> 在 <code>.tsx</code> 文件里禁用了使用 <code>&lt;&gt;</code> 的类型断言</li>
<li>另外，<code>as</code> 操作符在 <code>.ts</code> 文件和 <code>.tsx</code> 文件里都可以使用</li>
</ul>
<h4 id="非空断言"><a href="#非空断言" class="headerlink" title="非空断言"></a>非空断言</h4><p>如果在上下文中当类型检查器无法断定类型时，一个新的后缀表达式操作符 <code>!</code> 可以用于断言操作对象是非 <code>null</code> 和非 <code>undefined</code> 类型，简单来说比如 <code>x!</code> 就是将从 <code>x</code> 值域中排除 <code>null</code> 和 <code>undefined</code>，下面我们先来看几个非空断言操作符的一些使用场景</p>
<ul>
<li>第一种情况，忽略 <code>undefined</code> 和 <code>null</code> 类型</li>
</ul>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myFunc</span>(<span class="hljs-params">maybeString: <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span> | <span class="hljs-literal">null</span></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// Type 'string | null | undefined' is not assignable to type 'string'.</span></span><br><span class="line">  <span class="hljs-comment">// Type 'undefined' is not assignable to type 'string'. </span></span><br><span class="line">  <span class="hljs-keyword">const</span> onlyString: <span class="hljs-built_in">string</span> = maybeString               <span class="hljs-comment">// ❌</span></span><br><span class="line">  <span class="hljs-keyword">const</span> ignoreUndefinedAndNull: <span class="hljs-built_in">string</span> = maybeString!  <span class="hljs-comment">// ✅</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>第二种情况，调用函数时忽略 <code>undefined</code> 类型</li>
</ul>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">type</span> NumGenerator = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">number</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myFunc</span>(<span class="hljs-params">numGenerator: NumGenerator | <span class="hljs-literal">undefined</span></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// Object is possibly 'undefined'.(2532)</span></span><br><span class="line">  <span class="hljs-comment">// Cannot invoke an object which is possibly 'undefined'.(2722)</span></span><br><span class="line">  <span class="hljs-keyword">const</span> num1 = numGenerator()   <span class="hljs-comment">// ❌</span></span><br><span class="line">  <span class="hljs-keyword">const</span> num2 = numGenerator!()  <span class="hljs-comment">// ✅</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>因为 <code>!</code> 非空断言操作符会从编译生成的 <code>JavaScript</code> 代码中移除，所以在实际使用的过程中，要特别注意，比如下面这个例子</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">const</span> a: <span class="hljs-built_in">number</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span></span><br><span class="line"><span class="hljs-keyword">const</span> b: <span class="hljs-built_in">number</span> = a!</span><br><span class="line"></span><br><span class="line"><span class="hljs-built_in">console</span>.log(b)</span><br></pre></td></tr></table></figure>

<p>以上 <code>TypeScript</code> 代码会编译生成以下 <code>ES5</code> 代码</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">'use strict'</span></span><br><span class="line"><span class="hljs-keyword">const</span> a = <span class="hljs-literal">undefined</span></span><br><span class="line"><span class="hljs-keyword">const</span> b = a</span><br><span class="line"></span><br><span class="line"><span class="hljs-built_in">console</span>.log(b)</span><br></pre></td></tr></table></figure>

<p>虽然在 <code>TypeScript</code> 代码中，我们使用了非空断言，使得 <code>const b: number = a!</code> 语句可以通过 <code>TypeScript</code> 类型检查器的检查，但在生成的 <code>ES5</code> 代码中，因为 <code>!</code> 非空断言操作符被移除了，所以在浏览器中执行以上代码，在控制台会输出 <code>undefined</code></p>
<h4 id="确定赋值断言"><a href="#确定赋值断言" class="headerlink" title="确定赋值断言"></a>确定赋值断言</h4><p>在 <code>TypeScript 2.7</code> 版本中引入了『确定赋值断言』，即允许在实例属性和变量声明后面放置一个 <code>!</code> 号，从而告诉 <code>TypeScript</code> 该属性会被明确地赋值，来看下面这个示例</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">let</span> x: <span class="hljs-built_in">number</span></span><br><span class="line"></span><br><span class="line">init()</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// Variable 'x' is used before being assigned.</span></span><br><span class="line"><span class="hljs-built_in">console</span>.log(x * <span class="hljs-number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">init</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  x = <span class="hljs-number">10</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行后我们可以发现，错误提示显示说变量 <code>x</code> 在赋值前已经被使用了，为了解决这个问题，我们可以使用确定赋值断言</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">let</span> x!: <span class="hljs-built_in">number</span></span><br><span class="line"></span><br><span class="line">init()</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// ✅</span></span><br><span class="line"><span class="hljs-built_in">console</span>.log(x * <span class="hljs-number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">init</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  x = <span class="hljs-number">10</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们通过 <code>let x!: number</code> 来确定赋值断言，这样一来 <code>TypeScript</code> 编译器就会知道该属性会被明确地赋值</p>
<h2 id="联合类型"><a href="#联合类型" class="headerlink" title="联合类型"></a>联合类型</h2><p>联合类型（<code>Union Types</code>）表示取值可以为多种类型中的一种，使用 <code>|</code> 分隔每个类型</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">let</span> x: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span></span><br><span class="line"></span><br><span class="line">x = <span class="hljs-string">'zhangsan'</span>  <span class="hljs-comment">// ✅</span></span><br><span class="line">x = <span class="hljs-number">7</span>           <span class="hljs-comment">// ✅</span></span><br><span class="line"></span><br><span class="line">x = <span class="hljs-literal">true</span>        <span class="hljs-comment">// ❌</span></span><br></pre></td></tr></table></figure>

<p>上面示例当中的 <code>let x: string | number</code> 含义是允许 <code>x</code> 的类型是 <code>string</code> 或者 <code>number</code>，但是不能是其他类型</p>
<p>当 <code>TypeScript</code> 不确定一个联合类型的变量到底是哪个类型的时候，我们只能访问此联合类型的所有类型里共有的属性或方法</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// ❌</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getLength</span>(<span class="hljs-params">x: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span></span>): <span class="hljs-title">number</span> </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">return</span> x.length</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>因为 <code>length</code> 不是 <code>string</code> 和 <code>number</code> 类型的共有属性，所以会报错，但是访问两者的的共有属性是没问题的，比如 <code>toString()</code> 方法</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// ✅</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getLength</span>(<span class="hljs-params">x: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span></span>): <span class="hljs-title">string</span> </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">return</span> x.toString() </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>并且联合类型的变量在被赋值的时候，会根据类型推论的规则推断出一个类型</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">let</span> x: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span></span><br><span class="line"></span><br><span class="line">x = <span class="hljs-string">'zhangsan'</span></span><br><span class="line"><span class="hljs-built_in">console</span>.log(x.length)  <span class="hljs-comment">// 8</span></span><br><span class="line"></span><br><span class="line">x = <span class="hljs-number">7</span></span><br><span class="line"><span class="hljs-built_in">console</span>.log(x.length)  <span class="hljs-comment">// ❌</span></span><br></pre></td></tr></table></figure>

<p>上例中，在赋值为 <code>&#39;zhangsan&#39;</code> 的时候，<code>x</code> 被推断成了 <code>string</code>，所以可以访问它的 <code>length</code> 属性，但是赋值为 <code>7</code> 的时候 <code>x</code> 被推断成了 <code>number</code>，所以访问它的 <code>length</code> 属性时就会报错</p>
<p>关于联合类型，这里我们来看一个它的相关应用场景，也就是『类型保护函数』，要自定义一个类型保护，只需要简单地为这个类型保护定义一个函数即可，这个函数的返回值是一个『类型谓词』</p>
<p>类型谓词的语法为 <code>parameterName is Type</code> 这种形式，其中 <code>parameterName</code> 必须是当前函数签名里的一个参数名，来看下面这个示例</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">interface</span> Bird &#123;</span><br><span class="line">  fly()</span><br><span class="line">  layEggs()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">interface</span> Fish &#123;</span><br><span class="line">  swim()</span><br><span class="line">  layEggs()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getSmallPet</span>(<span class="hljs-params"></span>): <span class="hljs-title">Fish</span> | <span class="hljs-title">Bird</span> </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">let</span> pet = getSmallPet()</span><br><span class="line"></span><br><span class="line">pet.layEggs()</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// ❌</span></span><br><span class="line">pet.swim()</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// ✅</span></span><br><span class="line">(pet <span class="hljs-keyword">as</span> Fish).swim()</span><br></pre></td></tr></table></figure>

<p>在上面示例当中，当我们使用联合类型时，如果不用类型断言，默认只会获取两者共有的部分，在这种情况下，我们就可以采用类型谓词</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">interface</span> Bird &#123;</span><br><span class="line">  fly()</span><br><span class="line">  layEggs()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">interface</span> Fish &#123;</span><br><span class="line">  swim()</span><br><span class="line">  layEggs()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getSmallPet</span>(<span class="hljs-params"></span>): <span class="hljs-title">Fish</span> | <span class="hljs-title">Bird</span> </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">let</span> pet = getSmallPet()</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// 使用类型谓词 </span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isFish</span>(<span class="hljs-params">pet: Fish | Bird</span>): <span class="hljs-title">pet</span> <span class="hljs-title">is</span> <span class="hljs-title">Fish</span> </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">return</span> (pet <span class="hljs-keyword">as</span> Fish).swim !== <span class="hljs-literal">undefined</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">if</span> (isFish(pet)) &#123;</span><br><span class="line">  pet.swim()</span><br><span class="line">&#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="line">  pet.fly()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>另外，我们可以借住 <code>never</code> 来区分的联合类型，比如下面这个示例</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">enum</span> KindType &#123;</span><br><span class="line">  square = <span class="hljs-string">'square'</span>,</span><br><span class="line">  rectangle = <span class="hljs-string">'rectangle'</span>,</span><br><span class="line">  circle = <span class="hljs-string">'circle'</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">interface</span> Square &#123;</span><br><span class="line">  kind: KindType.square</span><br><span class="line">  size: <span class="hljs-built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">interface</span> Rectangle &#123;</span><br><span class="line">  kind: KindType.rectangle</span><br><span class="line">  width: <span class="hljs-built_in">number</span></span><br><span class="line">  height: <span class="hljs-built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">interface</span> Circle &#123;</span><br><span class="line">  kind: KindType.circle</span><br><span class="line">  radius: <span class="hljs-built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">type</span> Shape = Square | Rectangle | Circle</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">area</span>(<span class="hljs-params">s: Shape</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// 如果联合类型中的多个类型，拥有共有的属性，那么就可以凭借这个属性来创建不同的类型保护区块</span></span><br><span class="line">  <span class="hljs-comment">// 这里 kind 是共有的属性</span></span><br><span class="line">  <span class="hljs-keyword">switch</span> (s.kind) &#123;</span><br><span class="line">    <span class="hljs-keyword">case</span> KindType.square:</span><br><span class="line">      <span class="hljs-keyword">return</span> s.size * s.size</span><br><span class="line">    <span class="hljs-keyword">case</span> KindType.rectangle:</span><br><span class="line">      <span class="hljs-keyword">return</span> s.height * s.width</span><br><span class="line">    <span class="hljs-keyword">default</span>:</span><br><span class="line">      <span class="hljs-keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// 以上代码有隐患，如果后续新增类型时，TS 检查以上代码时，虽然缺失后续新增的类型，但不会报错</span></span><br><span class="line">area(&#123; kind: KindType.circle, radius: <span class="hljs-number">1</span> &#125;)</span><br></pre></td></tr></table></figure>

<p>所以这里可以利用 <code>never</code> 来进行完善</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">area</span>(<span class="hljs-params">s: Shape</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">switch</span> (s.kind) &#123;</span><br><span class="line">    <span class="hljs-keyword">case</span> KindType.square:</span><br><span class="line">      <span class="hljs-keyword">return</span> s.size * s.size</span><br><span class="line">    <span class="hljs-keyword">case</span> KindType.rectangle:</span><br><span class="line">      <span class="hljs-keyword">return</span> s.height * s.width</span><br><span class="line">    <span class="hljs-keyword">case</span> KindType.circle:</span><br><span class="line">      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.PI * s.radius ** <span class="hljs-number">2</span></span><br><span class="line">    <span class="hljs-keyword">default</span>:</span><br><span class="line">      <span class="hljs-comment">// 检查 s 是否是 never 类型</span></span><br><span class="line">      <span class="hljs-comment">// 如果是 never 类型，那么上面的分支语句都被覆盖了，就永远都不会走到当前分支</span></span><br><span class="line">      <span class="hljs-comment">// 如果不是 never 类型，就说明前面的分支语句有遗漏，需要补上</span></span><br><span class="line">      <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">(<span class="hljs-params">e: never</span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params">        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-params">e</span>)</span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params">      &#125;</span>)(<span class="hljs-params">s</span>)</span></span><br><span class="line"><span class="hljs-function">  &#125;</span></span><br><span class="line"><span class="hljs-function">&#125;</span></span><br><span class="line"><span class="hljs-function"></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params">area</span>(<span class="hljs-params">&#123; kind: KindType.circle, radius: 1 &#125;</span>)</span></span><br></pre></td></tr></table></figure>

<p>更多可见 <a href="https://www.zhihu.com/question/354601204/answer/888551021" target="_blank" rel="noopener">TypeScript 中的 never 类型具体有什么用？</a></p>
<h2 id="对象的类型（接口）"><a href="#对象的类型（接口）" class="headerlink" title="对象的类型（接口）"></a>对象的类型（接口）</h2><p>在 <code>TypeScript</code> 中，我们使用接口（<code>Interfaces</code>）来定义对象的类型，接口（<code>Interfaces</code>）在面向对象语言中是一个很重要的概念，它是对行为的抽象，而具体如何行动需要由类（<code>classes</code>）去实现（<code>implement</code>），我们先来看一个简单的示例</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">interface</span> Person &#123;</span><br><span class="line">  name: <span class="hljs-built_in">string</span>;</span><br><span class="line">  age: <span class="hljs-built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">let</span> user: Person = &#123;</span><br><span class="line">  name: <span class="hljs-string">'zhangsan'</span>,</span><br><span class="line">  age: <span class="hljs-number">18</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们定义了一个接口 <code>Person</code>，接着定义了一个变量 <code>user</code>，它的类型是 <code>Person</code>，这样我们就约束了 <code>user</code> 的结构必须和接口 <code>Person</code> 一致，但是需要注意的是，定义的变量比接口多一些或是少了一些属性都是不允许的</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// ❌</span></span><br><span class="line"><span class="hljs-keyword">let</span> user: Person = &#123;</span><br><span class="line">  name: <span class="hljs-string">'zhangsan'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// ❌</span></span><br><span class="line"><span class="hljs-keyword">let</span> user: Person = &#123;</span><br><span class="line">  name: <span class="hljs-string">'zhangsan'</span>,</span><br><span class="line">  age: <span class="hljs-number">18</span>,</span><br><span class="line">  sex: <span class="hljs-number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>所以说，在赋值的时候，变量的结构必须和接口的结构保持一致</p>
<h4 id="可选属性"><a href="#可选属性" class="headerlink" title="可选属性"></a>可选属性</h4><p>有时候我们又希望不要完全匹配一个接口，那么这种情况下可以使用可选属性</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">interface</span> Person &#123;</span><br><span class="line">  name: <span class="hljs-built_in">string</span>;</span><br><span class="line">  age?: <span class="hljs-built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">let</span> user1: Person = &#123;</span><br><span class="line">  name: <span class="hljs-string">'zhangsan'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">let</span> user2: Person = &#123;</span><br><span class="line">  name: <span class="hljs-string">'zhangsan'</span>,</span><br><span class="line">  age: <span class="hljs-number">18</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但是此时仍然不允许添加未定义的属性</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">interface</span> Person &#123;</span><br><span class="line">  name: <span class="hljs-built_in">string</span>;</span><br><span class="line">  age?: <span class="hljs-built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// ❌</span></span><br><span class="line"><span class="hljs-keyword">let</span> user: Person = &#123;</span><br><span class="line">  name: <span class="hljs-string">'zhangsan'</span>,</span><br><span class="line">  age: <span class="hljs-number">18</span>,</span><br><span class="line">  sex: <span class="hljs-number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="任意属性"><a href="#任意属性" class="headerlink" title="任意属性"></a>任意属性</h4><p>有时候我们希望一个接口允许有任意的属性，可以使用 <code>[propName: type]</code> 的方式来来进行定义</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">interface</span> Person &#123;</span><br><span class="line">  name: <span class="hljs-built_in">string</span>;</span><br><span class="line">  age?: <span class="hljs-built_in">number</span>;</span><br><span class="line">  [propName: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">any</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">let</span> user: Person = &#123;</span><br><span class="line">  name: <span class="hljs-string">'zhangsan'</span>,</span><br><span class="line">  age: <span class="hljs-number">18</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但是这里有一个需要注意的地方，那就是『一旦定义了任意属性，那么确定属性和可选属性的类型都必须是它的类型的子集』，比如下面这个示例就会报错</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// ❌</span></span><br><span class="line"><span class="hljs-keyword">interface</span> Person &#123;</span><br><span class="line">  name: <span class="hljs-built_in">string</span>;</span><br><span class="line">  age?: <span class="hljs-built_in">number</span>;</span><br><span class="line">  [propName: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">let</span> user: Person = &#123;</span><br><span class="line">  name: <span class="hljs-string">'zhangsan'</span>,</span><br><span class="line">  age: <span class="hljs-number">18</span>,</span><br><span class="line">  sex: <span class="hljs-string">'0'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里我们将任意属性的值允许是 <code>string</code>，但是可选属性 <code>age</code> 的值却是 <code>number</code>，<code>number</code> 不是 <code>string</code> 的子属性，所以报错了，通常来说一个接口中只能定义一个任意属性，如果接口中有多个类型的属性，则可以采用联合类型的方式</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">interface</span> Person &#123;</span><br><span class="line">  name: <span class="hljs-built_in">string</span>;</span><br><span class="line">  age?: <span class="hljs-built_in">number</span>;</span><br><span class="line">  [propName: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">let</span> user: Person = &#123;</span><br><span class="line">  name: <span class="hljs-string">'zhangsan'</span>,</span><br><span class="line">  age: <span class="hljs-number">18</span>,</span><br><span class="line">  sex: <span class="hljs-number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>另外需要注意的一点就是『索引签名』参数类型必须为 <code>string</code> 或 <code>number</code>』</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// ❌</span></span><br><span class="line"><span class="hljs-keyword">interface</span> Person &#123;</span><br><span class="line">  name: <span class="hljs-built_in">string</span>;</span><br><span class="line">  age?: <span class="hljs-built_in">number</span>;</span><br><span class="line">  [propName: <span class="hljs-built_in">any</span>]: <span class="hljs-built_in">any</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面示例是会报错的，这是因为 <code>TypeScript</code> 只支持两种索引签名，那就是字符串和数字，虽然可以同时使用两种类型的索引，但是数字索引的返回值必须是字符串索引返回值类型的子类型，这是因为当使用 <code>number</code> 来索引时，<code>JavaScript</code> 会将它转换成 <code>string</code> 然后再去索引对象，比如下面这个示例就不会报错</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// ✅</span></span><br><span class="line"><span class="hljs-keyword">interface</span> Person &#123;</span><br><span class="line">  name: <span class="hljs-built_in">string</span>;</span><br><span class="line">  age?: <span class="hljs-built_in">number</span>;</span><br><span class="line">  [propName: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">let</span> user: Person = &#123;</span><br><span class="line">  name: <span class="hljs-string">'zhangsan'</span>,</span><br><span class="line">  age: <span class="hljs-number">18</span>,</span><br><span class="line">  <span class="hljs-number">1</span>: <span class="hljs-number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>其实在上面示例当中和写成 <code>&#39;1&#39;: 1</code> 是完全一样的，即使我们定义的是 <code>[propName: number]</code>，这是因为 <code>JavaScript</code> 中对象的数字索引，最终会转成字符串来取值的，比如使用 <code>100</code>（<code>number</code>）去索引等同于使用 <code>&#39;100&#39;</code>（<code>string</code>）去索引，因此两者需要保持一致</p>
<h4 id="只读属性"><a href="#只读属性" class="headerlink" title="只读属性"></a>只读属性</h4><p>有时候我们希望对象中的一些字段只能在创建的时候被赋值，那么可以用 <code>readonly</code> 定义只读属性</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">interface</span> Person &#123;</span><br><span class="line">  readonly id: <span class="hljs-built_in">number</span>;</span><br><span class="line">  name: <span class="hljs-built_in">string</span>;</span><br><span class="line">  age?: <span class="hljs-built_in">number</span>;</span><br><span class="line">  [propName: <span class="hljs-built_in">number</span>]: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">let</span> user: Person = &#123;</span><br><span class="line">  id: <span class="hljs-number">123</span>,</span><br><span class="line">  name: <span class="hljs-string">'zhangsan'</span>,</span><br><span class="line">  age: <span class="hljs-number">18</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// ❌</span></span><br><span class="line">user.id = <span class="hljs-number">456</span></span><br></pre></td></tr></table></figure>

<p>在上面示例当中，我们使用 <code>readonly</code> 定义的属性 <code>id</code> 初始化后，又被赋值了，所以报错了，但是这里特别需要注意的一点就是『只读的约束是存在于第一次给对象赋值的时候，而不是第一次给只读属性赋值的时候』，比如下面这个示例</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">interface</span> Person &#123;</span><br><span class="line">  readonly id: <span class="hljs-built_in">number</span>;</span><br><span class="line">  name: <span class="hljs-built_in">string</span>;</span><br><span class="line">  age?: <span class="hljs-built_in">number</span>;</span><br><span class="line">  [propName: <span class="hljs-built_in">number</span>]: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// ❌</span></span><br><span class="line"><span class="hljs-keyword">let</span> user: Person = &#123;</span><br><span class="line">  name: <span class="hljs-string">'zhangsan'</span>,</span><br><span class="line">  age: <span class="hljs-number">18</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// ❌</span></span><br><span class="line">user.id = <span class="hljs-number">456</span></span><br></pre></td></tr></table></figure>

<p>上例中有两处报错，第一处是在对 <code>user</code> 进行赋值的时候，没有给 <code>id</code> 赋值，第二处是在给 <code>user.id</code> 赋值的时候，由于它是只读属性，所以报错了</p>
<h2 id="数组的类型"><a href="#数组的类型" class="headerlink" title="数组的类型"></a>数组的类型</h2><p>在 TypeScript 中，数组类型有多种定义方式，比较灵活，最简单的方法是使用『类型 + 方括号』来表示数组</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">let</span> x: <span class="hljs-built_in">number</span>[] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]</span><br></pre></td></tr></table></figure>

<p>并且定义以后，数组的一些方法的参数也会根据数组在定义时约定的类型进行限制</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">let</span> x: <span class="hljs-built_in">number</span>[] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// ✅</span></span><br><span class="line">x.push(<span class="hljs-number">6</span>)</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// ❌</span></span><br><span class="line">x.push(<span class="hljs-string">'6'</span>)</span><br></pre></td></tr></table></figure>

<p>在上面示例当中，由于 <code>push</code> 方法只允许传入 <code>number</code> 类型的参数，但是却传了一个字符串类型的 <code>6</code>，所以报错了，另外我们也可以使用数组泛型（<code>Array Generic</code>） <code>Array&lt;elemType&gt;</code> 来表示数组</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">let</span> x: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">number</span>&gt; = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]</span><br></pre></td></tr></table></figure>

<p>关于泛型的相关内容，我们会在后面章节当中详细来进行介绍，下面我们来看看如何使用接口来描述数组</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">interface</span> NumberArray &#123;</span><br><span class="line">  [index: <span class="hljs-built_in">number</span>]: <span class="hljs-built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">let</span> x: NumberArray = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]</span><br></pre></td></tr></table></figure>

<p>虽然接口也可以用来描述数组，但是我们一般不会这么来使用，因为这种方式比前两种方式要复杂许多，不过有一种情况比较特殊，那就是它常用来表示类数组，类数组（<code>Array-like Object</code>）不是数组类型，比如 <code>arguments</code></p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// ❌</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sum</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">let</span> args: <span class="hljs-built_in">number</span>[] = <span class="hljs-built_in">arguments</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>由于 <code>arguments</code> 实际上是一个类数组，不能用普通的数组的方式来描述，而应该用接口</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">interface</span> Args &#123;</span><br><span class="line">  [index: <span class="hljs-built_in">number</span>]: <span class="hljs-built_in">number</span>;</span><br><span class="line">  length: <span class="hljs-built_in">number</span>;</span><br><span class="line">  callee: <span class="hljs-built_in">Function</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sum</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">let</span> args: Args = <span class="hljs-built_in">arguments</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在这个例子中，我们除了约束当索引的类型是数字时，值的类型必须是数字之外，也约束了它还有 <code>length</code> 和 <code>callee</code> 两个属性，事实上常用的类数组都有自己的接口定义，如 <code>IArguments</code>，<code>NodeList</code>，<code>HTMLCollection</code> 等</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sum</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">let</span> args: IArguments = <span class="hljs-built_in">arguments</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>其实也就是我们之前提到过的『内置对象』，其中 <code>IArguments</code> 是 <code>TypeScript</code> 中定义好了的类型，它实际上就是</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">interface</span> IArguments &#123;</span><br><span class="line">  [index: <span class="hljs-built_in">number</span>]: <span class="hljs-built_in">any</span>;</span><br><span class="line">  length: <span class="hljs-built_in">number</span>;</span><br><span class="line">  callee: <span class="hljs-built_in">Function</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>对于数组当中既存在数字又含有字符串的情况，我们可以考虑使用联合类型</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">let</span> x: (<span class="hljs-built_in">number</span> | <span class="hljs-built_in">string</span>)[] = [<span class="hljs-number">1</span>, <span class="hljs-string">'2'</span>, <span class="hljs-number">3</span>]</span><br></pre></td></tr></table></figure>

<p>另外还有一种比较复杂的情况，那就是对象类型的数组，偷懒的话当然可以直接使用 <code>any</code>，但是如若结构不算太过复杂的话可以使用下面这种方式</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">const</span> x: &#123; name: <span class="hljs-built_in">string</span>, age: <span class="hljs-built_in">number</span> &#125;[] = [&#123; name: <span class="hljs-string">'zhangsan'</span>, age: <span class="hljs-number">18</span> &#125;]</span><br></pre></td></tr></table></figure>

<p>还可以将上面的写法简化一下，利用类型别名的方式</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">type</span> User = &#123; name: <span class="hljs-built_in">string</span>, age: <span class="hljs-built_in">number</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">const</span> x: User[] = [&#123; name: <span class="hljs-string">'zhangsan'</span>, age: <span class="hljs-number">18</span> &#125;]</span><br></pre></td></tr></table></figure>

<h2 id="函数的类型"><a href="#函数的类型" class="headerlink" title="函数的类型"></a>函数的类型</h2><p>在 <code>JavaScript</code> 中，有两种常见的定义函数的方式，即函数声明（<code>Function Declaration</code>）和函数表达式（<code>Function Expression</code>）</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// 函数声明（Function Declaration）</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add</span>(<span class="hljs-params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">return</span> x + y</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// 函数表达式（Function Expression）</span></span><br><span class="line"><span class="hljs-keyword">let</span> add = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">return</span> x + y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>一个函数有输入和输出，要在 <code>TypeScript</code> 中对其进行约束，需要把输入和输出都考虑到，其中函数声明的类型定义较简单</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add</span>(<span class="hljs-params">x: <span class="hljs-built_in">number</span>, y: <span class="hljs-built_in">number</span></span>): <span class="hljs-title">number</span> </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">return</span> x + y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但是输入多余的（或者少于要求的）参数，是不被允许的</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">add(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)  <span class="hljs-comment">// ❌</span></span><br><span class="line"></span><br><span class="line">add(<span class="hljs-number">1</span>)        <span class="hljs-comment">// ❌</span></span><br></pre></td></tr></table></figure>

<p>但是如果我们要对一个函数表达式（<code>Function Expression</code>）来定义的话，可能会写成这样</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">let</span> add = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">x: <span class="hljs-built_in">number</span>, y: <span class="hljs-built_in">number</span></span>): <span class="hljs-title">number</span> </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">return</span> x + y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>虽然是可以通过编译的，但是上面的代码其实只对等号右侧的匿名函数进行了类型定义，而等号左边的 <code>add</code>，是通过赋值操作进行类型推论而推断出来的，如果需要我们手动给 <code>add</code> 添加类型，则应该是这样</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">let</span> add: <span class="hljs-function">(<span class="hljs-params">x: <span class="hljs-built_in">number</span>, y: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">number</span> = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">x: <span class="hljs-built_in">number</span>, y: <span class="hljs-built_in">number</span></span>): <span class="hljs-title">number</span> </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">return</span> x + y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但是这里注意不要混淆了 <code>TypeScript</code> 中的 <code>=&gt;</code> 和 <code>ES6</code> 当中的箭头函数（<code>=&gt;</code>），在 <code>TypeScript</code> 的类型定义中，<code>=&gt;</code> 用来表示函数的定义，左边是输入类型，需要用括号括起来，右边是输出类型</p>
<h4 id="使用接口"><a href="#使用接口" class="headerlink" title="使用接口"></a>使用接口</h4><p>我们也可以使用接口的方式来定义一个函数需要符合的结构</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">interface</span> SearchFunc &#123;</span><br><span class="line">  (source: <span class="hljs-built_in">string</span>, subString: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">boolean</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">let</span> mySearch: SearchFunc = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">source: <span class="hljs-built_in">string</span>, subString: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">boolean</span> </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">return</span> source.search(subString) !== <span class="hljs-number">-1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>采用函数表达式定义函数的方式时，对等号左侧进行类型限制，可以保证以后对函数名赋值时保证参数个数、参数类型、返回值类型不变</p>
<h4 id="可选参数"><a href="#可选参数" class="headerlink" title="可选参数"></a>可选参数</h4><p>与接口中的可选属性类似，我们用 <code>?</code> 来表示可选的参数</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildName</span>(<span class="hljs-params">firstName: <span class="hljs-built_in">string</span>, lastName?: <span class="hljs-built_in">string</span></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">if</span> (lastName) &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> firstName + <span class="hljs-string">' '</span> + lastName</span><br><span class="line">  &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> firstName</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">let</span> man1 = buildName(<span class="hljs-string">'zhangsan'</span>, <span class="hljs-string">'lisi'</span>)</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">let</span> man2 = buildName(<span class="hljs-string">'zhangsan'</span>)</span><br></pre></td></tr></table></figure>

<p>不过需要注意的是，可选参数必须接在必需参数后面，也就是说可选参数后面不允许再出现必需参数了</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// ❌</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildName</span>(<span class="hljs-params">firstName?: <span class="hljs-built_in">string</span>, lastName: <span class="hljs-built_in">string</span></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">if</span> (lastName) &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> firstName + <span class="hljs-string">' '</span> + lastName</span><br><span class="line">  &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> firstName</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="默认值"><a href="#默认值" class="headerlink" title="默认值"></a>默认值</h4><p>在 <code>ES6</code> 中，我们允许给函数的参数添加默认值，<code>TypeScript</code> 会将添加了默认值的参数识别为可选参数</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildName</span>(<span class="hljs-params">firstName: <span class="hljs-built_in">string</span>, lastName: <span class="hljs-built_in">string</span> = 'lisi'</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">return</span> firstName + <span class="hljs-string">' '</span> + lastName</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">let</span> man1 = buildName(<span class="hljs-string">'zhangsan'</span>, <span class="hljs-string">'wangwu'</span>)</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">let</span> man2 = buildName(<span class="hljs-string">'zhangsan'</span>)</span><br></pre></td></tr></table></figure>

<p>但是需要注意一种情况，那就是我们在解构一个函数的时候，即给变量声明类型的同时又给变量设置默认值的情况，如下</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// ❌</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f</span>(<span class="hljs-params">&#123; x: <span class="hljs-built_in">number</span> &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-built_in">console</span>.log(x)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如上，在这种情况下，编辑器会提示我们找不到名称 <code>x</code>，针对于这种情况，我们可以像下面这样来进行处理</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// ✅</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f</span>(<span class="hljs-params">&#123; x &#125;: &#123; x: <span class="hljs-built_in">number</span> &#125; = &#123; x: 0 &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-built_in">console</span>.log(x)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="剩余参数"><a href="#剩余参数" class="headerlink" title="剩余参数"></a>剩余参数</h4><p>在 <code>ES6</code> 中，我们可以使用 <code>...rest</code> 的方式获取函数中的剩余参数（<code>rest</code> 参数）</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">push</span>(<span class="hljs-params">array, ...items</span>) </span>&#123;</span><br><span class="line">  items.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>&#123;</span><br><span class="line">    array.push(item)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">let</span> arr = []</span><br><span class="line"></span><br><span class="line">push(arr, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)</span><br></pre></td></tr></table></figure>

<p>事实上，<code>items</code> 是一个数组，所以我们可以用数组的类型来定义它</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">push</span>(<span class="hljs-params">array: <span class="hljs-built_in">number</span>[], ...items: <span class="hljs-built_in">number</span>[]</span>) </span>&#123;</span><br><span class="line">  items.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>&#123;</span><br><span class="line">    array.push(item)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">let</span> arr = []</span><br><span class="line"></span><br><span class="line">push(arr, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)</span><br></pre></td></tr></table></figure>

<p>这里需要注意的是，<code>rest</code> 参数同可选参数一样，只能是最后一个参数</p>
<h4 id="重载"><a href="#重载" class="headerlink" title="重载"></a>重载</h4><p>在 <code>Java</code> 等面向对象语言当中的函数重载，指的是两个或者两个以上的同名函数，参数类型不同或者参数个数不同，它的好处是不需要为功能相似的函数起不同的名称，而在 <code>TypeScript</code> 当中，表现为给同一个函数提供多个函数类型定义，适用于接收不同的参数和返回不同结果的情况</p>
<p><code>TypeScript</code> 在实现函数重载的时候，要求定义一系列的函数声明，在类型最宽泛的版本中实现重载（前面的是函数声明，目的是约束参数类型和个数，最后的函数实现是重载，表示要遵循前面的函数声明，一般在最后的函数实现时用 <code>any</code> 类型），不过函数重载在实际应用中使用的比较少，一般会用联合类型或泛型代替，并且函数重载的声明只用于类型检查阶段，在编译后会被删除</p>
<p><code>TypeScript</code> 编译器在处理重载的时候，会去查询函数申明列表，从上至下直到匹配成功为止，所以要把最容易匹配的类型写到最前面</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">attr</span>(<span class="hljs-params">val: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">string</span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">attr</span>(<span class="hljs-params">val: <span class="hljs-built_in">number</span></span>): <span class="hljs-title">number</span></span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-function">// 前面两行是函数申明，这一行是实现函数重载</span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-function"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">attr</span>(<span class="hljs-params">val: <span class="hljs-built_in">any</span></span>): <span class="hljs-title">any</span> </span>&#123;</span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-function">  <span class="hljs-title">if</span> (<span class="hljs-params"><span class="hljs-keyword">typeof</span> val === '<span class="hljs-built_in">string</span>'</span>) </span>&#123;</span></span><br><span class="line"><span class="hljs-function">    <span class="hljs-title">return</span> <span class="hljs-title">val</span></span></span><br><span class="line"><span class="hljs-function">  &#125; <span class="hljs-title">else</span> <span class="hljs-title">if</span> (<span class="hljs-params"><span class="hljs-keyword">typeof</span> val === '<span class="hljs-built_in">number</span>'</span>) </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> val</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">attr(<span class="hljs-string">'aaa'</span>)</span><br><span class="line">attr(<span class="hljs-number">666</span>)</span><br></pre></td></tr></table></figure>

<p>上面的写法声明完函数后，必须实现函数重载，也可以『只声明函数』</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// 后写的接口中的函数声明优先级高</span></span><br><span class="line"><span class="hljs-keyword">interface</span> Cloner111 &#123;</span><br><span class="line">  clone(animal: Animal): Animal</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">interface</span> Cloner111 &#123;</span><br><span class="line">  clone(animal: Sheep): Sheep</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">interface</span> Cloner111 &#123;</span><br><span class="line">  clone(animal: Dog): Dog</span><br><span class="line">  clone(animal: Cat): Cat</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// ==&gt; 同名接口会合并</span></span><br><span class="line"><span class="hljs-comment">// 后写的接口中的函数声明优先级高</span></span><br><span class="line"><span class="hljs-keyword">interface</span> Cloner111 &#123;</span><br><span class="line">  clone(animal: Dog): Dog</span><br><span class="line">  clone(animal: Cat): Cat</span><br><span class="line">  clone(animal: Sheep): Sheep</span><br><span class="line">  clone(animal: Animal): Animal</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">interface</span> Cloner222 &#123;</span><br><span class="line">  <span class="hljs-comment">// 接口内部按书写的顺序来排，先写的优先级高</span></span><br><span class="line">  clone(animal: Dog): Dog</span><br><span class="line">  clone(animal: Cat): Cat</span><br><span class="line">  clone(animal: Sheep): Sheep</span><br><span class="line">  clone(animal: Animal): Animal</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="声明合并"><a href="#声明合并" class="headerlink" title="声明合并"></a>声明合并</h4><p>这里既然提及到了同名接口合并，我们就再来扩展一些，其实这也就是所谓的『声明合并』，不光是函数，在接口当中也是可以进行合并的，如果定义了两个相同名字的函数、接口或类，那么它们将会合并成一个类型，如下</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">interface</span> Alarm &#123;</span><br><span class="line">  price: <span class="hljs-built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">interface</span> Alarm &#123;</span><br><span class="line">  weight: <span class="hljs-built_in">number</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面的示例相当于</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">interface</span> Alarm &#123;</span><br><span class="line">  price: <span class="hljs-built_in">number</span>;</span><br><span class="line">  weight: <span class="hljs-built_in">number</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但是需要注意的是，合并的属性的类型必须是唯一的</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">interface</span> Alarm &#123;</span><br><span class="line">  price: <span class="hljs-built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">interface</span> Alarm &#123;</span><br><span class="line">  price: <span class="hljs-built_in">number</span>;</span><br><span class="line">  weight: <span class="hljs-built_in">number</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面示例当中虽然字段 <code>price</code> 重复了，但是类型都是 <code>number</code>，所以不会报错，而下面这个示例则会编译错误</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">interface</span> Alarm &#123;</span><br><span class="line">  price: <span class="hljs-built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">interface</span> Alarm &#123;</span><br><span class="line">  price: <span class="hljs-built_in">string</span>;  <span class="hljs-comment">// ❌</span></span><br><span class="line">  weight: <span class="hljs-built_in">number</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>因为上面示例当中需要合并的类型不一致，所以报错了，另外接口中方法的合并，与函数的合并一样</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">interface</span> Alarm &#123;</span><br><span class="line">  price: <span class="hljs-built_in">number</span>;</span><br><span class="line">  alert(s: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">interface</span> Alarm &#123;</span><br><span class="line">  weight: <span class="hljs-built_in">number</span>;</span><br><span class="line">  alert(s: <span class="hljs-built_in">string</span>, n: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">string</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>相当于</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">interface</span> Alarm &#123;</span><br><span class="line">  price: <span class="hljs-built_in">number</span>;</span><br><span class="line">  weight: <span class="hljs-built_in">number</span>;</span><br><span class="line">  alert(s: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">string</span>;</span><br><span class="line">  alert(s: <span class="hljs-built_in">string</span>, n: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">string</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="重载与重写"><a href="#重载与重写" class="headerlink" title="重载与重写"></a>重载与重写</h2><p>最后我们再来看一个可能会与重载（<code>overload</code>）弄混淆的概念，那就是重写（<code>override</code>），这里需要注意区分两者之间的差异</p>
<ul>
<li>重写是指子类重写『继承』自父类中的方法，虽然 <code>TypeScript</code> 和 <code>Java</code> 相似，但是 <code>TypeScript</code> 中的继承本质上还是 <code>JavaScript</code> 中的『继承』机制（也就是原型链机制）</li>
<li>而重载是指为同一个函数提供多个类型定义</li>
</ul>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">class</span> Animal &#123;</span><br><span class="line">  speak(word: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">string</span> &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-string">'动作叫'</span> + word</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">class</span> Cat <span class="hljs-keyword">extends</span> Animal &#123;</span><br><span class="line">  speak(word: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">string</span> &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-string">'猫叫'</span> + word</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">let</span> cat = <span class="hljs-keyword">new</span> Cat()</span><br><span class="line"></span><br><span class="line">cat.speak(<span class="hljs-string">'hello'</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">double</span>(<span class="hljs-params">val: <span class="hljs-built_in">number</span></span>): <span class="hljs-title">number</span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">double</span>(<span class="hljs-params">val: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">string</span></span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-function"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">double</span>(<span class="hljs-params">val: <span class="hljs-built_in">any</span></span>): <span class="hljs-title">any</span> </span>&#123;</span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-function">  <span class="hljs-title">if</span> (<span class="hljs-params"><span class="hljs-keyword">typeof</span> val == '<span class="hljs-built_in">number</span>'</span>) </span>&#123;</span></span><br><span class="line"><span class="hljs-function">    <span class="hljs-title">return</span> <span class="hljs-title">val</span> * 2</span></span><br><span class="line"><span class="hljs-function">  &#125;</span></span><br><span class="line"><span class="hljs-function">  <span class="hljs-title">return</span> <span class="hljs-title">val</span> + <span class="hljs-title">val</span></span></span><br><span class="line"><span class="hljs-function">&#125;</span></span><br><span class="line"><span class="hljs-function"></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-title">let</span> <span class="hljs-title">r</span> = <span class="hljs-title">double</span>(<span class="hljs-params">1</span>)</span></span><br><span class="line"><span class="hljs-function"></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-title">console</span>.<span class="hljs-title">log</span>(<span class="hljs-params">r</span>)</span></span><br></pre></td></tr></table></figure>

<h2 id="继承与多态"><a href="#继承与多态" class="headerlink" title="继承与多态"></a>继承与多态</h2><p>既然提到了继承，那我们就再来看一个与其十分类似的概念，那就是多态</p>
<ul>
<li>继承，子类继承父类，子类除了拥有父类的所有特性外，还有一些更具体的特性</li>
<li>多态，由继承而产生了相关的不同的类，对同一个方法可以有不同的响应</li>
</ul>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">class</span> Animal &#123;</span><br><span class="line">  speak(word: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">string</span> &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-string">'Animal: '</span> + word</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">class</span> Cat <span class="hljs-keyword">extends</span> Animal &#123;</span><br><span class="line">  speak(word: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">string</span> &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-string">'Cat:'</span> + word</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">class</span> Dog <span class="hljs-keyword">extends</span> Animal &#123;</span><br><span class="line">  speak(word: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">string</span> &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-string">'Dog:'</span> + word</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">let</span> cat = <span class="hljs-keyword">new</span> Cat()</span><br><span class="line">cat.speak(<span class="hljs-string">'hello'</span>)</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">let</span> dog = <span class="hljs-keyword">new</span> Dog()</span><br><span class="line">dog.speak(<span class="hljs-string">'hello'</span>)</span><br></pre></td></tr></table></figure>

<h2 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h2><p>我们在上面的章节当中已经简单介绍过了可选属性和可选参数相关内容，在本小节当中我们再来稍微深入一些，来了解一些 <code>TypeScript</code> 当中的运算符</p>
<h4 id="运算符-1"><a href="#运算符-1" class="headerlink" title="?. 运算符"></a>?. 运算符</h4><p><code>TypeScript 3.7</code> 实现了『可选链』（<code>Optional Chaining</code>）的功能，有了可选链后，我们编写代码时如果遇到 <code>null</code> 或 <code>undefined</code> 就可以立即停止某些表达式的运行，可选链的核心是新的 <code>?.</code> 运算符</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">a?.b</span><br><span class="line"><span class="hljs-comment">// 相当于 a == null ? undefined : a.b</span></span><br><span class="line"><span class="hljs-comment">// 如果 a 是 null/undefined，那么返回 undefined，否则返回 a.b 的值</span></span><br><span class="line"></span><br><span class="line">a?.[x]</span><br><span class="line"><span class="hljs-comment">// 相当于 a == null ? undefined : a[x]</span></span><br><span class="line"><span class="hljs-comment">// 如果 a 是 null/undefined，那么返回 undefined，否则返回 a[x] 的值</span></span><br><span class="line"></span><br><span class="line">a?.b()</span><br><span class="line"><span class="hljs-comment">// 相当于a == null ? undefined : a.b()</span></span><br><span class="line"><span class="hljs-comment">// 如果 a 是 null/undefined，那么返回 undefined</span></span><br><span class="line"><span class="hljs-comment">// 如果 a.b 不是函数的话，会抛类型错误异常，否则计算 a.b() 的结果</span></span><br></pre></td></tr></table></figure>

<p>下面我们通过一个可选的属性访问的详细示例例子来进行了解</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">const</span> val = a?.b</span><br></pre></td></tr></table></figure>

<p>为了更好的理解，我们可以看一下上面示例对应编译生成的 <code>ES5</code> 代码</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">var</span> val = a === <span class="hljs-literal">null</span> || a === <span class="hljs-built_in">void</span> <span class="hljs-number">0</span> ? <span class="hljs-built_in">void</span> <span class="hljs-number">0</span> : a.b</span><br></pre></td></tr></table></figure>

<p>上述的代码会自动检查对象 <code>a</code> 是否为 <code>null</code> 或 <code>undefined</code>，如果是的话就立即返回 <code>undefined</code>，这样就可以立即停止某些表达式的运行，所以我们可以利用 <code>?.</code> 来替代很多使用 <code>&amp;&amp;</code> 执行的空检查代码</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">if</span> (a &amp;&amp; a.b) &#123; &#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// 等同于 ==&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">if</span> (a?.b) &#123; &#125;</span><br></pre></td></tr></table></figure>

<p>而 <code>if (a?.b) { }</code> 编译后的 <code>ES</code> 代码是下面这样的</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">if</span> (</span><br><span class="line">  a === <span class="hljs-literal">null</span> || a === <span class="hljs-built_in">void</span> <span class="hljs-number">0</span></span><br><span class="line">    ? <span class="hljs-built_in">void</span> <span class="hljs-number">0</span> : a.b) &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但需要注意的是，<code>?.</code> 与 <code>&amp;&amp;</code> 运算符行为略有不同，<code>&amp;&amp;</code> 专门用于检测 <code>falsy</code> 值，比如空字符串、<code>0</code>、<code>NaN</code>、<code>null</code> 和 <code>false</code> 等，而 <code>?.</code> 只会验证对象是否为 <code>null</code> 或 <code>undefined</code>，对于 <code>0</code> 或空字符串来说，并不会出现所谓的『短路』</p>
<p>可选链除了支持可选属性的访问之外，它还支持可选元素的访问，它的行为类似于可选属性的访问，只是可选元素的访问允许我们访问非标识符的属性，比如任意字符串、数字索引和 <code>Symbol</code></p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">tryGetArrayElement</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">arr?: T[], index: <span class="hljs-built_in">number</span> = 0</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">return</span> arr?.[index]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以上代码经过编译后会生成以下 <code>ES5</code> 代码</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">'use strict'</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">tryGetArrayElement</span>(<span class="hljs-params">arr, index</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">if</span> (index === <span class="hljs-built_in">void</span> <span class="hljs-number">0</span>) &#123; index = <span class="hljs-number">0</span> &#125;</span><br><span class="line">  <span class="hljs-keyword">return</span> arr === <span class="hljs-literal">null</span> || arr === <span class="hljs-built_in">void</span> <span class="hljs-number">0</span> ? <span class="hljs-built_in">void</span> <span class="hljs-number">0</span> : arr[index]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>通过观察生成的 <code>ES5</code> 代码，很明显在 <code>tryGetArrayElement</code> 方法中会自动检测输入参数 <code>arr</code> 的值是否为 <code>null</code> 或 <code>undefined</code>，从而保证了我们代码的健壮性</p>
<p>另外，当我们尝试调用一个可能不存在的方法时也可以使用可选链，使用可选链可以使表达式自动返回 <code>undefined</code> 而不是抛出一个异常，比如</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">let</span> result = obj.customMethod?.()</span><br></pre></td></tr></table></figure>

<p>该 <code>TypeScript</code> 代码编译生成的 <code>ES5</code> 代码如下</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">var</span> result = (_a = obj.customMethod) === <span class="hljs-literal">null</span></span><br><span class="line">  || _a === <span class="hljs-built_in">void</span> <span class="hljs-number">0</span> ? <span class="hljs-built_in">void</span> <span class="hljs-number">0</span> : _a.call(obj)</span><br></pre></td></tr></table></figure>

<p>另外在使用可选调用的时候，我们要注意以下两个注意事项</p>
<ul>
<li>如果存在一个属性名且该属性名对应的值不是函数类型使用 <code>?.</code> 仍然会产生一个 <code>TypeError</code> 异常</li>
<li>可选链的运算行为被局限在属性的访问、调用以及元素的访问，因为它不会沿伸到后续的表达式中，也就是说可选调用不会阻止 <code>a?.b / someMethod()</code> 表达式中的除法运算或 <code>someMethod</code> 的方法调用</li>
</ul>
<h4 id="运算符-2"><a href="#运算符-2" class="headerlink" title="?? 运算符"></a>?? 运算符</h4><p>在 <code>TypeScript 3.7</code> 版本中除了引入了前面介绍的可选链 <code>?.</code> 之外，也引入了一个新的逻辑运算符，那就是『空值合并运算符（<code>??</code>）』，当左侧操作数为 <code>null</code> 或 <code>undefined</code> 时，其返回右侧的操作数，否则返回左侧的操作数</p>
<p>与逻辑或 <code>||</code> 运算符不同，逻辑或会在左操作数为 <code>falsy</code> 值时返回右侧操作数，也就是说如果你使用 <code>||</code> 来为某些变量设置默认的值时，你可能会遇到意料之外的行为，比如为 <code>falsy</code> 值（<code>&#39;&#39;</code>、<code>NaN</code> 或 <code>0</code>）时，下面来看一个具体的示例</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">const</span> foo = <span class="hljs-literal">null</span> ?? <span class="hljs-string">'default string'</span></span><br><span class="line"><span class="hljs-built_in">console</span>.log(foo)  <span class="hljs-comment">// =&gt; default string</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">const</span> baz = <span class="hljs-number">0</span> ?? <span class="hljs-number">42</span></span><br><span class="line"><span class="hljs-built_in">console</span>.log(baz)  <span class="hljs-comment">// =&gt; 0</span></span><br></pre></td></tr></table></figure>

<p>以上 <code>TypeScript</code> 代码经过编译后，会生成以下 <code>ES5</code> 代码</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">'use strict'</span></span><br><span class="line"><span class="hljs-keyword">var</span> _a, _b</span><br><span class="line"><span class="hljs-keyword">var</span> foo = (_a = <span class="hljs-literal">null</span>) !== <span class="hljs-literal">null</span> &amp;&amp; _a !== <span class="hljs-built_in">void</span> <span class="hljs-number">0</span> ? _a : <span class="hljs-string">'default string'</span></span><br><span class="line"><span class="hljs-built_in">console</span>.log(foo)  <span class="hljs-comment">// =&gt; default string</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">var</span> baz = (_b = <span class="hljs-number">0</span>) !== <span class="hljs-literal">null</span> &amp;&amp; _b !== <span class="hljs-built_in">void</span> <span class="hljs-number">0</span> ? _b : <span class="hljs-number">42</span></span><br><span class="line"><span class="hljs-built_in">console</span>.log(baz)  <span class="hljs-comment">// =&gt; 0</span></span><br></pre></td></tr></table></figure>

<p>通过观察以上代码，我们更加直观的了解到，空值合并运算符是如何解决前面 <code>||</code> 运算符存在的潜在问题，下面我们来看看空值合并运算符的特性和使用时的一些注意事项</p>
<ul>
<li>短路</li>
</ul>
<p>当空值合并运算符的左表达式不为 <code>null</code> 或 <code>undefined</code> 时，不会对右表达式进行求值</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">A</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'A was called'</span>)</span><br><span class="line">  <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">B</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'B was called'</span>)</span><br><span class="line">  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">C</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'C was called'</span>)</span><br><span class="line">  <span class="hljs-keyword">return</span> <span class="hljs-string">'foo'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">A() ?? C()</span><br><span class="line">B() ?? C()</span><br></pre></td></tr></table></figure>

<p>上述代码运行后，控制台会输出以下结果</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">A was called </span><br><span class="line">C was called </span><br><span class="line">foo </span><br><span class="line">B was called </span><br><span class="line"><span class="hljs-literal">false</span></span><br></pre></td></tr></table></figure>

<ul>
<li>不能与 <code>&amp;&amp;</code> 或 <code>||</code> 操作符共用</li>
</ul>
<p>若空值合并运算符 <code>??</code> 直接与 <code>AND</code>（<code>&amp;&amp;</code>）和 <code>OR</code>（<code>||</code>）操作符组合使用 <code>??</code> 是不行的，这种情况下会抛出 <code>SyntaxError</code></p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// '||' and '??' operations cannot be mixed without parentheses.(5076)</span></span><br><span class="line"><span class="hljs-literal">null</span> || <span class="hljs-literal">undefined</span> ?? <span class="hljs-string">'foo'</span> <span class="hljs-comment">// raises a SyntaxError</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// '&amp;&amp;' and '??' operations cannot be mixed without parentheses.(5076)</span></span><br><span class="line"><span class="hljs-literal">true</span> &amp;&amp; <span class="hljs-literal">undefined</span> ?? <span class="hljs-string">'foo'</span> <span class="hljs-comment">// raises a SyntaxError</span></span><br></pre></td></tr></table></figure>

<p>但当使用括号来显式表明优先级时是可行的</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="hljs-literal">null</span> || <span class="hljs-literal">undefined</span>) ?? <span class="hljs-string">'foo'</span> <span class="hljs-comment">// =&gt; foo</span></span><br></pre></td></tr></table></figure>

<ul>
<li>与可选链操作符 <code>?.</code> 的关系</li>
</ul>
<p>空值合并运算符针对 <code>undefined</code> 与 <code>null</code> 这两个值，可选链式操作符 <code>?.</code> 也是如此，可选链式操作符对于访问属性可能为 <code>undefined</code> 与 <code>null</code> 的对象时非常有用</p>
<figure class="highlight ts hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">interface</span> Customer &#123;</span><br><span class="line">  name: <span class="hljs-built_in">string</span></span><br><span class="line">  city?: <span class="hljs-built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">let</span> customer: Customer = &#123;</span><br><span class="line">  name: <span class="hljs-string">'zhangsan'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">let</span> customerCity = customer?.city ?? <span class="hljs-string">'Unknown city'</span></span><br><span class="line"></span><br><span class="line">customerCity <span class="hljs-comment">// =&gt; Unknown city</span></span><br></pre></td></tr></table></figure>

<p>前面我们已经介绍了空值合并运算符的应用场景和使用时的一些注意事项，该运算符不仅可以在 <code>TypeScript 3.7</code> 以上版本中使用，当然也可以借助 <code>Babel</code> 来在 <code>JavaScript</code> 的环境中使用它，<code>Babel 7.8.0</code> 版本开始支持空值合并运算符</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>以上就是我们梳理的一些 <code>TypeScript</code> 当中的基础内容，在下一章 <a href="https://heptaluan.github.io/2021/01/01/JavaScript/57/" target="_blank" rel="noopener">深入 TypeScript</a> 当中我们会接着来了解一些 <code>TypeScript</code> 当中的进阶内容，比如元祖，枚举，类等</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a href="https://jkchao.github.io/typescript-book-chinese/" target="_blank" rel="noopener">深入理解 TypeScript</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" rel="noopener">官方手册</a></li>
<li><a href="https://www.tslang.cn/docs/handbook/basic-types.html" target="_blank" rel="noopener">TypeScript 中文</a></li>
<li><a href="https://www.typescriptlang.org" target="_blank" rel="noopener">TypeScript</a></li>
</ul>

        </div>
        
        <div class="level is-size-7 is-uppercase">
            <div class="level-start">
                <div class="level-item">
                    <span class="is-size-6 has-text-grey has-mr-7">#</span>
                    <a class="has-link-grey -link" href="/tags/JavaScript/">JavaScript</a>
                </div>
            </div>
        </div>
        
        
        
    </div>
</div>





<div class="card card-transparent">
    <div class="level post-navigation is-flex-wrap is-mobile">
        
        <div class="level-start">
            <a class="level level-item has-link-grey  article-nav-prev" href="/2021/01/01/JavaScript/57/">
                <i class="level-item fa fa-chevron-left"></i>
                <span class="level-item">深入 TypeScript</span>
            </a>
        </div>
        
        
        <div class="level-end">
            <a class="level level-item has-link-grey  article-nav-next" href="/2020/12/19/React/19/">
                <span class="level-item">Fiber 架构的简单实现</span>
                <i class="level-item fa fa-chevron-right"></i>
            </a>
        </div>
        
    </div>
</div>



<div class="card">
    <div class="card-content">
        <h3 class="title is-5 has-text-weight-normal">评论</h3>
        
<div id="comment-container"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.4.1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1.4.1/dist/gitalk.min.js"></script>
<script>
    var gitalk = new Gitalk({
        clientID: '584b59de0d23cd48fbdd',
        clientSecret: '5554c9aab0a640015867806f438bd2e10f297e5a',
        id: '8ca104db4f4fe37828e67ce8ddf1a1b2',
        repo: 'gitalk',
        owner: 'heptaluan',
        admin: "heptaluan"
    })
    gitalk.render('comment-container')
</script>

    </div>
</div>
</div>
                




<div class="column is-4-tablet is-4-desktop is-3-widescreen  has-order-1 column-left ">
    
        
<div class="card widget">
    <div class="card-content">
        <nav class="level">
            <div class="level-item has-text-centered">
                <div>
                    
                        <figure class="avatar image is-128x128 has-mb-6">
                            <img class="is-rounded" src="https://gitee.com/heptaluan/backups/raw/master/cdn/avatar.png" alt="heptaluan">
                        </figure>
                    
                    
                    <p class="is-size-4 is-block">
                        heptaluan
                    </p>
                    
                    
                    <p class="is-size-6 is-block">
                        Torches@Aimer
                    </p>
                    
                    
                    <p class="is-size-6 is-flex is-flex-center has-text-grey">
                        <i class="fas fa-map-marker-alt has-mr-7"></i>
                        <span>WuHan China</span>
                    </p>
                    
                </div>
            </div>
        </nav>
        <!-- <nav class="level is-mobile">
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        文章
                    </p>
                    <p class="title has-text-weight-normal">
                        153
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        分类
                    </p>
                    <p class="title has-text-weight-normal">
                        8
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        标签
                    </p>
                    <p class="title has-text-weight-normal">
                        8
                    </p>
                </div>
            </div>
        </nav> -->
        <!-- <div class="level">
            <a class="level-item button is-link is-rounded" href="https://github.com/ppoffice" target="_blank">
                关注我</a>
        </div> -->
        
        
    </div>
</div>
    
        
<div class="card widget" id="toc">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                目录
            </h3>
            <ul class="menu-list"><li>
        <a class="is-flex" href="#什么是-TypeScript">
        <span class="has-mr-6">1</span>
        <span>什么是 TypeScript</span>
        </a></li><li>
        <a class="is-flex" href="#TypeScript-基础类型">
        <span class="has-mr-6">2</span>
        <span>TypeScript 基础类型</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#布尔值">
        <span class="has-mr-6">2.1</span>
        <span>布尔值</span>
        </a></li><li>
        <a class="is-flex" href="#数值">
        <span class="has-mr-6">2.2</span>
        <span>数值</span>
        </a></li><li>
        <a class="is-flex" href="#字符串">
        <span class="has-mr-6">2.3</span>
        <span>字符串</span>
        </a></li><li>
        <a class="is-flex" href="#任意值">
        <span class="has-mr-6">2.4</span>
        <span>任意值</span>
        </a></li><li>
        <a class="is-flex" href="#Unknown">
        <span class="has-mr-6">2.5</span>
        <span>Unknown</span>
        </a></li><li>
        <a class="is-flex" href="#空值">
        <span class="has-mr-6">2.6</span>
        <span>空值</span>
        </a></li><li>
        <a class="is-flex" href="#Null-和-Undefined">
        <span class="has-mr-6">2.7</span>
        <span>Null 和 Undefined</span>
        </a></li><li>
        <a class="is-flex" href="#object，Object-和">
        <span class="has-mr-6">2.8</span>
        <span>object，Object 和 { }</span>
        </a></li><li>
        <a class="is-flex" href="#Never">
        <span class="has-mr-6">2.9</span>
        <span>Never</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#内置对象">
        <span class="has-mr-6">3</span>
        <span>内置对象</span>
        </a></li><li>
        <a class="is-flex" href="#TypeScript-断言">
        <span class="has-mr-6">4</span>
        <span>TypeScript 断言</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#类型断言">
        <span class="has-mr-6">4.1</span>
        <span>类型断言</span>
        </a></li><li>
        <a class="is-flex" href="#非空断言">
        <span class="has-mr-6">4.2</span>
        <span>非空断言</span>
        </a></li><li>
        <a class="is-flex" href="#确定赋值断言">
        <span class="has-mr-6">4.3</span>
        <span>确定赋值断言</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#联合类型">
        <span class="has-mr-6">5</span>
        <span>联合类型</span>
        </a></li><li>
        <a class="is-flex" href="#对象的类型（接口）">
        <span class="has-mr-6">6</span>
        <span>对象的类型（接口）</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#可选属性">
        <span class="has-mr-6">6.1</span>
        <span>可选属性</span>
        </a></li><li>
        <a class="is-flex" href="#任意属性">
        <span class="has-mr-6">6.2</span>
        <span>任意属性</span>
        </a></li><li>
        <a class="is-flex" href="#只读属性">
        <span class="has-mr-6">6.3</span>
        <span>只读属性</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#数组的类型">
        <span class="has-mr-6">7</span>
        <span>数组的类型</span>
        </a></li><li>
        <a class="is-flex" href="#函数的类型">
        <span class="has-mr-6">8</span>
        <span>函数的类型</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#使用接口">
        <span class="has-mr-6">8.1</span>
        <span>使用接口</span>
        </a></li><li>
        <a class="is-flex" href="#可选参数">
        <span class="has-mr-6">8.2</span>
        <span>可选参数</span>
        </a></li><li>
        <a class="is-flex" href="#默认值">
        <span class="has-mr-6">8.3</span>
        <span>默认值</span>
        </a></li><li>
        <a class="is-flex" href="#剩余参数">
        <span class="has-mr-6">8.4</span>
        <span>剩余参数</span>
        </a></li><li>
        <a class="is-flex" href="#重载">
        <span class="has-mr-6">8.5</span>
        <span>重载</span>
        </a></li><li>
        <a class="is-flex" href="#声明合并">
        <span class="has-mr-6">8.6</span>
        <span>声明合并</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#重载与重写">
        <span class="has-mr-6">9</span>
        <span>重载与重写</span>
        </a></li><li>
        <a class="is-flex" href="#继承与多态">
        <span class="has-mr-6">10</span>
        <span>继承与多态</span>
        </a></li><li>
        <a class="is-flex" href="#运算符">
        <span class="has-mr-6">11</span>
        <span>运算符</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#运算符-1">
        <span class="has-mr-6">11.1</span>
        <span>?. 运算符</span>
        </a></li><li>
        <a class="is-flex" href="#运算符-2">
        <span class="has-mr-6">11.2</span>
        <span>?? 运算符</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#总结">
        <span class="has-mr-6">12</span>
        <span>总结</span>
        </a></li><li>
        <a class="is-flex" href="#参考">
        <span class="has-mr-6">13</span>
        <span>参考</span>
        </a></li></ul>
        </div>
    </div>
</div>

    
        


    
        
<div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                分类
            </h3>
            <ul class="menu-list">
            <li>
        <a class="level is-marginless" href="/categories/Angular/">
            <span class="level-start">
                <span class="level-item">Angular</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">15</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/CSS/">
            <span class="level-start">
                <span class="level-item">CSS</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">14</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Essay/">
            <span class="level-start">
                <span class="level-item">Essay</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">29</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/HTTP/">
            <span class="level-start">
                <span class="level-item">HTTP</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">11</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/JavaScript/">
            <span class="level-start">
                <span class="level-item">JavaScript</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">45</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Node-js/">
            <span class="level-start">
                <span class="level-item">Node.js</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">14</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/React/">
            <span class="level-start">
                <span class="level-item">React</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">20</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Vue/">
            <span class="level-start">
                <span class="level-item">Vue</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">5</span>
            </span>
        </a></li>
            </ul>
        </div>
    </div>
</div>
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            标签云
        </h3>
        <a href="/tags/Angular/" style="font-size: 15px;">Angular</a> <a href="/tags/CSS/" style="font-size: 13.33px;">CSS</a> <a href="/tags/Essay/" style="font-size: 18.33px;">Essay</a> <a href="/tags/HTTP/" style="font-size: 11.67px;">HTTP</a> <a href="/tags/JavaScript/" style="font-size: 20px;">JavaScript</a> <a href="/tags/Node-js/" style="font-size: 13.33px;">Node.js</a> <a href="/tags/React/" style="font-size: 16.67px;">React</a> <a href="/tags/Vue/" style="font-size: 10px;">Vue</a>
    </div>
</div>

    
    
        <div class="column-right-shadow  ">
        
            
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            <a href="/tips" class="tips">
                最新文章
            </a>
        </h3>
        
        <article class="media">
            
            <a href="/2021/04/18/React/21/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="https://gitee.com/heptaluan/backups/raw/master/cdn/cover/21.webp" alt="关于 Hook 的一些总结">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2021-04-17T16:00:00.000Z">2021-04-18</time></div>
                    <a href="/2021/04/18/React/21/" class="has-link-black-ter is-size-6">关于 Hook 的一些总结</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/React/">React</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2021/03/28/React/20/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="https://gitee.com/heptaluan/backups/raw/master/cdn/cover/20.webp" alt="自定义 Hook">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2021-03-27T16:00:00.000Z">2021-03-28</time></div>
                    <a href="/2021/03/28/React/20/" class="has-link-black-ter is-size-6">自定义 Hook</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/React/">React</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2021/03/07/Vue/06/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="https://gitee.com/heptaluan/backups/raw/master/cdn/cover/06.webp" alt="Vite 的工程化流程">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2021-03-06T16:00:00.000Z">2021-03-07</time></div>
                    <a href="/2021/03/07/Vue/06/" class="has-link-black-ter is-size-6">Vite 的工程化流程</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Vue/">Vue</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2021/01/10/JavaScript/59/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="https://gitee.com/heptaluan/backups/raw/master/cdn/cover/59.webp" alt="在 React 当中使用 TypeScript">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2021-01-09T16:00:00.000Z">2021-01-10</time></div>
                    <a href="/2021/01/10/JavaScript/59/" class="has-link-black-ter is-size-6">在 React 当中使用 TypeScript</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/JavaScript/">JavaScript</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2021/01/09/JavaScript/58/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="https://gitee.com/heptaluan/backups/raw/master/cdn/cover/58.webp" alt="深入 TypeScript 当中的泛型">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2021-01-08T16:00:00.000Z">2021-01-09</time></div>
                    <a href="/2021/01/09/JavaScript/58/" class="has-link-black-ter is-size-6">深入 TypeScript 当中的泛型</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/JavaScript/">JavaScript</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            归档
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2021/04/">
                <span class="level-start">
                    <span class="level-item">四月 2021</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2021/03/">
                <span class="level-start">
                    <span class="level-item">三月 2021</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2021/01/">
                <span class="level-start">
                    <span class="level-item">一月 2021</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/10/">
                <span class="level-start">
                    <span class="level-item">十月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/09/">
                <span class="level-start">
                    <span class="level-item">九月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/08/">
                <span class="level-start">
                    <span class="level-item">八月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/07/">
                <span class="level-start">
                    <span class="level-item">七月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/06/">
                <span class="level-start">
                    <span class="level-item">六月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/05/">
                <span class="level-start">
                    <span class="level-item">五月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/04/">
                <span class="level-start">
                    <span class="level-item">四月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/03/">
                <span class="level-start">
                    <span class="level-item">三月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/02/">
                <span class="level-start">
                    <span class="level-item">二月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/01/">
                <span class="level-start">
                    <span class="level-item">一月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/10/">
                <span class="level-start">
                    <span class="level-item">十月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/09/">
                <span class="level-start">
                    <span class="level-item">九月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/08/">
                <span class="level-start">
                    <span class="level-item">八月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/07/">
                <span class="level-start">
                    <span class="level-item">七月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/06/">
                <span class="level-start">
                    <span class="level-item">六月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/05/">
                <span class="level-start">
                    <span class="level-item">五月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/04/">
                <span class="level-start">
                    <span class="level-item">四月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/03/">
                <span class="level-start">
                    <span class="level-item">三月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/02/">
                <span class="level-start">
                    <span class="level-item">二月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/01/">
                <span class="level-start">
                    <span class="level-item">一月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/10/">
                <span class="level-start">
                    <span class="level-item">十月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/09/">
                <span class="level-start">
                    <span class="level-item">九月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/08/">
                <span class="level-start">
                    <span class="level-item">八月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/07/">
                <span class="level-start">
                    <span class="level-item">七月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/06/">
                <span class="level-start">
                    <span class="level-item">六月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/05/">
                <span class="level-start">
                    <span class="level-item">五月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/04/">
                <span class="level-start">
                    <span class="level-item">四月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/03/">
                <span class="level-start">
                    <span class="level-item">三月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/02/">
                <span class="level-start">
                    <span class="level-item">二月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/01/">
                <span class="level-start">
                    <span class="level-item">一月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/10/">
                <span class="level-start">
                    <span class="level-item">十月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/09/">
                <span class="level-start">
                    <span class="level-item">九月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/08/">
                <span class="level-start">
                    <span class="level-item">八月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/07/">
                <span class="level-start">
                    <span class="level-item">七月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/06/">
                <span class="level-start">
                    <span class="level-item">六月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/05/">
                <span class="level-start">
                    <span class="level-item">五月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/04/">
                <span class="level-start">
                    <span class="level-item">四月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/03/">
                <span class="level-start">
                    <span class="level-item">三月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/01/">
                <span class="level-start">
                    <span class="level-item">一月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                标签
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Angular/">
                        <span class="tag">Angular</span>
                        <span class="tag is-grey">15</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/CSS/">
                        <span class="tag">CSS</span>
                        <span class="tag is-grey">14</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Essay/">
                        <span class="tag">Essay</span>
                        <span class="tag is-grey">29</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/HTTP/">
                        <span class="tag">HTTP</span>
                        <span class="tag is-grey">11</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/JavaScript/">
                        <span class="tag">JavaScript</span>
                        <span class="tag is-grey">45</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Node-js/">
                        <span class="tag">Node.js</span>
                        <span class="tag is-grey">14</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/React/">
                        <span class="tag">React</span>
                        <span class="tag is-grey">20</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Vue/">
                        <span class="tag">Vue</span>
                        <span class="tag is-grey">5</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
        
        </div>
    
</div>

                
            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <!-- <a class="footer-logo is-block has-mb-6" href="/">
                
                    <img src="/images/logo.svg" alt="重温 TypeScript" height="28">
                
                </a> -->
                <p class="is-size-7">
                &copy; 2016 - 2021
                Made with ✿  heptaluan&nbsp;
                
                </p>
            </div>
            <!-- <div class="level-end">
            
            </div> -->
        </div>
    </div>
</footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("zh-CN");</script>


    
    
    
    <script src="/js/animation.js"></script>
    

    
    
    
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
    <script src="/js/gallery.js" defer></script>
    

    
    

<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>


    
    
<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>

    
    

<a id="back-to-top" title="回到顶端" href="javascript:;">
    <i class="fa fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>


    
    

    
    
    
    

    
    
    
    
    
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>
    <script src="/js/clipboard.js" defer></script>
    

    
    
    


<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="想要查找什么...">
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: '文章',
                PAGES: '页面',
                CATEGORIES: '分类',
                TAGS: '标签',
                UNTITLED: '(无标题)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
</body>
</html>