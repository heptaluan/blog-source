---
title: CSS 当中的 line-height
date: 2018-12-10
categories: CSS
tags: CSS
toc: true
thumbnail: https://gitee.com/heptaluan/backups/raw/master/cdn/cover/15.jpg
---

我们在之前的章节当中介绍过了 `CSS` 当中的 [float](http://localhost:4000/2018/11/28/CSS/05/)，[display](http://localhost:4000/2018/11/29/CSS/13/) 和 [position](http://localhost:4000/2018/11/30/CSS/14/) 属性，今天我们接着上回继续来看 `CSS` 当中另一个使用比较多的的属性，那就是 `line-height`，关于它的具体内容可以参考 [CSS 2.1 规范 9.4.2 inline-formatting](http://www.ayqy.net/doc/css2-1/visuren.html#inline-formatting)

<!--more-->

行高是指行间的距离，而从规范上来说则是两行文字基线之间的距离，行高是作用在每一个行框盒子（`line-box`）上的，而行框盒子则是由内联盒子组成，因此行高与内联元素可以说是非常紧密，行高直接决定了内联元素的高度（注意，这里的内联元素不包括替换元素），对于块级元素和替换元素，行高是无法决定最终高度的，只能决定行框盒子的最小高度，那么这里就会存在几个问题了

* 基线是什么？
* 行间的距离又是什么？
* 只有两行文字才会存在两个基线，那么为什么单行文字还具有行高？
* 行框盒子与内联盒子又是什么？
* 什么是替换元素？
* 行高的取值是如何决定的？

不要急，让我们带着这些疑问慢慢往下看


## x、x-height 以及 ex

字母 `x` 在 `CSS` 里面扮演着一个很重要的角色，因为字母 `x` 的下边缘就是基线所在的位置，而 `x-height` 指的就是字母 `x` 的高度，`ex` 是一个尺寸单位，其大小是相对字母 `x` 的来计算的，即 `1ex` 就表示 `1` 个字母 `x` 的高度，如下图所示

![](https://gitee.com/heptaluan/backups/raw/master/cdn/css/15-01.png)

我们在平时的开发中很少用到 `ex`，因为 `ex` 是个相对单位，对于相对的东西，我们总是感觉很难控制，但这并不表明 `ex` 就一点用处都没有，我们可以利用 `ex` 就是一个 `x-height` 的特性来实现图标与文字的垂直居中，这样如论字体大小如何变化，都不会影响垂直居中的效果，代码如下

```css
.icon-arrow {
  display: inline-block;
  width: 20px;
  height: 1ex;
  background: url(down.png) no-repeat center;
  background-size: contain;
}
```

```html
<div>
  <span>我是一段文本</span>
  <i class="icon-arrow"></i>
</div>
```


## 行高、行距

我们在上面曾提到，line-height 指的是两行文字基线之间的距离，那么什么是基线呢？从上面的图中我们可以发现，图中标注着红线的部分，就是所谓的基线，基线（baseline），指的是一行字横排时下沿的基础线，基线并不是汉字的下端沿，而是我们之前提到的英文字母x的下端沿，那么基线之间的距离指的是什么呢？参考下图

![](https://gitee.com/heptaluan/backups/raw/master/cdn/css/15-02.png)

图中两条红线之间的距离就是行高（line-height），上一行的底线和下一行的顶线之间的距离就是行距，那么什么是行距呢？

我们可以想象一下在文字排版的时候，如果行与行之间的间距为0，则文字是会紧紧贴在一起的，因此，行距就是用来协助排版的，行距的计算为：line-height - em-box，em-box指的是1em的大小，因此行距可以表示为：line-height - font-size，假设line-height为1.5，font-size为20，则行距为： 1.5*20 - 20 = 10，则最终行距为10，而这个行距会平均作用于文字的上边和下边，但em-box我们是无法感知这个盒子在哪的，而内容区域我们则可以理解为我们选中文字后的背景色所在区域，而当字体是宋体的时候，内容区域和em-box是等高的，因此我们可以利用此揪出ex-box的藏身之处

![](https://gitee.com/heptaluan/backups/raw/master/cdn/css/15-03.png)


正是因为行距的存在，所以我们给元素设置margin值时，要减去相应的半行距值，这样才能比较精确地还原设计图



## 取值

line-height 的取值有以下这些

| 取值 | 描述 |
|-|-|
| normal | normal为line-height的默认值，但并不是一个固定的值，而是会受font-family的影响，对于“微软雅黑”，其值为1.32；而对于“宋体”，其值为1.141，由于不同操作系统，不同浏览器所使用的字体不一样，所以最终line-height的具体值会不一样，因此这个属性作用不大 |
| <数字> | 该属性的应用值是这个无单位数字<数字>乘以该元素的字体大小，计算值与指定值相同，大多数情况下，这是设置line-height的推荐方法，不会在继承时产生不确定的结果，|
| <长度> | 长度用的最多的就是px与em，em跟数字一样，都是相对于font-size来计算的，以 em 为单位的值可能会产生不确定的结果 |
| <百分比> | 与元素自身的字体大小有关，计算值是给定的百分比值乘以元素计算出的字体大小，百分比值可能会带来不确定的结果 |










## line-height

`line-height`，一般也称为行高，指的是相邻文本行基线间的距离，至于什么是基线，可以参考下图

![](https://gitee.com/heptaluan/backups/raw/master/cdn/css/01.png)


从上到下四条线分别是顶线、中线、基线、底线，那么行高是指上下文本行的基线间的垂直距离，即如上图所示中的两条红线间垂直距离（实际在数值上，行高也等于其它相同颜色间的距离）

行高 `line-height` 实际上只影响行内元素和其他行内内容，而不会直接影响块级元素，也可以为一个块级元素设置 `line-height`，但这个值只是应用到块级元素的内联内容时才会有影响，在块级元素上声明 `line-height` 会为该块级元素的内容设置一个最小行框高度



## 常用术语

如下图所示：

![](https://gitee.com/heptaluan/backups/raw/master/cdn/css/02.png)



#### 内容区

对于行内非替换元素或匿名文本某一部分，`font-size` 和 `font-family` 确定了内容区的高度，在宋体情况下，如果一个行内元素的 `font-size` 为 `15px`，则内容区的高度为 `15px`，而在其他字体情况下，内容区的高度并不等于字体大小

![](https://gitee.com/heptaluan/backups/raw/master/cdn/css/03.png)



#### 行内框

内容区加上行间距等于行内框，如果一个行内非替换元素的 `font-size` 为 `15px`，`line-height` 为 `21px`，则相差 `6px`

用户代理将这 `6` 像素一分为二，将其一半分别应用到内容区的顶部和底部，这就得到了行内框

![](https://gitee.com/heptaluan/backups/raw/master/cdn/css/04.png)

当 `line-height` 小于 `font-size` 时，行内框实际上小于内容区

![](https://gitee.com/heptaluan/backups/raw/master/cdn/css/05.png)




#### 行框

行框定义为行中最高行内框的顶端到最低行内框底端之间的距离，而且各行框的顶端挨着上一行行框的底端

![](https://gitee.com/heptaluan/backups/raw/master/cdn/css/06.png)




#### 框属性

* 内边距、外边距和边框不影响行框的高度，即不影响行高

* 行内元素的边框边界由 `font-size` 而不是 `line-height` 控制

* 外边距不会应用到行内非替换元素的顶端和底端

* `margin-left`、`padding-left`、`border-left` 应用到元素的开始处，而 `margin-right`、`padding-right`、`border-right` 应用到元素的结尾处



#### 替换元素

行内替换元素需要使用 `line-height` 值，从而在垂直对齐时能正确地定位元素，因为 `vertical-align` 的百分数值是相对于元素的 `line-height` 来计算的，对于垂直对齐来说，图像本身的高度无关紧要，关键是 `line-height` 的值

默认地，行内替换元素位于基线上，如果向替换元素增加下内边距、外边距或边框，内容区会上移

替换元素的基线是正常流中最后一个行框的基线，除非该替换元素内容为空或者本身的 `overflow` 属性值不是 `visible`，这种情况下基线是 `margin` 底边缘



## 150% 与 1.5 的区别

主要区别如下：

* 父元素设置 `line-height: 1.5` 会直接继承给子元素

  * 子元素根据自己的 `font-size` 再去计算子元素自己的 `line-height`
  
  * 实际行高 = `1.5 * 子元素的 font-size`

* 父元素设置 `line-height: 150%` 是会先计算好 `line-height` 值

  * 然后把这个计算值给子元素继承，子元素继承拿到的就是最终的值了
  
  * 此时子元素设置 `font-size` 对其 `line-height` 是无影响的




## line-height 与图片的表现

`inline` 水平元素 `vertical-align` 默认基线对齐

比如图片和文字在一排排列，这个时候如果字体的 `line-height` 过大，而图片又是根据文字的基线来排列的，这个时候图片底部便会出现间距



#### 例如消除图片底部间距

这个问题和之前的 `inline-block` 底部会有空隙的问题是一致的

解决办法一种就是将图片块状化，这时就无基线对齐，因为 `vertical-align` 属性只对内联，内联块状元素有效

另一种就是使用 `vertical-align：bottom` 来将图片的底线对齐，或者减小行高（这时基线的位置会上移）






















## line-height的应用
大部分时候，我们设置line-height，都是为了垂直居中对齐，但这里的居中，只能说是近似居中，从上面的图可以看出：行距是上下均分的，但是内容区域不是，一般来说，文字都是偏下的，我们平时设置字体一般都是12-20像素，这么小的像素值，给出line-height值后，由于上下相差不大，因此感觉上是垂直居中的，line-height除了可以作为单行文本的居中对齐外，多行文本也是可以的，代码如下：


.box {
    width: 400px;
    line-height: 400px;
    padding: 0 10px;
    border: 1px solid #ccc;

}
.text {
    display: inline-block;
    line-height: 1.3;
    font-size: 14px;
    vertical-align: middle;
}

<p class="box">
    <span class="text">这是一段很长很长的文字，这是一段很长很长的文字，这是一段很长很长的文字，这是一段很长很长的文字，这是一段很长很长的文字</span>
</p>

