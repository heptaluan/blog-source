---
title: 计算机网络知识梳理
date: 2020-08-08
categories: HTTP
tags: HTTP
toc: true
thumbnail: https://gitee.com/heptaluan/backups/raw/master/cdn/cover/08.jpg
---

最近在梳理计算机网络相关知识，在这里大致的整理一下，其他相关内容可以参考 [前端知识体系整理](https://heptaluan.github.io/target/)，本章大致内容有下面这些

<!--more-->

* `HTTP/HTTPS`
  * `HTTP` 概述
    * `IP`、`TCP` 和 `DNS`
    * `TCP` 和 `UDP` 的比较
  * `HTTP` 协议
  * `HTTP` 报文
  * `HTTP` 首部字段
  * `HTTP` 报文实体
  * `HTTP` 状态码
  * 代理、缓存、网关、隧道
  * `HTTPS`
  * 用户认证
  * 追加协议
    * `HTTP/2`
    * `HTTP/3`
  * 安全
* `TCP/IP`
* 域名发散与收敛




## HTTP/HTTPS

因为内容特别特别多，所以单开一章详细来进行介绍，更多内容可见 [什么是 HTTP 协议](https://heptaluan.github.io/2020/09/01/HTTP/10/)，主要内容包括

* `HTTP` 概述
  * 发展历程
  * 网络基础 `TCP/IP`
  * 网络模型划分/分层管理/通信传输流
  * `IP`、`TCP` 和 `DNS`
  * `UDP`
  * `TCP` 和 `UDP` 的比较
* `HTTP` 协议
  * `HTTP` 工作流程
  * `HTTP` 协议特点
* `HTTP` 报文
  * 请求报文
  * 响应报文
* `HTTP` 首部字段
  * 首部字段结构
  * 首部字段类型（通用首部字段/请求首部字段/响应首部字段/实体首部字段）
* `HTTP` 报文实体
  * `HTTP` 报文实体概述
  * 内容编码/传输编码/分块编码
  * 多部分媒体类型/范围请求/内容协商
* `HTTP` 状态码
* 代理、缓存、网关、隧道
* `HTTPS`
  * `HTTP` 的缺点
  * `HTTPS` 是如何进行加密的
* 用户认证
  * `BASIC` 认证
  * `DIGEST` 认证
  * `SSL` 客户端认证
  * 基于表单认证
* 追加协议
  * `SPDY/WebSocket/WebDAV`
  * `HTTP/2`
    * 连接、流和帧
    * 消息/流量控制/请求优先级
    * 多路复用/首部压缩/服务端推送
  * `HTTP/3`
    * `RTT`
    * `QUIC` 协议
    * 零 `RTT` 建立连接
    * 连接迁移/队头阻塞/多路复用/拥塞控制/流量控制
* 安全
  * 输出值转义引发的安全漏洞
  * 设计上的缺陷引发的安全漏洞
  * 会话管理疏忽引发的安全漏洞



## TCP/IP 协议

* 待整理





<!-- **HTTP 1.0/2.0/3.0** -->

<!-- 我们先来看 `1.0` 和 `1.1` 有什么区别

* 长连接，`HTTP/1.1` 支持长连接和请求的流水线，在一个 `TCP` 连接上可以传送多个 `HTTP` 请求，避免了因为多次建立 `TCP` 连接的时间消耗和延时
* 缓存处理，`HTTP/1.1` 引入 `Entity tag/If-Unmodified-Since/If-Match/If-None-Match` 等新的请求头来控制缓存，详见 [浏览器缓存机制](https://heptaluan.github.io/2017/12/12/HTTP/04/)
* 带宽优化及网络连接的使用，`HTTP1.1` 则在请求头引入了 `range` 头域，支持断点续传功能
* `Host` 头处理，在 `HTTP/1.0` 中认为每台服务器都有唯一的 `IP` 地址，但随着虚拟主机技术的发展，多个主机共享一个 `IP` 地址愈发普遍，`HTTP1.1` 的请求消息和响应消息都应支持 `Host` 头域，且请求消息中如果没有 `Host` 头域会 `400` 错误

关于 `2.0`

* 多路复用，即多个请求都通过一个 `TCP` 连接并发地完成
* 服务端推送，服务端能够主动把资源推送给客户端
* 新的二进制格式，`HTTP/2` 采用二进制格式传输数据，相比于 `HTTP/1.1` 的文本格式，二进制格式具有更好的解析性和拓展性
* `header` 压缩，`HTTP/2` 压缩消息头，减少了传输数据的大小

这里我们详细介绍一下多路复用，其实 `HTTP/2` 解决的问题，就是 `HTTP/1.1` 存在的问题

* `TCP` 慢启动，`TCP` 连接建立后，会经历一个先慢后快的发送过程，就像汽车启动一般，如果我们的网页文件（`HTML/JavaScript/CSS` 等）都经过一次慢启动，对性能是不小的损耗，另外慢启动是 `TCP` 为了减少网络拥塞的一种策略，我们是没有办法改变的
* 多条 `TCP` 连接竞争带宽，如果同时建立多条 `TCP` 连接，当带宽不足时就会竞争带宽，影响关键资源的下载
* `HTTP/1.1` 队头阻塞，尽管 `HTTP/1.1` 长链接可以通过一个 `TCP` 连接传输多个请求，但同一时刻只能处理一个请求，当前请求未结束前，其他请求只能处于阻塞状态

为了解决以上几个问题，`HTTP/2` 一个域名只使用一个 `TCP` 连接来传输数据，而且请求直接是并行的、非阻塞的，这就是多路复用，它的实现原理是，`HTTP/2` 引入了一个二进制分帧层，客户端和服务端进行传输时，数据会先经过二进制分帧层处理，转化为一个个带有请求 `ID` 的帧，这些帧在传输完成后根据 `ID` 组合成对应的数据

关于 `3.0`

尽管 `HTTP/2` 解决了很多 `HTTP/1.1` 的问题，但 `HTTP/2` 仍然存在一些缺陷，这些缺陷并不是来自于 `HTTP/2` 协议本身，而是来源于底层的 `TCP` 协议，我们知道 `TCP` 链接是可靠的连接，如果出现了丢包，那么整个连接都要等待重传，`HTTP/1.1` 可以同时使用六个 `TCP` 连接，一个阻塞另外五个还能工作，但 `HTTP/2` 只有一个 `TCP` 连接，阻塞的问题便被放大了，由于 `TCP` 协议已经被广泛使用，我们很难直接修改 `TCP` 协议，基于此，`HTTP/3` 选择了一个折衷的方法，`UDP` 协议，`HTTP/2` 在 `UDP` 的基础上实现多路复用、`TLS` 加密、流量控制、丢包重传等功能 -->


<!-- **HTTP 和 HTTPS 有何区别** -->

<!-- * `HTTPS` 使用 `443` 端口，而 `HTTP` 使用 `80`
* `HTTPS` 需要申请证书
* `HTTP` 是超文本传输协议，是明文传输，`HTTPS` 是经过 `SSL` 加密的协议，传输更安全
* `HTTPS` 比 `HTTP` 慢，因为 `HTTPS` 除了 `TCP` 握手的三个包，还要加上 `SSL` 握手的九个包 -->


<!-- **HTTPS 是如何进行加密的**

详细内容可以见 [HTTPS 是如何进行加密的](https://heptaluan.github.io/2020/08/09/HTTP/09/)，主要内容包括

* `HTTP`
* 加密
* 多个客户端
* 对称加密秘钥如何传输
* 非对称加密
* 第三方认证
* 为什么要有签名 -->


