---
title: 深入 TypeScript
date: 2020-12-26
categories: JavaScript
tags: JavaScript
toc: true
thumbnail: https://gitee.com/heptaluan/backups/raw/master/cdn/cover/56.webp
---

虽然之前一直项目当中使用 `Angular` 来进行业务开发，但是总感觉对于 `TypeScript` 这一块的内容还是只停留在比较浅的使用层面，而最近又开始涉及到 `React` 相关内容，发现 `React + TypeScript` 算是业界标配了，所以就打算抽些时间深入的学习一下 `TypeScript`，在这里记录记录，也算是查漏补缺吧

但是需要注意的是，本文当中涉及到的内容可能比较零散，因为便于自己回顾，一些比较熟络的知识点可能会一笔带过，主要会记录一些平常使用较少的部分，想了解整体流程可以参考 [官方文档](https://www.tslang.cn/docs/home.html) 来了解更多

<!--more-->



## 什么是 TypeScript

`TypeScript` 是 `JavaScript` 的一个超集，主要提供了「类型系统」和对 `ES6` 的支持，至于为什么选择 `TypeScript` 主要有以下几个原因

* `TypeScript` 增加了代码的可读性和可维护性
  * 类型系统实际上是最好的文档，大部分的函数看看类型的定义就可以知道如何使用了
  * 可以在编译阶段就发现大部分错误，这总比在运行时候出错好
  * 增强了编辑器和 `IDE` 的功能，包括代码补全、接口提示、跳转到定义、代码重构等
* `TypeScript` 非常包容
  * `TypeScript` 是 `JavaScript` 的超集，文件可以直接重命名为 `.ts` 即可
  * 即使不显式的定义类型，也能够自动做出类型推论
  * `TypeScript` 的类型系统是图灵完备的，可以定义从简单到复杂的几乎一切类型
  * 即使 `TypeScript` 编译报错，也可以生成 `JavaScript` 文件
  * 兼容第三方库，即使第三方库不是用 `TypeScript` 写的，也可以编写单独的类型文件供 `TypeScript` 读取
* `TypeScript` 拥有活跃的社区
  * 大部分第三方库都有提供给 `TypeScript` 的类型定义文件
  * `Angular`、`Vue`、`VSCode`、`Ant Design` 等耳熟能详的项目都是使用 `TypeScript` 编写的

但是任何事物都是有两面性的，通常来说 `TypeScript` 的一些弊端在于

* 有一定的学习成本，需要理解接口（`Interfaces`）、泛型（`Generics`）、类（`Classes`）、枚举类型（`Enums`）等概念
* 短期可能会增加一些开发成本，毕竟要多写一些类型的定义，不过对于一个需要长期维护的项目，`TypeScript` 能够减少其维护成本
* 集成到构建流程需要一些工作量
* 可能和一些库结合的不是很完美

另外，除了 `TypeScript` 还有一个 [Flow](https://flow.org/) 可供选择，`Flow` 是 `Facebook` 出品的 `JavaScript` 静态类型检查工具，它与 `Typescript` 不同的是，它可以部分引入，不需要完全重构整个项目，所以对于一个已有一定规模的项目来说，迁移成本更小，也更加可行，所以还是根据团队和项目的情况判断是否需要使用 `TypeScript`

下面我们就来看看 `TypeScript` 当中的常用类型和一些基本概念，主要包括

* 原始数据类型
* 任意值
* 类型推论
* 联合类型
* 对象的类型（接口）
* 数组的类型
* 函数的类型
* 类型断言
* 声明文件
* 内置对象


## 原始数据类型

`JavaScript` 的类型分为两种，原始数据类型（`Primitive data types`）和对象类型（`Object types`），原始数据类型包括布尔值、数值、字符串、`null`、`undefined` 以及 `ES6` 中的新类型 `Symbol` 和 `BigInt`，在本节当中我们主要来看看原始数据类型在 `TypeScript` 中的应用


#### 布尔值

在 `TypeScript` 中，使用 `boolean` 定义布尔值类型（注意区分大小写）

```js
let isDone: boolean = false  // ✅
```

但是需要注意的是，如果使用的是构造函数 `Boolean` 创造的对象则不是布尔值

```js
let createdByNewBoolean: boolean = new Boolean(true)  // Type 'Boolean' is not assignable to type 'boolean'.
```

事实上 `new Boolean()` 返回的是一个 `Boolean` 对象

```js
let createdByNewBoolean: Boolean = new Boolean(true)  // ✅
```

在 `TypeScript` 中，`boolean` 是 `JavaScript` 中的基本类型，而 `Boolean` 是 `JavaScript` 中的构造函数，其他基本类型（除了 `null` 和 `undefined`）也是一样的





## 参考

* [TypeScript](https://www.typescriptlang.org)