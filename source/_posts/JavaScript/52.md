#### 位运算符

使用 `&` 运算符（按位与，`AND`）判断一个数的奇偶

```js
// 奇数 & 1 = 0
// 偶数 & 1 = 1
console.log(3 & 1)  // 1
console.log(2 & 1)  // 0
```

使用 `~`（按位非，`NOT`），`>>`（有符号右移），`<<`（左移），`>>>`（无符号右移），`|`（按位或，`OR`）来取整

```js
console.log(~~3.14)       // 3
console.log(3.14 >> 0)    // 3
console.log(3.14 << 0)    // 3
console.log(3.14 | 0)     // 3

// 注意：>>> 不可对负数取整
console.log(3.14 >>> 0)   // 3
console.log(-3.14 >>> 0)  // 4294967293
```

在使用 `~~` 取整的时候，有一个需要注意的地方，就是注意区分与 `parseInt` 的区别，两者在本质上是完全不同的

* `parseInt` 的用途是字符串转整数

* 位运算符是浮点数转 `Int32`（`ToInt32`）

但是位运算符和 `parseInt` 都存在越界问题，其中位运算符限定为 `32` 位整数，而 `parseInt` 在转换 `Number` 不能精确表示的数字时会出现问题

`parseInt` 可能返回 `double` 类型中的所有整数，也可能返回 `NaN`、`±Infinity`，而位运算总是返回 `Int32`（`NaN` 和 `±Infinity` 会被转为 `0`）

```js
// ==========
console.log(parseInt(1e21))    // 1
console.log(parseInt(2e21))    // 2
console.log(parseInt('abc'))   // NaN

console.log(~~'abc')           // 0
console.log(~~999999999.909)   // 999999999
console.log(~~9999999999.909)  // 1410065407
```


使用 `^`（按位异或，`XOR`）来完成值交换

```js
var a = 3
var b = 5

a ^= b
b ^= a
a ^= b

console.log(a)   // 5
console.log(b)   // 3
```

`>>` 的一个常见用法如下，`>> 1` 相当于除以 `2`，但是忽略余数

```js
11 >> 1 // 5
23 >> 1 // 11
```

使用 `&`，`>>`，`|` 来完成 `rgb` 值和 `16` 进制颜色值之间的转换

```js
/**
 * 16 进制颜色值转 RGB
 * @param  {String} hex  16 进制颜色字符串
 * @return {String}      RGB 颜色字符串
 */
function hexToRGB(hex) {
  var hexx = hex.replace('#', '0x')
  var r = hexx >> 16
  var g = hexx >> 8 & 0xff
  var b = hexx & 0xff
  return `rgb(${r}, ${g}, ${b})`
}

/**
* RGB 颜色转 16 进制颜色
* @param  {String} rgb  RGB 进制颜色字符串
* @return {String}      16 进制颜色字符串
*/
function RGBToHex(rgb) {
  var rgbArr = rgb.split(/[^\d]+/)
  var color = rgbArr[1] << 16 | rgbArr[2] << 8 | rgbArr[3]
  return '#' + color.toString(16)
}

// 使用
hexToRGB('#ccc')              // 'rgb(0, 12, 204)'
RGBToHex('rgb(0, 12, 204)')   // '#ccc'
```